"use strict";(self.webpackChunkadmin2=self.webpackChunkadmin2||[]).push([[583],{9583:(_t,A,a)=>{a.r(A),a.d(A,{TemplatesEditModule:()=>ut});var u=a(9808),q=a(2461),f=a(440),C=a(2722),g=a(5330),Z=a(511);class E{constructor(s,e,n,i,l,p,d,b,gt,ht){this.id=s,this.name=e,this.extension=n,this.type=i,this.content=l,this.path=p,this.clearCache=d,this.themeName=b,this.fileSize=gt,this.fileSizeString=ht,this.type||(this.type="template")}static getPath(s){return`${s.path}/${s.name}`}}var x=a(520),T=a(262),F=a(608),t=a(7587);let h=(()=>{class o extends F.D{constructor(e){super(e),this.setRequestUrl("/admin/templates")}getItemContent(e,n){const i=this.getRequestUrl()+"/content";let l=new x.LE;return l=l.append("path",e),l=l.append("type",n),this.http.get(i,{params:l,headers:this.headers}).pipe((0,T.K)(this.handleError()))}saveContent(e){return this.http.post(this.getRequestUrl(),e,{headers:this.headers}).pipe((0,T.K)(this.handleError()))}deleteFileItem(e){const n=this.getRequestUrl();let i=new x.LE;return i=i.append("path",e),this.http.delete(n,{params:i,headers:this.headers}).pipe((0,T.K)(this.handleError()))}deleteFilesBatch(e){const n=`${this.getRequestUrl()}/delete/batch`;return this.http.post(n,{pathArr:e},{headers:this.headers}).pipe((0,T.K)(this.handleError()))}getThemesList(){const e=`${this.getRequestUrl()}/themes`;return this.http.get(e,{headers:this.headers}).pipe((0,T.K)(this.handleError()))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var I=a(6421),c=a(3075),U=a(7579),Y=a(5759),Q=a(2732),m=a(9783),R=a(4332),D=a(1480),y=a(1424),P=a(242),k=a(3724),v=a(845),M=a(5787),_=a(2925);function j(o,s){if(1&o&&t._UZ(0,"p-message",20),2&o){const e=t.oxw();t.Q6J("text",e.errorMessage)}}let H=(()=>{class o extends Y.P{constructor(e,n,i,l,p,d,b){super(e,n,i,l),this.ref=e,this.config=n,this.systemNameService=i,this.dataService=l,this.messageService=p,this.settingsService=d,this.appSettings=b,this.form=new c.cw({id:new c.NI("",[])}),this.isEditMode=!1,this.errorMessage="",this.submitted=!1,this.loading=!1,this.isPathReadOnly=!1,this.closeReason="canceled",this.uniqueId="",this.destroyed$=new U.x}ngOnInit(){this.model=new E(this.config.data.id,"",""),this.model.type=this.config.data.type||"template",this.config.data.name&&(this.isEditMode=!0,this.model.name=this.config.data.name,this.model.path=this.config.data.path,this.model.extension=this.config.data.extension,this.model.themeName=this.config.data.themeName),this.isEditMode&&this.getContent()}ngAfterViewInit(){this.editorInit()}getContent(){this.loading=!0;const e=E.getPath(this.model);this.dataService.getItemContent(e,this.model.type).pipe((0,C.R)(this.destroyed$)).subscribe({next:n=>{n.content&&setTimeout(()=>{this.model.content=n.content,this.editor.setValue(this.model.content,-1)},0),this.loading=!1},error:n=>{n.error&&(this.errorMessage=n.error),this.loading=!1}})}editorInit(){const e=ace.require("ace/ext/modelist"),n=this.isEditMode?e.getModeForPath(`${this.model.path}/${this.model.name}`).mode:"ace/mode/twig";ace.config.setModuleUrl("ace/mode/javascript_worker","../js/ace/worker-javascript.js"),ace.config.setModuleUrl("ace/mode/css_worker","../js/ace/worker-css.js"),this.editor=ace.edit(`editor-${this.model.type}-${this.model.id}`,{mode:n,theme:"ace/theme/kuroir",maxLines:30,minLines:15,fontSize:18})}saveRequest(){return this.dataService.saveContent(this.getFormData())}getFormData(){const e=Object.assign({},this.model);return e.content=this.editor.getValue(),e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.E7),t.Y36(g.S),t.Y36(Q.U),t.Y36(h),t.Y36(m.ez),t.Y36(R.g),t.Y36(D.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-file-edit"]],features:[t._Bn([h]),t.qOj],decls:36,vars:28,consts:[[1,"grid"],[1,"col-12","md:col-6"],["for","fieldName",1,"block","mb-2"],["type","text","id","fieldName","pInputText","",1,"w-full","mb-2",3,"ngModel","ngModelChange"],["for","fieldPath",1,"block","mb-2"],["type","text","id","fieldPath","pInputText","",1,"w-full","mb-2",3,"ngModel","readonly","ngModelChange"],[1,"grid","mb-3"],[1,"pt-2"],["inputId","fieldClearCache","styleClass","mr-2 vertical-align-middle",3,"ngModel","ngModelChange"],["for","fieldClearCache",1,"vertical-align-middle"],[1,"mb-0"],[1,"block","mb-2"],[1,"border",3,"id"],["role","separator",1,"p-divider","p-component","p-divider-horizontal","p-divider-solid","p-divider-left"],[1,"p-divider-content"],["styleClass","block w-full text-left mb-3","severity","error",3,"text",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-check",1,"p-button-success","p-button-raised","w-full",3,"label","click"],[1,"col-12","md:col-3"],["pButton","","pRipple","","type","button","icon","pi pi-check",1,"p-button-warning","p-button-raised","w-full",3,"label","click"],["pButton","","pRipple","","type","button",1,"p-button-secondary","p-button-raised","w-full",3,"label","click"],["styleClass","block w-full text-left mb-3","severity","error",3,"text"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",3),t.NdJ("ngModelChange",function(l){return n.model.name=l}),t.qZA()(),t.TgZ(6,"div",1)(7,"label",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",5),t.NdJ("ngModelChange",function(l){return n.model.path=l}),t.qZA()()(),t.TgZ(11,"div",6)(12,"div",1)(13,"div",7)(14,"p-inputSwitch",8),t.NdJ("ngModelChange",function(l){return n.model.clearCache=l}),t.qZA(),t.TgZ(15,"label",9),t._uU(16),t.ALo(17,"translate"),t.qZA()()()(),t.TgZ(18,"div",10)(19,"label",11),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"div",12),t.qZA(),t.TgZ(23,"div",13),t._UZ(24,"div",14),t.qZA(),t.YNc(25,j,1,1,"p-message",15),t.TgZ(26,"div",0)(27,"div",1)(28,"button",16),t.NdJ("click",function(l){return n.saveData(!0,l)}),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",17)(31,"button",18),t.NdJ("click",function(l){return n.saveData(!1,l)}),t.ALo(32,"translate"),t.qZA()(),t.TgZ(33,"div",17)(34,"button",19),t.NdJ("click",function(l){return n.closeModal(l)}),t.ALo(35,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,14,"NAME")," "),t.xp6(2),t.Q6J("ngModel",n.model.name),t.xp6(3),t.hij(" ",t.lcZ(9,16,"PATH")," "),t.xp6(2),t.Q6J("ngModel",n.model.path)("readonly",n.isPathReadOnly),t.xp6(4),t.Q6J("ngModel",n.model.clearCache),t.xp6(2),t.hij(" ",t.lcZ(17,18,"CLEAR_SYSTEM_CACHE")," "),t.xp6(4),t.hij("",t.lcZ(21,20,"CODE"),":"),t.xp6(2),t.hYB("id","editor-",n.model.type,"-",n.model.id,""),t.xp6(3),t.Q6J("ngIf",n.errorMessage),t.xp6(3),t.Q6J("label",t.lcZ(29,22,"SAVE_AND_CLOSE")),t.xp6(3),t.Q6J("label",t.lcZ(32,24,"SAVE")),t.xp6(3),t.Q6J("label",t.lcZ(35,26,"CLOSE")))},directives:[c.Fj,y.o,c.JJ,c.On,P.Ql,u.O5,k.q,v.Hq,M.H],pipes:[_.X$],encapsulation:2}),o})();var S=a(889),r=a(5050),w=a(6572),L=a(4119),J=a(1874),O=a(330);function $(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",11),t._UZ(3,"i",12),t.TgZ(4,"input",13),t.NdJ("input",function(){return t.CHM(e),t.oxw().onInputSearch()})("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.search_word=i}),t.ALo(5,"translate"),t.qZA()()(),t.TgZ(6,"div",14)(7,"button",15),t.NdJ("click",function(i){return t.CHM(e),t.oxw(),t.MAs(6).toggle(i)}),t.ALo(8,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.MGl("placeholder","",t.lcZ(5,3,"SEARCH"),"..."),t.Q6J("ngModel",e.queryOptions.search_word),t.xp6(3),t.Q6J("label",t.lcZ(8,5,"ACTIONS"))}}function z(o,s){if(1&o&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",18),t.qZA()),2&o){const e=s.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.header)," "),t.xp6(2),t.Q6J("field",e.field)}}function B(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"th"),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,z,4,5,"th",16),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function K(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",24)(2,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().openModal(i)}),t.ALo(3,"translate"),t.qZA()(),t.BQk()}2&o&&(t.xp6(2),t.Q6J("pTooltip",t.lcZ(3,1,"EDIT")))}function V(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"app-render-output",22),t.NdJ("changeRequest",function(i){return t.CHM(e),t.oxw(2).onOptionUpdate(i)}),t.qZA(),t.YNc(2,K,4,3,"ng-container",23),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(),l=i.$implicit,p=i.columns;t.xp6(1),t.Q6J("value",l[e.field])("key",e.field)("outputType",e.outputType)("options",e.outputProperties)("object",l),t.xp6(1),t.Q6J("ngIf",p.length==n+1)}}function X(o,s){if(1&o&&(t.TgZ(0,"tr",19)(1,"td"),t._UZ(2,"p-tableCheckbox",20),t.qZA(),t.YNc(3,V,3,6,"td",21),t.qZA()),2&o){const e=s.$implicit,n=s.columns;t.Q6J("pContextMenuRow",e),t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",n)}}function G(o,s){1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function W(o,s){1&o&&(t._uU(0),t.ALo(1,"translate")),2&o&&t.hij(" ",t.lcZ(1,1,"EMPTY"),". ")}function tt(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",26),t.YNc(2,G,3,3,"ng-container",27),t.YNc(3,W,2,3,"ng-template",null,28,t.W1O),t.qZA()()),2&o){const e=s.$implicit,n=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("colSpan",e.length+1),t.xp6(1),t.Q6J("ngIf",i.queryOptions.search_word)("ngIfElse",n)}}let N=(()=>{class o extends I.p{constructor(e,n,i,l,p,d){super(e,n,i,l,p,d),this.dialogService=e,this.contentTypesService=n,this.dataService=i,this.translateService=l,this.messageService=p,this.confirmationService=d,this.queryOptions=new Z.J(1,20,"type","asc"),this.themes=[],this.cols=[{field:"name",header:"NAME",outputType:"text",outputProperties:{}},{field:"type",header:"TYPE",outputType:"text",outputProperties:{}},{field:"path",header:"PATH",outputType:"text",outputProperties:{}},{field:"fileSize",header:"FILE_SIZE",outputType:"number",outputProperties:{}}]}ngOnInit(){this.dataService.setRequestUrl("/admin/templates/editable_files"),this.menuItems=[{label:this.getLangString("REFRESH"),icon:"pi pi-refresh",command:e=>{this.queryOptions.page=1,this.queryOptions.search_word="",this.getData()}}],this.contextMenuItems=[{label:this.getLangString("EDIT"),icon:"pi pi-fw pi-pencil",command:()=>this.openModal(this.itemSelected)}]}getModalComponent(){return H}openModal(e,n){n&&n.preventDefault(),this.dialogService.open(this.getModalComponent(),{header:this.getModalTitle(e),width:"1200px",data:this.getItemData(e)}).onClose.pipe((0,C.R)(this.destroyed$)).subscribe(l=>{l&&(this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("DATA_SAVED_SUCCESSFULLY")}),this.getData())})}getItemData(e){return e?{id:e.id||0,name:e.name,path:e.path,type:e.type,extension:e.extension,themeName:e.themeName||""}:{id:0}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.xA),t.Y36(S.s),t.Y36(h),t.Y36(_.sK),t.Y36(m.ez),t.Y36(m.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-assets-edit"]],features:[t._Bn([g.xA,h]),t.qOj],decls:9,vars:16,consts:[["styleClass","p-datatable-striped","dataKey","id",3,"selection","contextMenuSelection","contextMenu","sortField","sortOrder","lazy","paginator","showJumpToPageDropdown","value","columns","rows","totalRecords","loading","selectionChange","contextMenuSelectionChange","onLazyLoad"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","p-menu-nowrap",3,"popup","model"],["menu",""],[3,"model"],["contextMenu",""],[1,"flex","lg:justify-content-between","flex-wrap"],[1,"w-full","lg:w-auto","mb-2","lg:mb-0"],[1,"p-input-icon-left","w-full","lg:w-auto","lg-2","lg:mb-0","mr-0","lg:mr-2","mb-2","lg:mb-0"],[1,"pi","pi-search"],["pInputText","","type","text",1,"lg:w-auto","w-full",3,"ngModel","placeholder","input","ngModelChange"],[1,"w-full","lg:w-auto"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down","iconPos","left",1,"ml-0","lg:ml-2","w-full","lg:w-auto","mb-2","lg:mb-0",3,"label","click"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"show-on-hover-parent",3,"pContextMenuRow"],[3,"value"],[4,"ngFor","ngForOf"],[3,"value","key","outputType","options","object","changeRequest"],[4,"ngIf"],[1,"absolute","show-on-hover","pos-top10","pos-right10"],["pButton","","pRipple","","icon","pi pi-pencil","tooltipPosition","left",1,"p-button","p-button-sm","p-button-rounded","p-button-info",3,"pTooltip","click"],[3,"colSpan"],[4,"ngIf","ngIfElse"],["emptyMessage",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"p-table",0),t.NdJ("selectionChange",function(l){return n.itemsSelected=l})("contextMenuSelectionChange",function(l){return n.itemSelected=l})("onLazyLoad",function(l){return n.getData(l)}),t.YNc(1,$,9,7,"ng-template",1),t.YNc(2,B,4,1,"ng-template",2),t.YNc(3,X,4,3,"ng-template",3),t.YNc(4,tt,5,3,"ng-template",4),t.qZA(),t._UZ(5,"p-menu",5,6)(7,"p-contextMenu",7,8)),2&e){const i=t.MAs(8);t.Q6J("selection",n.itemsSelected)("contextMenuSelection",n.itemSelected)("contextMenu",i)("sortField",n.queryOptions.sort_by)("sortOrder","asc"==n.queryOptions.sort_dir?1:-1)("lazy",!0)("paginator",!0)("showJumpToPageDropdown",!0)("value",n.items)("columns",n.cols)("rows",n.queryOptions.limit)("totalRecords",n.itemsTotal)("loading",n.loading),t.xp6(5),t.Q6J("popup",!0)("model",n.menuItems),t.xp6(2),t.Q6J("model",n.contextMenuItems)}},directives:[r.iA,m.jx,c.Fj,y.o,c.JJ,c.On,v.Hq,M.H,r.Mo,u.sg,r.lQ,r.fz,r.zi,r.UA,w.g,u.O5,L.u,J.v2,O.xV],pipes:[_.X$],encapsulation:2}),o})();var et=a(4036);function nt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",11),t._UZ(3,"i",12),t.TgZ(4,"input",13),t.NdJ("input",function(){return t.CHM(e),t.oxw().onInputSearch()})("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.search_word=i}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",14)(7,"p-dropdown",15),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.category=i})("ngModelChange",function(){return t.CHM(e),t.oxw().onThemeChange()}),t.qZA()()(),t.TgZ(8,"div",16)(9,"button",17),t.NdJ("click",function(i){return t.CHM(e),t.oxw(),t.MAs(6).toggle(i)}),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",18),t.NdJ("click",function(i){return t.CHM(e),t.oxw().openModal(null,i)}),t.ALo(12,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.MGl("placeholder","",t.lcZ(5,6,"SEARCH"),"..."),t.Q6J("ngModel",e.queryOptions.search_word),t.xp6(3),t.Q6J("options",e.themes)("ngModel",e.queryOptions.category),t.xp6(2),t.Q6J("label",t.lcZ(10,8,"ACTIONS")),t.xp6(2),t.Q6J("label",t.lcZ(12,10,"ADD"))}}function ot(o,s){if(1&o&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",21),t.qZA()),2&o){const e=s.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.header)," "),t.xp6(2),t.Q6J("field",e.field)}}function it(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"th"),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,ot,4,5,"th",19),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function lt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",27)(2,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().openModal(i)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().deleteItem(i)}),t.ALo(5,"translate"),t.qZA()(),t.BQk()}2&o&&(t.xp6(2),t.Q6J("pTooltip",t.lcZ(3,2,"EDIT")),t.xp6(2),t.Q6J("pTooltip",t.lcZ(5,4,"DELETE")))}function st(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"app-render-output",25),t.NdJ("changeRequest",function(i){return t.CHM(e),t.oxw(2).onOptionUpdate(i)}),t.qZA(),t.YNc(2,lt,6,6,"ng-container",26),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(),l=i.$implicit,p=i.columns;t.xp6(1),t.Q6J("value",l[e.field])("key",e.field)("outputType",e.outputType)("options",e.outputProperties)("object",l),t.xp6(1),t.Q6J("ngIf",p.length==n+1)}}function at(o,s){if(1&o&&(t.TgZ(0,"tr",22)(1,"td"),t._UZ(2,"p-tableCheckbox",23),t.qZA(),t.YNc(3,st,3,6,"td",24),t.qZA()),2&o){const e=s.$implicit,n=s.columns;t.Q6J("pContextMenuRow",e),t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",n)}}function pt(o,s){1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function rt(o,s){1&o&&(t._uU(0),t.ALo(1,"translate")),2&o&&t.hij(" ",t.lcZ(1,1,"EMPTY"),". ")}function ct(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",30),t.YNc(2,pt,3,3,"ng-container",31),t.YNc(3,rt,2,3,"ng-template",null,32,t.W1O),t.qZA()()),2&o){const e=s.$implicit,n=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("colSpan",e.length+1),t.xp6(1),t.Q6J("ngIf",i.queryOptions.search_word)("ngIfElse",n)}}const dt=[{path:"",component:(()=>{class o{navBarToggle(){window.document.querySelector(".layout-sidebar").classList.toggle("active"),window.document.querySelector(".layout-mask").classList.toggle("layout-mask-active")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-template-edit-main"]],features:[t._Bn([])],decls:20,vars:9,consts:[[1,"layout-topbar","justify-content-between"],["type","button",1,"menu-button",3,"click"],[1,"pi","pi-bars"],[1,"layout-topbar-header","text-3xl","text-600"],[1,"fi","fi-br-layout-fluid","vertical-align-middle","mr-3"],[1,"vertical-align-middle"],[1,"topbar-menu"],["routerLinkActive","active"],["routerLink","templates"],["routerLink","assets"],[1,"layout-content"],[1,"content-section","min-height400","bg-white"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.navBarToggle()}),t._UZ(2,"i",2),t.qZA(),t.TgZ(3,"span",3),t._UZ(4,"i",4),t.TgZ(5,"span",5),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"ul",6)(9,"li",7)(10,"a",8),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"li",7)(14,"a",9),t._uU(15),t.ALo(16,"translate"),t.qZA()()()(),t.TgZ(17,"div",10)(18,"div",11),t._UZ(19,"router-outlet"),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,3,"CODE")),t.xp6(5),t.Oqu(t.lcZ(12,5,"TEMPLATES")),t.xp6(4),t.Oqu(t.lcZ(16,7,"ASSETS")))},directives:[f.Od,f.yS,f.lC],pipes:[_.X$],encapsulation:2}),o})(),children:[{path:"",redirectTo:"templates"},{path:"templates",component:(()=>{class o extends N{constructor(e,n,i,l,p,d){super(e,n,i,l,p,d),this.dialogService=e,this.contentTypesService=n,this.dataService=i,this.translateService=l,this.messageService=p,this.confirmationService=d,this.queryOptions=new Z.J(1,20,"path","asc"),this.themes=[],this.cols=[{field:"name",header:"NAME",outputType:"text",outputProperties:{}},{field:"themeName",header:"TEMPLATE_THEME_NAME",outputType:"text",outputProperties:{}},{field:"path",header:"PATH",outputType:"text",outputProperties:{}}]}ngOnInit(){this.menuItems=[{label:this.getLangString("REFRESH"),icon:"pi pi-refresh",command:e=>{this.queryOptions.page=1,this.queryOptions.search_word="",this.getData()}},{label:this.getLangString("DELETE_SELECTED"),icon:"pi pi-times",command:e=>{this.deleteSelected()}}],this.contextMenuItems=[{label:this.getLangString("EDIT"),icon:"pi pi-fw pi-pencil",command:()=>this.openModal(this.itemSelected)},{label:this.getLangString("DELETE"),icon:"pi pi-fw pi-trash",command:()=>this.deleteItem(this.itemSelected)}],this.getThemesList()}getThemesList(){this.dataService.getThemesList().subscribe({next:e=>{this.themes=e.map(n=>(n.title||(n.title=n.name),n)),this.themes.unshift({name:"",title:this.getLangString("ALL")})}})}onThemeChange(){this.queryOptions.page=1,this.getData()}deleteSelected(){this.itemsSelected&&0!==this.itemsSelected.length?this.confirmationService.confirm({message:this.getLangString("YOU_SURE_YOU_WANT_DELETE"),accept:()=>{const e=[];this.itemsSelected.forEach(n=>{e.push(E.getPath(n))}),this.dataService.deleteFilesBatch(e).pipe((0,C.R)(this.destroyed$)).subscribe({next:n=>{this.messageService.add({key:"message",severity:"success",detail:this.getLangString("DELETED_SUCCESSFULLY")}),1===this.items.length&&(this.queryOptions.page=1),this.getData()},error:n=>{n.error&&this.messageService.add({key:"message",severity:"error",detail:n.error}),this.loading=!1}})}}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}deleteItem(e,n){n&&n.preventDefault(),this.confirmationService.confirm({message:this.getLangString("YOU_SURE_YOU_WANT_DELETE"),accept:()=>{const i=E.getPath(e);this.dataService.deleteFileItem(i).pipe((0,C.R)(this.destroyed$)).subscribe({next:l=>{this.messageService.add({key:"message",severity:"success",detail:this.getLangString("DELETED_SUCCESSFULLY")}),1===this.items.length&&(this.queryOptions.page=1),this.getData()},error:l=>{l.error&&this.messageService.add({key:"message",severity:"error",detail:l.error}),this.loading=!1}})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.xA),t.Y36(S.s),t.Y36(h),t.Y36(_.sK),t.Y36(m.ez),t.Y36(m.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-template-edit"]],features:[t._Bn([g.xA,h]),t.qOj],decls:9,vars:16,consts:[["styleClass","p-datatable-striped","dataKey","id",3,"selection","contextMenuSelection","contextMenu","sortField","sortOrder","lazy","paginator","showJumpToPageDropdown","value","columns","rows","totalRecords","loading","selectionChange","contextMenuSelectionChange","onLazyLoad"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","p-menu-nowrap",3,"popup","model"],["menu",""],[3,"model"],["contextMenu",""],[1,"flex","lg:justify-content-between","flex-wrap"],[1,"w-full","lg:w-auto","mb-2","lg:mb-0"],[1,"p-input-icon-left","w-full","lg:w-auto","lg-2","lg:mb-0","mr-0","lg:mr-2","mb-2","lg:mb-0"],[1,"pi","pi-search"],["pInputText","","type","text",1,"lg:w-auto","w-full",3,"ngModel","placeholder","input","ngModelChange"],[1,"lg:inline-block"],["styleClass","w-full lg:w-auto","optionLabel","title","optionValue","name",3,"options","ngModel","ngModelChange"],[1,"w-full","lg:w-auto"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down","iconPos","left",1,"ml-0","lg:ml-2","w-full","lg:w-auto","mb-2","lg:mb-0",3,"label","click"],["type","button","pButton","","pRipple","","icon","pi pi-plus","iconPos","left",1,"p-button-success","ml-0","lg:ml-2","w-full","lg:w-auto",3,"label","click"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"show-on-hover-parent",3,"pContextMenuRow"],[3,"value"],[4,"ngFor","ngForOf"],[3,"value","key","outputType","options","object","changeRequest"],[4,"ngIf"],[1,"absolute","show-on-hover","pos-top10","pos-right10"],["pButton","","pRipple","","icon","pi pi-pencil","tooltipPosition","bottom",1,"p-button","p-button-sm","p-button-rounded","p-button-info",3,"pTooltip","click"],["pButton","","pRipple","","icon","pi pi-trash","tooltipPosition","left",1,"p-button","p-button-sm","p-button-rounded","p-button-danger","ml-2",3,"pTooltip","click"],[3,"colSpan"],[4,"ngIf","ngIfElse"],["emptyMessage",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"p-table",0),t.NdJ("selectionChange",function(l){return n.itemsSelected=l})("contextMenuSelectionChange",function(l){return n.itemSelected=l})("onLazyLoad",function(l){return n.getData(l)}),t.YNc(1,nt,13,12,"ng-template",1),t.YNc(2,it,4,1,"ng-template",2),t.YNc(3,at,4,3,"ng-template",3),t.YNc(4,ct,5,3,"ng-template",4),t.qZA(),t._UZ(5,"p-menu",5,6)(7,"p-contextMenu",7,8)),2&e){const i=t.MAs(8);t.Q6J("selection",n.itemsSelected)("contextMenuSelection",n.itemSelected)("contextMenu",i)("sortField",n.queryOptions.sort_by)("sortOrder","asc"==n.queryOptions.sort_dir?1:-1)("lazy",!0)("paginator",!0)("showJumpToPageDropdown",!0)("value",n.items)("columns",n.cols)("rows",n.queryOptions.limit)("totalRecords",n.itemsTotal)("loading",n.loading),t.xp6(5),t.Q6J("popup",!0)("model",n.menuItems),t.xp6(2),t.Q6J("model",n.contextMenuItems)}},directives:[r.iA,m.jx,c.Fj,y.o,c.JJ,c.On,et.Lt,v.Hq,M.H,r.Mo,u.sg,r.lQ,r.fz,r.zi,r.UA,w.g,u.O5,L.u,J.v2,O.xV],pipes:[_.X$],encapsulation:2}),o})()},{path:"assets",component:N}]}];let mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(dt)],f.Bz]}),o})(),ut=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,q.m,mt]]}),o})()}}]);