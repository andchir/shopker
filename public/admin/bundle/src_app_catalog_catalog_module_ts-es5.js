!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,i){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,i||e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_catalog_catalog_module_ts"],{88232:function(t,o,l){"use strict";l.r(o),l.d(o,{CatalogModule:function(){return gt}});var d=l(38583),u=l(16964),p=l(5727),m=l(37716),g=l(29790),f=function(){return["field_types"]},h=function(){return["content_types"]},v=function(){var e=function(){function e(){s(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.title="CATALOG",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-catalog"]],decls:27,vars:13,consts:[[1,"position-relative"],[1,"tabs-top"],["href","","routerLinkActive","active",1,"btn","btn-outline-primary","d-block","d-md-inline-block","ms-md-2",3,"routerLink"],[1,"icon-toggle"],["href","","routerLinkActive","active",1,"btn","btn-outline-primary","d-block","d-md-inline-block","mb-2","mb-md-0",3,"routerLink"],[1,"icon-box"],[1,"card"],[1,"card-body"],[1,"float-md-start","mt-4","mt-md-0"],[1,"m-0"],[1,"icon-layers"],[1,"clearfix"],[1,"min-height400"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"i",3),m._uU(4," \xa0 "),m.TgZ(5,"span"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.qZA(),m.TgZ(8,"a",4),m._UZ(9,"i",5),m._uU(10," \xa0 "),m.TgZ(11,"span"),m._uU(12),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(14,"div",6),m.TgZ(15,"div",7),m.TgZ(16,"div",8),m.TgZ(17,"h3",9),m._UZ(18,"i",10),m._uU(19," \xa0 "),m.TgZ(20,"span"),m._uU(21),m.ALo(22,"translate"),m.qZA(),m.qZA(),m.qZA(),m._UZ(23,"div",11),m._UZ(24,"hr"),m.TgZ(25,"div",12),m._UZ(26,"router-outlet"),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Q6J("routerLink",m.DdM(11,f)),m.xp6(4),m.Oqu(m.lcZ(7,5,"FIELD_TYPES")),m.xp6(2),m.Q6J("routerLink",m.DdM(12,h)),m.xp6(4),m.Oqu(m.lcZ(13,7,"CONTENT_TYPES")),m.xp6(9),m.Oqu(m.lcZ(22,9,"CATALOG")))},directives:[p.yS,p.Od,p.lC],pipes:[g.X$],encapsulation:2}),e}(),Z=l(23815),b=function(){function e(t,n,i,o,r,l,a,d,c,u,p,m){s(this,e),this.id=t,this.isFolder=n,this.parentId=i,this.name=o,this.title=r,this.description=l,this.contentTypeName=a,this.isActive=d,this.clearCache=c,this.menuIndex=u,this.translations=p,this.image=m,void 0===this.clearCache&&(this.clearCache=!1),void 0===this.translations&&(this.translations={})}return c(e,null,[{key:"createTree",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length)return null;if(!n){var o=(0,Z.findIndex)(t,{name:"root"});n=o>-1?e.toTreeNode(t[o],i):{id:0,parentId:0,label:"",expanded:!0,children:[]}}n.children=[];var r=t.filter(function(e){return 0!==e.id&&e.parentId===n.id});return r.length>0&&(r.forEach(function(t){n.children.push(e.toTreeNode(t,i))}),n.children.forEach(function(n){e.createTree(t,n,i)})),0===n.children.length&&(n.children=null),n}},{key:"getCurrentNode",value:function(t,n){if(!n)return null;if(n.id===t)return n;if(n.children){for(var i=null,o=0;null==i&&o<n.children.length;o++)i=e.getCurrentNode(t,n.children[o]);return i}return null}},{key:"toTreeNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{id:e.id,label:e.title,parentId:e.parentId||0,expanded:t}}}]),e}(),T=l(3677),A=l(3679),y=function(){function e(t,n,i,o,r,l,a,d,c){s(this,e),this.id=t,this.name=n,this.title=i,this.description=o,this.collection=r,this.fields=l,this.groups=a,this.isActive=d,this.isCreateByUsersAllowed=c,this.isCreateByUsersAllowed||(this.isCreateByUsersAllowed=!1)}return c(e,null,[{key:"getSystemFieldName",value:function(e){var t=(0,Z.findIndex)(e.fields,{inputType:"system_name"});return t>-1?e.fields[t].name:"name"}},{key:"getFieldByName",value:function(e,t){var n=(0,Z.findIndex)(e.fields,{name:t});return n>-1?e.fields[n]:null}}]),e}(),q=l(39343),C=l(63124),x=l(64916),k=l(23056),_=l(6887),I=l(91841),E=function(){var e=function(e){i(n,e);var t=r(n);function n(e){var i;return s(this,n),(i=t.call(this,e)).setRequestUrl("/admin/products"),i}return n}(_.D);return e.\u0275fac=function(t){return new(t||e)(m.LFG(I.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(e){i(n,e);var t=r(n);function n(e){var i;return s(this,n),(i=t.call(this,e)).setRequestUrl("/admin/files"),i}return n}(_.D);return e.\u0275fac=function(t){return new(t||e)(m.LFG(I.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e}(),S=l(71177),N=l(73844),O=l(95047),w=l(89516),M=l(17330);function F(e,t){if(1&e&&(m.TgZ(0,"div",43),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.parentId," ")}}function U(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"app-input-field-renderer",44),m.BQk()),2&e){var n=m.oxw();m.xp6(1),m.Q6J("fields",n.currentContentType.fields)("groups",n.currentContentType.groups)("formErrors",n.formErrors)("validationMessages",n.validationMessages)("model",n.model)("form",n.form)("files",n.files)("localeFieldsAllowed",n.localeFieldsAllowed)("isLocalizationActive",n.localeCurrent!==n.localeDefault)}}function D(e,t){if(1&e&&(m.TgZ(0,"label",50),m._UZ(1,"input",51),m._uU(2),m.qZA()),2&e){var n=t.$implicit;m.xp6(1),m.Q6J("value",n),m.xp6(1),m.hij(" ",n," ")}}var J=function(){return{standalone:!0}};function R(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",45),m.TgZ(1,"button",46),m.NdJ("click",function(e){return m.CHM(n),m.oxw().saveTranslations(e)}),m.ALo(2,"translate"),m._UZ(3,"i",47),m.qZA(),m.TgZ(4,"div",48),m.NdJ("ngModelChange",function(e){return m.CHM(n),m.oxw().localeCurrent=e})("ngModelChange",function(){return m.CHM(n),m.oxw().onLocaleSwitch()}),m.YNc(5,D,3,2,"label",49),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(1),m.s9C("ngbTooltip",m.lcZ(2,5,"SAVE")),m.Q6J("hidden",i.localeCurrent==i.localeDefault),m.xp6(3),m.Q6J("ngModel",i.localeCurrent)("ngModelOptions",m.DdM(7,J)),m.xp6(1),m.Q6J("ngForOf",i.localeList)}}var Y=function(){var e=function(e){i(n,e);var t=r(n);function n(e,i,o,r,l,a,d,c,u,p,m){var g;return s(this,n),(g=t.call(this,e,i,o,r,l,a,d)).fb=e,g.dataService=i,g.systemNameService=o,g.activeModal=r,g.tooltipConfig=l,g.translateService=a,g.elRef=d,g.contentTypesService=c,g.categoriesService=u,g.filesService=p,g.appSettings=m,g.categories=[],g.contentTypes=[],g.currentContentType=new y(0,"","","","",[],[],!0),g.model={},g.dataLoaded=!1,g.formFields={parentId:{value:0,validators:[A.kI.required],messages:{required:"Category is required."}},isActive:{value:!0,validators:[],messages:{}},clearCache:{value:!0,validators:[],messages:{}}},g}return c(n,[{key:"ngOnInit",value:function(){var e=this;this.model={id:0,parentId:this.categoryId},this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.localeList=this.appSettings.settings.localeList,this.localeList.length>0&&(this.localeDefault=this.localeList[0],this.localeCurrent=this.localeList[0]),this.model.clearCache=!0,this.dataService.setRequestUrl("/admin/products/".concat(this.categoryId)),this.buildForm(),this.getCategories(),this.getContentType().then(function(t){return e.itemId?e.getModelData():Promise.reject("")},function(t){return e.dataLoaded=!0,e.errorMessage=t.error||"Error.",Promise.reject("")}).then(function(t){e.dataLoaded=!0,e.onAfterGetData(),e.updateForm()},function(){e.dataLoaded=!0,e.onAfterGetData()})}},{key:"onAfterGetData",value:function(){var e=this;this.currentContentType.fields.forEach(function(t){["text","textarea","rich_text"].indexOf(t.inputType)>-1&&e.localeFieldsAllowed.push(t.name)}),this.model.translations&&!Array.isArray(this.model.translations)||(this.model.translations={})}},{key:"getSystemFieldName",value:function(){return y.getSystemFieldName(this.currentContentType)}},{key:"getCategories",value:function(){var e=this;this.categoriesService.getListPage().subscribe(function(t){e.categories=t.items},function(t){e.errorMessage=t.error||"Error."})}},{key:"getContentType",value:function(){var e=this;return this.loading=!0,new Promise(function(t,n){e.contentTypesService.getItemByCategory(e.categoryId).subscribe(function(n){e.currentContentType=n,e.errorMessage="",e.loading=!1,t(n)},function(t){e.errorMessage=t.error||"Error.",e.loading=!1,n(t)})})}},{key:"updateForm",value:function(e){var t=this;e||(e=(0,Z.clone)(this.model));var n=(0,Z.map)(this.currentContentType.fields,function(e){return e.name});for(var i in n.push("id","parentId","previousParentId","isActive","clearCache","translations"),e.clearCache=!0,Object.keys(this.model).forEach(function(e){if(e.indexOf("__")>-1){var i=S._.getFieldBaseName(e);if(i===e)return;var o=S._.getFieldIndexData(t.currentContentType.fields,i);if(-1===o.index)return;var r=(0,Z.cloneDeep)(t.currentContentType.fields[o.index]);r.name=e,t.currentContentType.fields.splice(o.index+o.additFieldsCount+1,0,r),n.push(e)}}),this.form.controls)this.form.controls.hasOwnProperty(i)&&-1===n.indexOf(i)&&this.form.removeControl(i);this.model=(0,Z.pick)(e,n)}},{key:"onChangeContentType",value:function(){var e=parseInt(String(this.model.parentId),10),t=(0,Z.findIndex)(this.categories,{id:e});-1!==t&&(this.currentContentType&&this.currentContentType.name===this.categories[t].contentTypeName||(this.model.previousParentId=this.categoryId,this.categoryId=this.categories[t].id,this.getContentType()))}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var n=new FormData;for(var i in this.files)this.files.hasOwnProperty(i)&&this.files[i]instanceof File&&n.append(i,this.files[i],this.files[i].name);n.append("itemId",String(e)),n.append("ownerType",this.currentContentType.name),n.append("categoryId",String(this.model.parentId)),n.append("fieldsSort",this.getFieldsSortData().join(",")),this.filesService.postFormData(n).subscribe(function(){t.closeModal()},function(e){t.errorMessage=e.error||"Error.",t.submitted=!1,t.loading=!1})}else this.closeModal()}},{key:"getErrorsString",value:function(){var e=this,t=[];return Object.keys(this.form.controls).forEach(function(n){if(e.form.controls[n].invalid&&e.validationMessages[n]){var i=S._.getFieldBaseName(n),o=y.getFieldByName(e.currentContentType,i);if(!o)return;var r;r=e.formErrors[n]?e.formErrors[n]:"".concat(o.title," - error."),t.push(r)}}),t.join(" ")}},{key:"getFormData",value:function(){var e=(0,Z.cloneDeep)(this.model);for(var t in e)e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&e[t].dataUrl&&delete e[t].dataUrl;return e.fieldsSort=this.getFieldsSortData(),e}},{key:"getFieldsSortData",value:function(){var e=this,t=this.currentContentType.fields.map(function(e){return e.name});return t=t.filter(function(t){if(!e.model[t]||-1===t.indexOf("__"))return!1;var n=t.split("__");return!isNaN(n[1])})}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.submitted=!0,this.errorMessage=null,!this.form.valid)return this.onValueChanged("form"),this.errorMessage=this.getErrorsString(),void(this.submitted=!1);this.loading=!0,this.dataService.setRequestUrl("/admin/products/".concat(this.categoryId)),this.saveRequest().subscribe({next:function(n){Object.keys(e.files).length>0?e.saveFiles(n.id||n._id):(t?e.closeModal():n&&(n.id||n._id)&&(e.model=n,e.model.id=n.id||n._id,e.isEditMode=!0),e.closeReason="updated",e.loading=!1,e.submitted=!1)},error:function(t){e.errorMessage=t.error||"Error.",e.submitted=!1,e.loading=!1}})}}]),n}(q.D);return e.\u0275fac=function(t){return new(t||e)(m.Y36(A.qu),m.Y36(E),m.Y36(C.U),m.Y36(O.Kz),m.Y36(O.xI),m.Y36(g.sK),m.Y36(m.SBq),m.Y36(k.s),m.Y36(x.G),m.Y36(L),m.Y36(N.d))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-product-modal-content"]],inputs:{categoryId:"categoryId"},features:[m._Bn([E]),m.qOj],decls:69,vars:50,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5"],[3,"formGroup"],[1,"modal-body","py-0"],[1,"row","mb-2","form-group-message"],[1,"col-md-5"],["for","fieldCategory"],[1,"col-md-7"],["id","fieldCategory","formControlName","parentId",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],[1,"row","mb-2"],[1,"col-md-7","ms-md-auto"],[1,"card","card-body","p-2","ps-3"],[1,"form-check","m-0"],["type","checkbox","value","1","name","isActive","formControlName","isActive",1,"form-check-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-indicator"],[1,"form-check-label",3,"for"],[1,"form-check","mt-2"],["type","checkbox","value","1","name","clearCache","formControlName","clearCache",1,"form-check-input",3,"id","ngModel","ngModelChange"],[1,"min-height300"],[4,"ngIf"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0",3,"hidden"],["type","button",1,"btn-close",3,"click"],[1,"modal-footer","d-block"],["class","float-end",4,"ngIf"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],[1,"alert","alert-danger"],[3,"fields","groups","formErrors","validationMessages","model","form","files","localeFieldsAllowed","isLocalizationActive"],[1,"float-end"],["type","button","placement","left",1,"btn","btn-success","me-2",3,"ngbTooltip","hidden","click"],[1,"icon-check"],["ngbRadioGroup","","name","radioBasic",1,"btn-group","btn-group-toggle",3,"ngModel","ngModelOptions","ngModelChange"],["ngbButtonLabel","","class","btn-secondary",4,"ngFor","ngForOf"],["ngbButtonLabel","",1,"btn-secondary"],["ngbButton","","type","radio",1,"btn-check",3,"value"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"button",2),m.NdJ("click",function(e){return t.closeModal(e)}),m._UZ(3,"i",3),m.TgZ(4,"span"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.TgZ(7,"button",2),m.NdJ("click",function(e){return t.minimize(e)}),m._UZ(8,"i",4),m.TgZ(9,"span"),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",5),m.TgZ(13,"div",6),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(e){return t.maximize(e)}),m.ALo(16,"translate"),m._UZ(17,"i",9),m.qZA(),m.TgZ(18,"button",10),m.NdJ("click",function(e){return t.closeModal(e)}),m.ALo(19,"translate"),m._UZ(20,"i",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"h4",12),m._uU(22),m.qZA(),m.qZA(),m.TgZ(23,"form",13),m.TgZ(24,"div",14),m.TgZ(25,"div",15),m.TgZ(26,"div",16),m.TgZ(27,"label",17),m._uU(28),m.ALo(29,"translate"),m.qZA(),m.qZA(),m.TgZ(30,"div",18),m.TgZ(31,"app-select-parent-dropdown",19),m.NdJ("ngModelChange",function(e){return t.model.parentId=e})("ngModelChange",function(){return t.onChangeContentType()}),m.qZA(),m.YNc(32,F,2,1,"div",20),m.qZA(),m.qZA(),m.TgZ(33,"div",21),m.TgZ(34,"div",22),m.TgZ(35,"div",23),m.TgZ(36,"div",24),m.TgZ(37,"input",25),m.NdJ("ngModelChange",function(e){return t.model.isActive=e}),m.qZA(),m._UZ(38,"span",26),m.TgZ(39,"label",27),m._uU(40),m.ALo(41,"translate"),m.qZA(),m.qZA(),m.TgZ(42,"div",28),m.TgZ(43,"input",29),m.NdJ("ngModelChange",function(e){return t.model.clearCache=e}),m.qZA(),m.TgZ(44,"label",27),m._uU(45),m.ALo(46,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(47,"div",30),m.YNc(48,U,2,9,"ng-container",31),m.qZA(),m.TgZ(49,"div",32),m._uU(50),m.TgZ(51,"button",33),m.NdJ("click",function(){return t.errorMessage=""}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(52,"div",34),m.YNc(53,R,6,8,"div",35),m.TgZ(54,"div",36),m.TgZ(55,"button",37),m.NdJ("click",function(){return t.save(!0)}),m.TgZ(56,"span"),m._uU(57),m.ALo(58,"translate"),m.qZA(),m.qZA(),m.TgZ(59,"div",38),m._UZ(60,"button",39),m.TgZ(61,"div",40),m.TgZ(62,"button",41),m.NdJ("click",function(){return t.save()}),m._uU(63),m.ALo(64,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(65,"button",42),m.NdJ("click",function(e){return t.closeModal(e)}),m.TgZ(66,"span"),m._uU(67),m.ALo(68,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(6,30,"CLOSE")),m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(11,32,"MINIMIZE")),m.xp6(5),m.Q6J("title",m.lcZ(16,34,"EXPAND")),m.xp6(3),m.Q6J("title",m.lcZ(19,36,"CLOSE")),m.xp6(4),m.Oqu(t.modalTitle),m.xp6(1),m.ekj("loading",t.loading),m.Q6J("formGroup",t.form),m.xp6(5),m.Oqu(m.lcZ(29,38,"PARENT_FOLDER")),m.xp6(3),m.Q6J("ngModel",t.model.parentId),m.xp6(1),m.Q6J("ngIf",t.formErrors.parentId),m.xp6(5),m.MGl("id","fieldIsActive",t.uniqueId,""),m.Q6J("ngModel",t.model.isActive),m.xp6(2),m.MGl("for","fieldIsActive",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(41,40,"ACTIVE")),m.xp6(3),m.MGl("id","fieldClearCache",t.uniqueId,""),m.Q6J("ngModel",t.model.clearCache),m.xp6(1),m.MGl("for","fieldClearCache",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(46,42,"CLEAR_FILE_CACHE")),m.xp6(3),m.Q6J("ngIf",t.dataLoaded),m.xp6(1),m.Q6J("hidden",!t.errorMessage),m.xp6(1),m.hij(" ",t.errorMessage," "),m.xp6(3),m.Q6J("ngIf",t.localeList.length>1),m.xp6(2),m.Q6J("disabled",t.submitted||t.isSaveButtonDisabled),m.xp6(2),m.Oqu(m.lcZ(58,44,"SAVE_AND_CLOSE")),m.xp6(3),m.Q6J("disabled",t.submitted||t.isSaveButtonDisabled),m.xp6(3),m.Oqu(m.lcZ(64,46,"SAVE")),m.xp6(4),m.Oqu(m.lcZ(68,48,"CLOSE")))},directives:[A._Y,A.JL,A.sg,w.F,A.JJ,A.u,d.O5,A.Wl,O.jt,O.iD,O.Vi,O.TH,M.u,O._L,O.py,A.On,d.sg,O.mL,O.aB],pipes:[g.X$],encapsulation:2}),e}(),P=l(35930),Q=l(79765),G=l(46782),j=l(49093),B=l(90660),V=l(2917),z=l(67752);function H(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.qZA()),2&e){var n=m.oxw(2);m.xp6(1),m.hij(" ",n.formErrors.parentId," ")}}function K(e,t){if(1&e&&(m.TgZ(0,"div",23),m.TgZ(1,"div",18),m.TgZ(2,"label",55),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.qZA(),m.TgZ(5,"div",20),m._UZ(6,"app-select-parent-dropdown",56),m.YNc(7,H,2,1,"div",22),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(3),m.Oqu(m.lcZ(4,5,"PARENT_FOLDER")),m.xp6(3),m.ekj("is-invalid",n.formErrors.parentId),m.Q6J("filterId",n.model.id),m.xp6(1),m.Q6J("ngIf",n.formErrors.parentId)}}function $(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.title," ")}}function X(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.name," ")}}function W(e,t){if(1&e&&(m.TgZ(0,"option",58),m._uU(1),m.qZA()),2&e){var n=t.$implicit;m.Q6J("value",n.name),m.xp6(1),m.Oqu(n.title)}}function ee(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.contentTypeName," ")}}function te(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.qZA()),2&e){var n=m.oxw(2);m.xp6(1),m.hij(" ",n.formErrors.menuIndex," ")}}function ne(e,t){if(1&e&&(m.TgZ(0,"div",23),m.TgZ(1,"div",18),m.TgZ(2,"label",59),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.qZA(),m.TgZ(5,"div",20),m._UZ(6,"input",60),m.YNc(7,te,2,1,"div",22),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(3),m.hij(" ",m.lcZ(4,4,"MENU_INDEX")," "),m.xp6(3),m.ekj("is-invalid",n.formErrors.menuIndex),m.xp6(1),m.Q6J("ngIf",n.formErrors.menuIndex)}}function ie(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",61),m._uU(1),m.TgZ(2,"button",62),m.NdJ("click",function(){return m.CHM(n),m.oxw().errorMessage=""}),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(1),m.hij(" ",i.errorMessage," ")}}function oe(e,t){if(1&e&&(m.TgZ(0,"label",68),m._UZ(1,"input",69),m._uU(2),m.qZA()),2&e){var n=t.$implicit;m.xp6(1),m.Q6J("value",n),m.xp6(1),m.hij(" ",n," ")}}var re=function(){return{standalone:!0}};function le(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",63),m.TgZ(1,"button",64),m.NdJ("click",function(e){return m.CHM(n),m.oxw().saveTranslations(e)}),m.ALo(2,"translate"),m._UZ(3,"i",65),m.qZA(),m.TgZ(4,"div",66),m.NdJ("ngModelChange",function(e){return m.CHM(n),m.oxw().localeCurrent=e})("ngModelChange",function(){return m.CHM(n),m.oxw().onLocaleSwitch()}),m.YNc(5,oe,3,2,"label",67),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(1),m.s9C("ngbTooltip",m.lcZ(2,5,"SAVE")),m.Q6J("hidden",i.localeCurrent==i.localeDefault),m.xp6(3),m.Q6J("ngModel",i.localeCurrent)("ngModelOptions",m.DdM(7,re)),m.xp6(1),m.Q6J("ngForOf",i.localeList)}}var ae=function(e){return{"no-events":e}},se=function(e,t){return{"is-invalid":e,"border-success":t}},de=function(e){return{"is-invalid":e}},ce=function(e){return{"border-success":e}},ue=["categoriesDropdown"];function pe(e,t){if(1&e){var n=m.EpF();m.ynx(0),m.TgZ(1,"button",9),m.NdJ("click",function(e){return m.CHM(n),m.oxw().expandAll(e)}),m.ALo(2,"translate"),m._UZ(3,"i",17),m.qZA(),m.TgZ(4,"button",18),m.NdJ("click",function(e){return m.CHM(n),m.oxw().collapseAll(e)}),m.ALo(5,"translate"),m._UZ(6,"i",19),m.qZA(),m.BQk()}2&e&&(m.xp6(1),m.s9C("ngbTooltip",m.lcZ(2,2,"EXPAND_ALL")),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(5,4,"COLLAPSE_ALL")))}function me(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",function(){return m.CHM(n),m.oxw().goToRootCategory()}),m.ALo(1,"translate"),m._UZ(2,"i",20),m.qZA()}2&e&&m.s9C("ngbTooltip",m.lcZ(1,1,"OPEN_ROOT_CATEGORY"))}var ge=function(){var e=function(e){i(o,e);var t=r(o);function o(e,n,i,r,l,a,d,c,u){var p;return s(this,o),(p=t.call(this,e,n,i,r,l,a)).fb=e,p.activeModal=n,p.translateService=i,p.systemNameService=r,p.dataService=l,p.elRef=a,p.filesService=d,p.contentTypesService=c,p.appSettings=u,p.isRoot=!1,p.model=new b(null,!1,0,"","","","",!0),p.contentTypes=[],p.loadingCategories=!1,p.categories=[],p.isCollapsed=!1,p.localeFieldsAllowed=["title","description"],p.files={},p.formFields=[{name:"title",validators:[A.kI.required]},{name:"name",validators:[A.kI.required]},{name:"description",validators:[]},{name:"parentId",validators:[]},{name:"image",validators:[]},{name:"contentTypeName",validators:[]},{name:"menuIndex",validators:[]},{name:"isActive",validators:[]},{name:"clearCache",validators:[]}],p}return c(o,[{key:"ngOnInit",value:function(){this.uniqueId=this.createUniqueId(),this.localeList=this.appSettings.settings.localeList,this.localeList.length>0&&(this.localeDefault=this.localeList[0],this.localeCurrent=this.localeList[0]),void 0!==this.itemId&&(this.model.id=this.itemId),this.model.parentId=this.isEditMode?this.currentCategory.parentId:this.currentCategory.id,this.model.contentTypeName=this.currentCategory.contentTypeName,this.isRoot&&(this.model.id=0,this.model.title=this.getLangString("ROOT_FOLDER"),this.model.name="root"),this.getContentTypes(),n(a(o.prototype),"ngOnInit",this).call(this)}},{key:"ngAfterViewInit",value:function(){this.elRef.nativeElement.querySelector("#fieldTitle")&&this.elRef.nativeElement.querySelector("#fieldTitle").focus()}},{key:"onAfterGetData",value:function(){this.model.clearCache=!0,this.model.translations&&!Array.isArray(this.model.translations)||(this.model.translations={}),n(a(o.prototype),"onAfterGetData",this).call(this)}},{key:"getContentTypes",value:function(){var e=this;this.contentTypesService.getListPage().subscribe(function(t){e.contentTypes=t.items},function(t){return e.errorMessage=t})}},{key:"onCategorySelect",value:function(e){this.form.controls.parentId.setValue(e.node.id),this.model.parentId=e.node.id}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var n=new FormData;for(var i in this.files)this.files.hasOwnProperty(i)&&this.files[i]instanceof File&&n.append(i,this.files[i],this.files[i].name);n.append("itemId",String(e)),n.append("ownerType","category"),this.filesService.postFormData(n).subscribe(function(){t.closeModal()},function(e){t.errorMessage=e.error||"Error.",t.submitted=!1,t.loading=!1})}else this.closeModal()}},{key:"generateName",value:function(e,t){t&&t.preventDefault();var n=this.getControl(this.form,null,"title").value||"";e.name=this.systemNameService.generateName(n),this.getControl(this.form,null,"name").setValue(e.name)}}]),o}(j.B);return e.\u0275fac=function(t){return new(t||e)(m.Y36(A.qu),m.Y36(O.Kz),m.Y36(g.sK),m.Y36(C.U),m.Y36(x.G),m.Y36(m.SBq),m.Y36(L),m.Y36(k.s),m.Y36(N.d))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-category-modal-content"]],inputs:{currentCategory:"currentCategory",isRoot:"isRoot"},features:[m.qOj],decls:102,vars:84,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5"],["method","post",3,"formGroup","ngClass","ngSubmit"],["formEl",""],[1,"modal-body","py-0"],["class","row mb-2 form-group-message",4,"ngIf"],[1,"row","mb-2","show-on-hover-parent","form-group-message"],[1,"col-md-5"],["for","fieldTitle"],[1,"col-md-7"],["type","text","id","fieldTitle","formControlName","title",1,"form-control",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],[1,"row","mb-2","form-group-message"],["for","fieldName"],[1,"input-group",3,"ngClass"],["type","text","id","fieldName","formControlName","name",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-secondary",3,"ngbTooltip","disabled","click"],[1,"icon-reload"],[1,"row","mb-2","show-on-hover-parent"],["for","fieldDescription"],["type","text","id","fieldDescription","rows","4","name","description","formControlName","description",1,"form-control",3,"ngClass"],[1,"row","mb-2"],["formControlName","image",3,"hasPreviewImage","allowedExtensions","files","filesChange"],["for","fieldContentType"],["id","fieldContentType","name","contentTypeName","formControlName","contentTypeName",1,"form-select"],["value","1",3,"value",4,"ngFor","ngForOf"],[1,"col-md-7","ms-md-auto"],[1,"card","card-body","p-2","ps-3"],[1,"form-check","mb-2"],["type","checkbox","id","fieldIsActive","value","1","name","isActive","formControlName","isActive",1,"form-check-input"],["for","fieldIsActive",1,"form-check-label"],[1,"form-check","m-0"],["type","checkbox","id","fieldClearCache","value","1","name","clearCache","formControlName","clearCache",1,"form-check-input"],["for","fieldClearCache",1,"form-check-label"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block"],["class","float-end",4,"ngIf"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["type","button","ngbDropdownItem","",3,"disabled","click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],["for","fieldParent"],["formControlName","parentId",3,"filterId"],[1,"alert","alert-danger"],["value","1",3,"value"],["for","fieldMenuIndex"],["type","number","id","fieldMenuIndex","name","menuIndex","formControlName","menuIndex",1,"form-control"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button",1,"btn-close",3,"click"],[1,"float-end"],["type","button","placement","left",1,"btn","btn-success","me-2",3,"ngbTooltip","hidden","click"],[1,"icon-check"],["ngbRadioGroup","","name","radioBasic",1,"btn-group","btn-group-toggle",3,"ngModel","ngModelOptions","ngModelChange"],["ngbButtonLabel","","class","btn-secondary",4,"ngFor","ngForOf"],["ngbButtonLabel","",1,"btn-secondary"],["ngbButton","","type","radio",1,"btn-check",3,"value"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"button",2),m.NdJ("click",function(e){return t.closeModal(e)}),m._UZ(3,"i",3),m.TgZ(4,"span"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.TgZ(7,"button",2),m.NdJ("click",function(e){return t.minimize(e)}),m._UZ(8,"i",4),m.TgZ(9,"span"),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",5),m.TgZ(13,"div",6),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(e){return t.maximize(e)}),m.ALo(16,"translate"),m._UZ(17,"i",9),m.qZA(),m.TgZ(18,"button",10),m.NdJ("click",function(e){return t.closeModal(e)}),m.ALo(19,"translate"),m._UZ(20,"i",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"h4",12),m._uU(22),m.qZA(),m.qZA(),m.TgZ(23,"form",13,14),m.NdJ("ngSubmit",function(){return t.onSubmit()}),m.TgZ(25,"div",15),m.YNc(26,K,8,7,"div",16),m.TgZ(27,"div",17),m.TgZ(28,"div",18),m.TgZ(29,"label",19),m._uU(30),m.ALo(31,"translate"),m.qZA(),m.qZA(),m.TgZ(32,"div",20),m._UZ(33,"input",21),m.YNc(34,$,2,1,"div",22),m.qZA(),m.qZA(),m.TgZ(35,"div",23),m.TgZ(36,"div",18),m.TgZ(37,"label",24),m._uU(38),m.ALo(39,"translate"),m.qZA(),m.qZA(),m.TgZ(40,"div",20),m.TgZ(41,"div",25),m._UZ(42,"input",26),m.TgZ(43,"button",27),m.NdJ("click",function(){return t.generateName(t.model)}),m.ALo(44,"translate"),m._UZ(45,"i",28),m.qZA(),m.qZA(),m.YNc(46,X,2,1,"div",22),m.qZA(),m.qZA(),m.TgZ(47,"div",29),m.TgZ(48,"div",18),m.TgZ(49,"label",30),m._uU(50),m.ALo(51,"translate"),m.qZA(),m.qZA(),m.TgZ(52,"div",20),m._UZ(53,"textarea",31),m.qZA(),m.qZA(),m.TgZ(54,"div",32),m.TgZ(55,"div",18),m.TgZ(56,"label"),m._uU(57),m.ALo(58,"translate"),m.qZA(),m.qZA(),m.TgZ(59,"div",20),m.TgZ(60,"app-file-widget",33),m.NdJ("filesChange",function(e){return t.files=e}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(61,"div",23),m.TgZ(62,"div",18),m.TgZ(63,"label",34),m._uU(64),m.ALo(65,"translate"),m.qZA(),m.qZA(),m.TgZ(66,"div",20),m.TgZ(67,"select",35),m.YNc(68,W,2,2,"option",36),m.qZA(),m.YNc(69,ee,2,1,"div",22),m.qZA(),m.qZA(),m.YNc(70,ne,8,6,"div",16),m.TgZ(71,"div",32),m.TgZ(72,"div",37),m.TgZ(73,"div",38),m.TgZ(74,"div",39),m._UZ(75,"input",40),m.TgZ(76,"label",41),m._uU(77),m.ALo(78,"translate"),m.qZA(),m.qZA(),m.TgZ(79,"div",42),m._UZ(80,"input",43),m.TgZ(81,"label",44),m._uU(82),m.ALo(83,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(84,ie,3,1,"div",45),m.qZA(),m.TgZ(85,"div",46),m.YNc(86,le,6,8,"div",47),m.TgZ(87,"div",48),m.TgZ(88,"button",49),m.NdJ("click",function(e){return t.save(!0,e)}),m.TgZ(89,"span"),m._uU(90),m.ALo(91,"translate"),m.qZA(),m.qZA(),m.TgZ(92,"div",50),m._UZ(93,"button",51),m.TgZ(94,"div",52),m.TgZ(95,"button",53),m.NdJ("click",function(e){return t.save(!1,e)}),m._uU(96),m.ALo(97,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(98,"button",54),m.NdJ("click",function(e){return t.closeModal(e)}),m.TgZ(99,"span"),m._uU(100),m.ALo(101,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(6,43,"CLOSE")),m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(11,45,"MINIMIZE")),m.xp6(5),m.Q6J("title",m.lcZ(16,47,"EXPAND")),m.xp6(3),m.Q6J("title",m.lcZ(19,49,"CLOSE")),m.xp6(4),m.Oqu(t.modalTitle),m.xp6(1),m.Q6J("formGroup",t.form)("ngClass",m.VKq(73,ae,t.submitted)),m.xp6(2),m.ekj("loading",t.loading),m.xp6(1),m.Q6J("ngIf",!t.isRoot),m.xp6(4),m.hij(" ",m.lcZ(31,51,"TITLE")," "),m.xp6(3),m.Q6J("ngClass",m.WLB(75,se,t.form.controls.title.touched&&!t.form.controls.title.valid,t.localeCurrent!=t.localeDefault)),m.xp6(1),m.Q6J("ngIf",t.formErrors.title),m.xp6(4),m.hij(" ",m.lcZ(39,53,"SYSTEM_NAME")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(78,de,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.Q6J("ngClass",m.VKq(80,de,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(44,55,"GENERATE")),m.Q6J("disabled",t.form.controls.name.disabled),m.xp6(3),m.Q6J("ngIf",t.formErrors.name),m.xp6(4),m.hij(" ",m.lcZ(51,57,"DESCRIPTION")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(82,ce,t.localeCurrent!=t.localeDefault)),m.xp6(4),m.hij(" ",m.lcZ(58,59,"IMAGE")," "),m.xp6(3),m.Q6J("hasPreviewImage",!0)("allowedExtensions","image/*")("files",t.files),m.xp6(4),m.hij(" ",m.lcZ(65,61,"CONTENT_TYPE")," "),m.xp6(3),m.ekj("is-invalid",t.formErrors.contentTypeName),m.xp6(1),m.Q6J("ngForOf",t.contentTypes),m.xp6(1),m.Q6J("ngIf",t.formErrors.contentTypeName),m.xp6(1),m.Q6J("ngIf",!t.isRoot),m.xp6(7),m.Oqu(m.lcZ(78,63,"ACTIVE")),m.xp6(5),m.Oqu(m.lcZ(83,65,"CLEAR_FILE_CACHE")),m.xp6(2),m.Q6J("ngIf",t.errorMessage),m.xp6(2),m.Q6J("ngIf",t.localeList.length>1),m.xp6(2),m.Q6J("disabled",t.submitted||t.isSaveButtonDisabled),m.xp6(2),m.Oqu(m.lcZ(91,67,"SAVE_AND_CLOSE")),m.xp6(3),m.Q6J("disabled",t.submitted||t.isSaveButtonDisabled),m.xp6(2),m.Q6J("disabled",t.submitted||t.isSaveButtonDisabled),m.xp6(1),m.hij(" ",m.lcZ(97,69,"SAVE")," "),m.xp6(4),m.Oqu(m.lcZ(101,71,"CLOSE")))},directives:[A._Y,A.JL,A.sg,d.mk,d.O5,A.Fj,A.JJ,A.u,O._L,V.E,A.EJ,d.sg,A.Wl,O.jt,O.iD,O.Vi,O.TH,w.F,A.YN,A.Kr,A.wV,O.py,A.On,O.mL,O.aB],pipes:[g.X$],encapsulation:2}),e}(),fe=function(){var e=function(){function e(t,n,i,o,r){s(this,e),this.router=t,this.route=n,this.modalService=i,this.categoriesService=o,this.translateService=r,this.rootTitle="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",this.changeRequest=new m.vpe,this.currentCategory=new b(null,!1,0,"root",this.rootTitle,"","",!0),this.currentCategoryNode={id:0},this.categoriesTree=[{id:0,parentId:0,label:"",expanded:!0,children:null}],this.categories=[],this.errorMessage="",this.categoryId=0,this.loading=!1,this.destroyed$=new Q.xQ}return c(e,[{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.getCategories().then(function(t){e.loading=!1,e.route.paramMap.pipe((0,G.R)(e.destroyed$)).subscribe(function(t){e.categoryId=t.get("categoryId")?parseInt(t.get("categoryId"),10):0,e.selectCurrent()})})}},{key:"selectCurrent",value:function(){if(this.currentCategory.id!==this.categoryId){var e=(0,Z.findIndex)(this.categories,{id:this.categoryId});e>-1?(this.currentCategory=(0,Z.cloneDeep)(this.categories[e]),this.changeRequest.emit(this.currentCategory)):this.openRootCategory(),this.currentCategoryNode=b.getCurrentNode(this.currentCategory.id,this.categoriesTree[0])}}},{key:"getCategories",value:function(){var e=this;return new Promise(function(t,n){e.categoriesService.getListPage(new P.J("menuIndex,title","asc",1)).subscribe(function(n){n.items&&n.items.length>0&&(e.categories=n.items,e.categoriesTree=[b.createTree(n.items)]),t(n.items)},function(t){e.errorMessage=t,n()})})}},{key:"openModalCategory",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.categoriesDropdown.nativeElement.previousSibling.classList.remove("dropdown-toggle-hover"),setTimeout(function(){t.categoriesDropdown.nativeElement.previousSibling.classList.add("dropdown-toggle-hover")},1);var i=this.getModalElementId(e);if(window.document.body.classList.add("modal-open"),window.document.getElementById(i)){var o=window.document.getElementById(i),r=o.previousElementSibling;return o.classList.add("d-block"),o.classList.remove("modal-minimized"),void r.classList.remove("d-none")}var l=0===e||null===e,a=void 0!==e&&!n;this.modalRef=this.modalService.open(ge,{size:"lg",backdrop:"static",keyboard:!1,backdropClass:"modal-backdrop-left45",windowClass:"modal-left45",container:"#modals-container"}),this.modalRef.componentInstance.modalTitle=a?this.getLangString("CATEGORY")+(e?" #".concat(e):""):this.getLangString("ADD_NEW_CATEGORY"),this.modalRef.componentInstance.modalId=i,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=n||!1,this.modalRef.componentInstance.currentCategory=this.currentCategory,this.modalRef.componentInstance.isRoot=l,this.modalRef.componentInstance.isEditMode=a,this.modalRef.result.then(function(e){t.destroyed$.isStopped||(t.currentCategory.id=null,t.loading=!0,t.getCategories().then(function(){t.selectCurrent(),t.loading=!1}))},function(e){t.destroyed$.isStopped||(e&&["submit","updated"].indexOf(e)>-1&&(t.currentCategory.id=null,t.loading=!0,t.getCategories().then(function(){t.selectCurrent(),t.loading=!1})),t.loading=!1)})}},{key:"getModalElementId",value:function(e){return["modal","category",e||0].join("-")}},{key:"deleteCategoryItemConfirm",value:function(e){var t=this,n=(0,Z.findIndex)(this.categories,{id:e});-1!==n&&(this.modalRef=this.modalService.open(B.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE_CATEGORY")+' "'.concat(this.categories[n].title,'"?'),this.modalRef.result.then(function(n){"accept"===n&&t.deleteCategoryItem(e)},function(e){}))}},{key:"deleteCategoryItem",value:function(e){var t=this;this.loading=!0,this.categoriesService.deleteItem(e).subscribe(function(e){t.categoryId=0,t.getCategories().then(function(){t.goToRootCategory(),t.loading=!1})},function(e){e.error&&(t.errorMessage=e.error),t.loading=!1})}},{key:"openCategory",value:function(e){this.router.navigate(["/catalog/category",e.node.id])}},{key:"goToRootCategory",value:function(){this.router.navigate(["/catalog/category",""])}},{key:"openRootCategory",value:function(){this.currentCategory=new b(null,!1,0,"root",this.rootTitle,"","",!0),this.currentCategoryNode=this.categoriesTree[0],this.changeRequest.emit(this.currentCategory)}},{key:"copyCategory",value:function(){this.openModalCategory(this.currentCategory.id,!0)}},{key:"expandAll",value:function(e){var t=this;e&&e.preventDefault(),this.categoriesTree.forEach(function(e){t.expandRecursive(e,!0)})}},{key:"collapseAll",value:function(e){var t=this;e&&e.preventDefault(),this.categoriesTree.forEach(function(e){t.expandRecursive(e,!1)})}},{key:"expandRecursive",value:function(e,t){var n=this;e.expanded=t,e.children&&e.children.forEach(function(e){n.expandRecursive(e,t)})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Y36(p.F0),m.Y36(p.gz),m.Y36(O.FF),m.Y36(x.G),m.Y36(g.sK))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-categories-menu"]],viewQuery:function(e,t){var n;(1&e&&m.Gf(ue,7),2&e)&&(m.iGM(n=m.CRH())&&(t.categoriesDropdown=n.first))},inputs:{rootTitle:"rootTitle"},outputs:{changeRequest:"changeRequest"},decls:26,vars:26,consts:[[1,"d-block","d-md-inline-block","dropdown"],[1,"btn","btn-secondary","dropdown-toggle","dropdown-toggle-hover","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],[1,"icon-folder","me-1"],[1,"dropdown-menu","main-menu-container","py-3","shadow"],["categoriesDropdown",""],[1,"px-3","pb-3"],[1,"float-end"],[4,"ngIf"],["type","button","class","btn btn-sm btn-secondary me-2",3,"ngbTooltip","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary","me-2",3,"ngbTooltip","click"],[1,"icon-plus"],[1,"icon-pencil"],["type","button",1,"btn","btn-sm","btn-secondary","me-2",3,"ngbTooltip","hidden","click"],[1,"icon-stack"],[1,"icon-cross"],[1,"px-3","max-height400"],[3,"value","emptyMessage","selectionMode","selection","filter","onNodeSelect"],[1,"pi","pi-angle-double-down"],["type","button",1,"btn","btn-sm","btn-secondary",3,"ngbTooltip","click"],[1,"pi","pi-angle-double-up"],[1,"icon-home"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"button",1),m._UZ(2,"i",2),m._uU(3),m.qZA(),m.TgZ(4,"div",3,4),m.TgZ(6,"div"),m.TgZ(7,"div",5),m.TgZ(8,"div",6),m.YNc(9,pe,7,6,"ng-container",7),m.qZA(),m.YNc(10,me,3,3,"button",8),m.TgZ(11,"button",9),m.NdJ("click",function(){return t.openModalCategory()}),m.ALo(12,"translate"),m._UZ(13,"i",10),m.qZA(),m.TgZ(14,"button",9),m.NdJ("click",function(){return t.openModalCategory(t.currentCategory.id)}),m.ALo(15,"translate"),m._UZ(16,"i",11),m.qZA(),m.TgZ(17,"button",12),m.NdJ("click",function(){return t.copyCategory()}),m.ALo(18,"translate"),m._UZ(19,"i",13),m.qZA(),m.TgZ(20,"button",12),m.NdJ("click",function(){return t.deleteCategoryItemConfirm(t.currentCategory.id)}),m.ALo(21,"translate"),m._UZ(22,"i",14),m.qZA(),m.qZA(),m.TgZ(23,"div",15),m.TgZ(24,"p-tree",16),m.NdJ("onNodeSelect",function(e){return t.openCategory(e)}),m.ALo(25,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(3),m.hij(" ",t.currentCategory.title," "),m.xp6(3),m.ekj("loading",t.loading),m.xp6(3),m.Q6J("ngIf",t.categoriesTree[0].children),m.xp6(1),m.Q6J("ngIf",t.currentCategory.id>0),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(12,16,"ADD_NEW_CATEGORY")),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(15,18,"EDIT_CATEGORY")),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(18,20,"COPY_CATEGORY")),m.Q6J("hidden",!t.currentCategory.id),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(21,22,"DELETE_CATEGORY")),m.Q6J("hidden",!t.currentCategory.id),m.xp6(4),m.Q6J("value",t.categoriesTree[0].children)("emptyMessage",m.lcZ(25,24,"NO_CATEGORIES"))("selectionMode","single")("selection",t.currentCategoryNode)("filter",!!t.categoriesTree[0].children))},directives:[d.O5,O._L,z.mp],pipes:[g.X$],encapsulation:2}),e}(),he=l(53332),ve=function(e){return{"form-control-search-clear":e}},Ze=function(){var e=function(e){i(n,e);var t=r(n);function n(e,i,o,r,l){var a;return s(this,n),(a=t.call(this,e,i,o,r)).dataService=e,a.activeModal=i,a.modalService=o,a.translateService=r,a.contentTypesService=l,a.queryOptions=new P.J("id","desc",1,10,0,0),a.tableFields=[],a}return c(n,[{key:"ngOnInit",value:function(){}},{key:"updateTableConfig",value:function(){var e=this;this.currentContentType&&(this.tableFields=[],this.currentContentType.fields.forEach(function(t){t.showInTable&&e.tableFields.push({name:t.name,sortName:t.name,title:t.title,outputType:t.outputType,outputProperties:t.outputProperties})}),this.tableFields.unshift({name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}}),this.tableFields.push({name:"isActive",sortName:"isActive",title:"STATUS",outputType:"boolean",outputProperties:{}}))}},{key:"getModalContent",value:function(){return Y}},{key:"getContentType",value:function(){return this.contentTypesService.getItemByName(this.currentCategory.contentTypeName)}},{key:"openCategory",value:function(e){var t=this;if(this.currentCategory=(0,Z.clone)(e),!this.currentCategory.contentTypeName)return this.items=[],this.tableFields=[],void(this.currentCategory.id=0);this.dataService.setRequestUrl("/admin/products/"+this.currentCategory.id),this.loading=!0,this.queryOptions.page=1,this.getContentType().subscribe(function(e){t.currentContentType=e,t.loading=!1,t.updateTableConfig(),t.getList()},function(){t.items=[],t.tableFields=[],t.currentCategory.id=0})}},{key:"openRootCategory",value:function(){this.currentCategory=new b(0,!1,0,"root","","","",!0),this.dataService.setRequestUrl("/admin/products/"+this.currentCategory.id),this.getList()}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=void 0!==e&&!t;this.modalRef.componentInstance.modalTitle=i?"".concat(this.getLangString("PAGE")," #").concat(e):this.getLangString("ADD"),this.modalRef.componentInstance.modalId=n,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=t||!1,this.modalRef.componentInstance.isEditMode=i;var o=this.items.findIndex(function(t){return t.id===e});this.modalRef.componentInstance.categoryId=o>-1?this.items[o].parentId:this.currentCategory.id}},{key:"getModalElementId",value:function(e){return["modal","product",e||0].join("-")}}]),n}(T.U);return e.title="CATEGORY",e.\u0275fac=function(t){return new(t||e)(m.Y36(E),m.Y36(O.Kz),m.Y36(O.FF),m.Y36(g.sK),m.Y36(k.s))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-catalog-category"]],features:[m._Bn([E]),m.qOj],decls:30,vars:25,consts:[[1,"mb-3"],[1,"float-md-start"],[3,"changeRequest"],[1,"form-control-search","d-block","d-md-inline-block","ms-0","ms-md-3","mb-2","mb-lg-0",3,"ngClass"],["type","text",1,"form-control","min-width250",3,"placeholder","ngModel","ngModelChange"],[3,"click"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block","mb-2","mb-md-0"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2",3,"click"],[1,"icon-plus"],[1,"clearfix"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","loading","selectedIdsChange","loadingChange","actionRequest"],["table",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div"),m.TgZ(2,"div",1),m.TgZ(3,"app-categories-menu",2),m.NdJ("changeRequest",function(e){return t.openCategory(e)}),m.qZA(),m.TgZ(4,"div",3),m.TgZ(5,"input",4),m.NdJ("ngModelChange",function(e){return t.queryOptions.search_word=e})("ngModelChange",function(){return t.onSearchWordUpdate()}),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"span",5),m.NdJ("click",function(){return t.onSearchWordUpdate("")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(8,"div",6),m.TgZ(9,"div",7),m.TgZ(10,"button",8),m.TgZ(11,"span"),m._uU(12),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.TgZ(14,"div",9),m.TgZ(15,"button",10),m.NdJ("click",function(){return t.blockSelected()}),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.TgZ(18,"button",10),m.NdJ("click",function(){return t.deleteSelected()}),m._uU(19),m.ALo(20,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"button",11),m.NdJ("click",function(){return t.modalOpen()}),m._UZ(22,"i",12),m._uU(23," \xa0 "),m.TgZ(24,"span"),m._uU(25),m.ALo(26,"translate"),m.qZA(),m.qZA(),m.qZA(),m._UZ(27,"div",13),m.qZA(),m.qZA(),m.TgZ(28,"app-table",14,15),m.NdJ("selectedIdsChange",function(e){return t.selectedIds=e})("loadingChange",function(e){return t.loading=e})("actionRequest",function(e){return t.actionRequest(e)}),m.qZA()),2&e&&(m.xp6(4),m.Q6J("ngClass",m.VKq(23,ve,!!t.queryOptions.search_word)),m.xp6(1),m.MGl("placeholder","",m.lcZ(6,13,"SEARCH"),"..."),m.Q6J("ngModel",t.queryOptions.search_word),m.xp6(7),m.Oqu(m.lcZ(13,15,"BATCH_ACTIONS")),m.xp6(4),m.Oqu(m.lcZ(17,17,"DISABLE_ENABLE")),m.xp6(3),m.Oqu(m.lcZ(20,19,"DELETE")),m.xp6(6),m.Oqu(m.lcZ(26,21,"ADD")),m.xp6(3),m.Q6J("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("loading",t.loading))},directives:[fe,d.mk,A.Fj,A.JJ,A.On,O.jt,O.iD,O.Vi,he.a],pipes:[g.X$],encapsulation:2}),e}(),be=l(25917),Te=l(5304),Ae=function(){var e=function(){function e(t){s(this,e),this.http=t,this.headers=new I.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="/admin/collections"}return c(e,[{key:"setRequestUrl",value:function(e){this.requestUrl=e}},{key:"getRequestUrl",value:function(){return this.requestUrl}},{key:"getList",value:function(){return this.http.get(this.getRequestUrl()).pipe((0,Te.K)(this.handleError()))}},{key:"deleteItemByName",value:function(e){var t="".concat(this.getRequestUrl(),"/").concat(e);return this.http.delete(t,{headers:this.headers}).pipe((0,Te.K)(this.handleError()))}},{key:"handleError",value:function(){var e=arguments.length>1?arguments[1]:void 0;return function(t){if(t.error)throw t.error;return(0,be.of)(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.LFG(I.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e}(),ye=function(){var e=function(e){i(n,e);var t=r(n);function n(e){var i;return s(this,n),(i=t.call(this,e)).setRequestUrl("/admin/field_types"),i}return n}(_.D);return e.\u0275fac=function(t){return new(t||e)(m.LFG(I.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e}(),qe=l(6463),Ce=l(79514),xe=l(72765),ke=["addCollectionBlock"],_e=["addGroupBlock"],Ie=["accordion"],Ee=["blockFieldList"];function Le(e,t){if(1&e&&(m.TgZ(0,"div",113),m._uU(1),m.qZA()),2&e){var n=m.oxw().message;m.xp6(1),m.Oqu(n)}}function Se(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"p",110),m._uU(1),m.ALo(2,"translate"),m.qZA(),m.YNc(3,Le,2,1,"div",111),m.TgZ(4,"div",110),m.TgZ(5,"button",112),m.NdJ("click",function(){return(0,m.CHM(n).confirm)()}),m._uU(6),m.ALo(7,"translate"),m.qZA(),m._uU(8," \xa0 "),m.TgZ(9,"button",48),m.NdJ("click",function(){return m.CHM(n).p.close()}),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA()}if(2&e){var i=t.message;m.xp6(1),m.Oqu(m.lcZ(2,4,"YOU_SURE_YOU_WANT_DELETE")),m.xp6(2),m.Q6J("ngIf",i),m.xp6(3),m.Oqu(m.lcZ(7,6,"YES")),m.xp6(4),m.Oqu(m.lcZ(11,8,"NO"))}}function Ne(e,t){if(1&e&&(m.TgZ(0,"option",114),m._uU(1),m.qZA()),2&e){var n=t.$implicit;m.s9C("value",n),m.xp6(1),m.Oqu(n)}}function Oe(e,t){if(1&e&&(m.TgZ(0,"div",115),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.newCollection," ")}}function we(e,t){if(1&e&&(m.TgZ(0,"option",114),m._uU(1),m.qZA()),2&e){var n=t.$implicit;m.s9C("value",n.name),m.xp6(1),m.Oqu(n.title)}}var Me=function(){return{standalone:!0}};function Fe(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",116),m.TgZ(1,"div",58),m.TgZ(2,"label",59),m._uU(3),m.qZA(),m.qZA(),m.TgZ(4,"div",60),m.TgZ(5,"input",117),m.NdJ("ngModelChange",function(e){var t=m.CHM(n).$implicit;return m.oxw().fieldModel.inputProperties[t.name]=e}),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit,o=m.oxw();m.xp6(2),m.hYB("for","parameterInputField",i.name,"",o.uniqueId,""),m.xp6(1),m.Oqu(i.title),m.xp6(2),m.hYB("id","parameterInputField",i.name,"",o.uniqueId,""),m.Q6J("ngModel",o.fieldModel.inputProperties[i.name])("ngModelOptions",m.DdM(7,Me))}}function Ue(e,t){if(1&e&&(m.TgZ(0,"option",114),m._uU(1),m.qZA()),2&e){var n=t.$implicit;m.s9C("value",n.name),m.xp6(1),m.Oqu(n.title)}}function De(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",116),m.TgZ(1,"div",58),m.TgZ(2,"label",59),m._uU(3),m.qZA(),m.qZA(),m.TgZ(4,"div",60),m.TgZ(5,"input",117),m.NdJ("ngModelChange",function(e){var t=m.CHM(n).$implicit;return m.oxw().fieldModel.outputProperties[t.name]=e}),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit,o=m.oxw();m.xp6(2),m.hYB("for","parameterOutputField",i.name,"",o.uniqueId,""),m.xp6(1),m.Oqu(i.title),m.xp6(2),m.hYB("id","parameterOutputField",i.name,"",o.uniqueId,""),m.Q6J("ngModel",o.fieldModel.outputProperties[i.name])("ngModelOptions",m.DdM(7,Me))}}function Je(e,t){if(1&e&&(m.TgZ(0,"option",114),m._uU(1),m.qZA()),2&e){var n=t.$implicit;m.Q6J("value",n),m.xp6(1),m.Oqu(n)}}function Re(e,t){if(1&e&&(m.TgZ(0,"div",22),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.secondFormErrors.group," ")}}function Ye(e,t){if(1&e&&(m.TgZ(0,"div",115),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.secondFormErrors.newGroup," ")}}function Pe(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"tr",136),m.TgZ(1,"td"),m._uU(2),m.TgZ(3,"span",137),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td",131),m._uU(8),m.qZA(),m.TgZ(9,"td",131),m._UZ(10,"app-output-field",138),m.qZA(),m.TgZ(11,"td"),m.TgZ(12,"div",139),m.TgZ(13,"div",140),m.TgZ(14,"button",141),m.NdJ("click",function(e){var t=m.CHM(n).$implicit;return m.oxw(2).editField(t,e)}),m.ALo(15,"translate"),m._UZ(16,"i",142),m.qZA(),m.TgZ(17,"button",143),m.NdJ("click",function(e){var t=m.CHM(n).$implicit;return m.oxw(2).copyField(t,e)}),m.ALo(18,"translate"),m._UZ(19,"i",144),m.qZA(),m.TgZ(20,"button",141),m.NdJ("click",function(e){var t=m.CHM(n).$implicit;return m.oxw(2).deleteField(t,e)}),m.ALo(21,"translate"),m._UZ(22,"i",11),m.qZA(),m.qZA(),m.qZA(),m._UZ(23,"app-output-field",138),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit,o=m.oxw(2);m.xp6(2),m.hij(" ",i.title," "),m.xp6(2),m.hij("(",i.name,")"),m.xp6(2),m.hij(" ",i.inputType," "),m.xp6(2),m.hij(" ",i.group," "),m.xp6(2),m.Q6J("value",i.required),m.xp6(4),m.s9C("ngbTooltip",m.lcZ(15,11,"EDIT")),m.Q6J("hidden",i.name==o.currentFieldName),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(18,13,"COPY")),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(21,15,"DELETE")),m.Q6J("hidden",i.name==o.currentFieldName),m.xp6(3),m.Q6J("value",i.showInTable)}}function Qe(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",null,118),m.TgZ(2,"div"),m.TgZ(3,"div",119),m.TgZ(4,"select",120,121),m.TgZ(6,"option",66),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.TgZ(9,"option",122),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.TgZ(12,"option",123),m._uU(13),m.ALo(14,"translate"),m.qZA(),m.TgZ(15,"option",124),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.qZA(),m.TgZ(18,"button",125),m.NdJ("click",function(e){m.CHM(n);var t=m.MAs(5);return m.oxw().sortingStart(t.value,e)}),m._UZ(19,"i",126),m._uU(20),m.ALo(21,"translate"),m.qZA(),m.qZA(),m.TgZ(22,"button",127),m.NdJ("click",function(e){return m.CHM(n),m.oxw().fieldsExport(e)}),m._UZ(23,"i",128),m._uU(24),m.ALo(25,"translate"),m.qZA(),m._UZ(26,"div",129),m.TgZ(27,"div"),m.TgZ(28,"table",130),m.TgZ(29,"thead"),m.TgZ(30,"tr"),m.TgZ(31,"th"),m._uU(32),m.ALo(33,"translate"),m.qZA(),m.TgZ(34,"th"),m._uU(35),m.ALo(36,"translate"),m.qZA(),m.TgZ(37,"th",131),m._uU(38),m.ALo(39,"translate"),m.qZA(),m.TgZ(40,"th",131),m._uU(41),m.ALo(42,"translate"),m.qZA(),m.TgZ(43,"th"),m._uU(44),m.ALo(45,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"tbody"),m.YNc(47,Pe,24,17,"tr",132),m.TgZ(48,"tr",133),m.TgZ(49,"td",134),m._uU(50),m.ALo(51,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(52,"app-sorting-dnd",135),m.NdJ("itemsChange",function(e){return m.CHM(n),m.oxw().sortData=e})("save",function(e){return m.CHM(n),m.oxw().sortingApply(e)})("cancel",function(){return m.CHM(n),m.oxw().sortingReset()}),m.qZA()}if(2&e){var i=m.oxw();m.xp6(3),m.Q6J("hidden",i.model.fields.length<2),m.xp6(4),m.Oqu(m.lcZ(8,16,"SORT_FIELDS")),m.xp6(3),m.Oqu(m.lcZ(11,18,"SORT_FIELDS_LIST")),m.xp6(3),m.Oqu(m.lcZ(14,20,"SORT_FIELDS_PAGE")),m.xp6(3),m.Oqu(m.lcZ(17,22,"SORT_FILTERS")),m.xp6(4),m.hij(" ",m.lcZ(21,24,"SORT")," "),m.xp6(4),m.hij(" ",m.lcZ(25,26,"EXPORT")," "),m.xp6(8),m.Oqu(m.lcZ(33,28,"TITLE")),m.xp6(3),m.Oqu(m.lcZ(36,30,"INPUT_TYPE")),m.xp6(3),m.Oqu(m.lcZ(39,32,"GROUP")),m.xp6(3),m.hij("",m.lcZ(42,34,"REQUIRED"),"?"),m.xp6(3),m.hij("",m.lcZ(45,36,"SHOW_IN_TABLE"),"?"),m.xp6(3),m.Q6J("ngForOf",i.model.fields),m.xp6(1),m.Q6J("hidden",i.model.fields.length>0),m.xp6(2),m.hij(" ",m.lcZ(51,38,"EMPTY")," "),m.xp6(2),m.Q6J("items",i.sortData)}}function Ge(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",145),m._uU(1),m.TgZ(2,"button",91),m.NdJ("click",function(){return m.CHM(n),m.oxw().errorMessage=""}),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(1),m.hij(" ",i.errorMessage," ")}}var je=function(e){return{"no-events":e}},Be=function(e){return{"is-invalid":e}},Ve=function(){return["/catalog"]},ze=function(){var t=function(t){i(o,t);var n=r(o);function o(e,t,i,r,l,a,d,c,u){var p;return s(this,o),(p=n.call(this,e,t,i,r,l,a)).fb=e,p.activeModal=t,p.translateService=i,p.systemNameService=r,p.dataService=l,p.elRef=a,p.fieldTypesService=d,p.collectionsService=c,p.modalService=u,p._secondFormFieldsErrors={},p.model=new y(0,"","","","products",[],["General","Service"],!0,!1),p.fieldModel=new S._(0,"","","","",{},"",{},""),p.sortData=[],p.sortingFieldName="",p.fld_submitted=!1,p.action="add_field",p.currentFieldName="",p.collections=["products"],p.fieldTypeProperties={input:[],output:[]},p.formFields=[{name:"title",validators:[A.kI.required]},{name:"name",validators:[A.kI.required,A.kI.pattern("[A-Za-z0-9_-]+")]},{name:"description",validators:[]},{name:"collection",validators:[A.kI.required]},{name:"newCollection",validators:[A.kI.pattern("[A-Za-z0-9_-]+")]},{name:"isCreateByUsersAllowed",validators:[]},{name:"isActive",validators:[]}],p.secondFormFields=[{name:"title",validators:[A.kI.required]},{name:"name",validators:[A.kI.required,A.kI.pattern("[A-Za-z0-9_-]+")]},{name:"description",validators:[]},{name:"inputType",validators:[A.kI.required]},{name:"outputType",validators:[A.kI.required]},{name:"group",validators:[A.kI.required]},{name:"newGroup",validators:[]},{name:"required",validators:[]},{name:"showInTable",validators:[]},{name:"showOnPage",validators:[]},{name:"showInList",validators:[]},{name:"isFilter",validators:[]}],p}return c(o,[{key:"secondFormErrors",get:function(){return this._secondFormFieldsErrors},set:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=this.getControl(this.form,null,t);n&&n.setErrors({incorrect:!0})}this._secondFormFieldsErrors=e}},{key:"onAfterInit",value:function(){this.buildForm("secondForm",this.secondFormFields,this.secondFormErrors,"fieldModel"),this.onValueChanged("secondForm",this.secondFormErrors),this.getFieldTypes(),this.getCollectionsList()}},{key:"getFieldTypes",value:function(){var e=this,t=new P.J("title","asc",0,0,1);this.fieldTypesService.getListPage(t).subscribe(function(t){e.fieldTypes=t.items},function(t){return e.errorMessage=t})}},{key:"getCollectionsList",value:function(){var e=this;this.collectionsService.getList().subscribe(function(t){t.length>0&&(e.collections=t)})}},{key:"selectFieldTypeProperties",value:function(e,t){var n=this;t?this.secondForm.get("".concat(e,"Type")).setValue(t):t=this.secondForm.get("".concat(e,"Type")).value,this.fieldModel["".concat(e,"Type")]=t;var i=(0,Z.find)(this.fieldTypes,{name:t});if(i){var o="".concat(e,"Properties"),r=(0,Z.map)(i["".concat(e,"Properties")],"name");for(var l in this.fieldTypeProperties[e].splice(0),i[e+"Properties"].forEach(function(t,i){n.fieldTypeProperties[e].push(t)}),this.fieldModel[o])this.fieldModel[o].hasOwnProperty(l)&&-1===r.indexOf(l)&&delete this.fieldModel[o][l];for(var a in this.fieldTypeProperties[e])if(this.fieldTypeProperties[e].hasOwnProperty(a)){var s=this.fieldTypeProperties[e][a].name;void 0===this.fieldModel[o][s]&&(this.fieldModel[o][s]=this.fieldTypeProperties[e][a].default_value)}"input"!==e||this.fieldModel.outputType||this.selectFieldTypeProperties("output",t)}else this.fieldTypeProperties[e]=[]}},{key:"addCollectionToggle",value:function(e,t){this.displayToggle(this.elementAddCollectionBlock.nativeElement),e.value="",this.onValueChanged(),e.focus()}},{key:"addCollection",value:function(e){e&&e.preventDefault();var t="newCollection",n=this.form.get(t);if(!n.valid||!n.value)return!1;this.formErrors[t]="";var i=n.value;return this.collections.indexOf(i)>-1?(this.getControl(this.form,null,t).setErrors({exists:"COLLECTION_EXISTS"}),this.formErrors[t]=this.getLangString("COLLECTION_EXISTS"),!1):(this.collections.push(i),this.model.collection=i,this.getControl(this.form,null,t).setValue(i),this.elementAddCollectionBlock.nativeElement.style.display="none",!0)}},{key:"deleteCollection",value:function(e){var t,n=this;this.model.collection&&(e.isOpen()?e.close():(e.placement="top",e.popoverTitle=this.getLangString("CONFIRM"),t={p:e,confirm:(function(){n.loading=!0,n.collectionsService.deleteItemByName(n.model.collection).subscribe(function(t){var i=n.collections.indexOf(n.model.collection);i>-1&&(n.collections.splice(i,1),n.model.collection=n.collections[0]||""),e.close(),n.loading=!1},function(e){n.errorMessage=e.error||"Error.",n.loading=!1})}).bind(this),message:""},e.open(t)))}},{key:"addGroup",value:function(e){e&&e.preventDefault();var t=this.secondForm.get("newGroup");if(!t||!t.valid||!t.value)return!1;this.errorFieldMessage="",this.secondFormErrors.newGroup="";var n=t.value;return this.model.groups.indexOf(n)>-1?(this.getControl(this.secondForm,null,"newGroup").setErrors({exists:"GROUP_ALREADY_EXISTS"}),this.secondFormErrors.newGroup=this.getLangString("GROUP_ALREADY_EXISTS"),!1):(this.model.groups.push(n),this.fieldModel.group=n,this.getControl(this.secondForm,null,"group").setValue(this.fieldModel.group),this.elementAddGroupBlock.nativeElement.style.display="none",!0)}},{key:"deleteGroup",value:function(){var e=this.secondForm.get("group").value,t=(0,Z.findIndex)(this.model.fields,{group:e});this.errorFieldMessage="",t>-1?this.errorFieldMessage=this.getLangString("YOU_CANT_DELETE_NOTEMPTY_GROUP"):(t=this.model.groups.indexOf(e))>-1&&this.model.groups.splice(t,1)}},{key:"editField",value:function(e,t){t&&t.preventDefault(),this.toggleAccordion(this.accordion,"accordion-content-type-fields"),this.action="edit_field",this.fieldModel=(0,Z.cloneDeep)(e);var n={};this.secondFormFields.forEach(function(t){n[t.name]=e[t.name]||null}),this.secondForm.setValue(n),this.selectFieldTypeProperties("input"),this.selectFieldTypeProperties("output"),this.currentFieldName=this.fieldModel.name,this.fld_submitted=!1}},{key:"copyField",value:function(e,t){t&&t.preventDefault(),this.toggleAccordion(this.accordion,"accordion-content-type-fields"),this.action="add_field",this.fieldModel=(0,Z.cloneDeep)(e),this.fieldModel.name="",this.secondForm.setValue(this.fieldModel),this.currentFieldName="",this.fld_submitted=!1}},{key:"deleteField",value:function(e,t){t&&t.preventDefault();var n=(0,Z.findIndex)(this.model.fields,{name:e.name});-1!==n?this.model.fields.splice(n,1):this.errorMessage="Field not found."}},{key:"resetFieldForm",value:function(){this.action="add_field",this.errorMessage="",this.errorFieldMessage="",this.fld_submitted=!1,this.currentFieldName="",this.secondForm.reset(),this.fieldModel=new S._(0,"","","","",{},"",{},"")}},{key:"editFieldCancel",value:function(e){e&&e.preventDefault(),this.toggleAccordion(this.accordion,"accordion-content-type-fields",!0),this.resetFieldForm(),this.onValueChanged("secondForm",this.secondFormErrors)}},{key:"fieldMove",value:function(e,t){if(!("up"===t&&0===e||"down"===t&&e===this.model.fields.length-1)){var n="up"===t?e-1:e+1,i=this.model.fields[e];this.model.fields.splice(e,1),this.model.fields.splice(n,0,i)}}},{key:"submitField",value:function(e){if(e&&e.preventDefault(),this.errorFieldMessage="",this.fld_submitted=!0,!this.secondForm.valid)return this.formGroupMarkTouched(this.secondForm),this.onValueChanged("secondForm",this.secondFormErrors),void(this.fld_submitted=!1);var t=(0,Z.cloneDeep)(Object.assign({},this.secondForm.value,{inputProperties:this.fieldModel.inputProperties,outputProperties:this.fieldModel.outputProperties})),n=(0,Z.findIndex)(this.model.fields,{name:t.name});n>-1&&this.currentFieldName!==t.name?this.errorFieldMessage=this.getLangString("FIELD_NAME_EXISTS"):(this.toggleAccordion(this.accordion,"accordion-content-type-fields",!0),"add_field"===this.action?this.model.fields.push(t):"edit_field"===this.action&&((n=(0,Z.findIndex)(this.model.fields,{name:this.currentFieldName}))>-1&&(this.model.fields[n]=t)),this.resetFieldForm())}},{key:"getFieldTypeProperty",value:function(e,t){if(!e)return null;var n=null,i=(0,Z.findIndex)(this.fieldTypes,{name:e});return i>-1&&void 0!==this.fieldTypes[i][t]&&(n=this.fieldTypes[i][t]),n}},{key:"sortingInit",value:function(e,t,n){var i,o=this;n&&n.preventDefault(),this.sortingFieldName=e,i=t?this.model.fields.filter(function(e){return e[t]}):this.model.fields,e&&i.sort(function(t,n){return t[e]-n[e]}),this.sortData=[],i.forEach(function(e){o.sortData.push({name:e.name,title:e.title})}),this.blockFieldList.nativeElement.style.display="none"}},{key:"sortingStart",value:function(e,t){t&&t.preventDefault(),this.errorMessage="";var n=e.split("-");this.sortingFieldName=n[0];var i=n[1]?this.model.fields.filter(function(e){return e[n[1]]}):this.model.fields;i.sort(function(e,t){return e[n[0]]-t[n[0]]}),0!==i.length?(this.sortData=i.map(function(e){return{name:e.name,title:e.title}}),this.blockFieldList.nativeElement.style.display="none"):this.errorMessage=this.getLangString("SORT_FIELDS_EMPTY")}},{key:"sortingApply",value:function(e){var t=this;if(this.sortingFieldName)this.sortData.forEach(function(e,n){var i=t.model.fields.findIndex(function(t){return t.name===e.name});i>-1&&(t.model.fields[i][t.sortingFieldName]=n)});else{var n=this.sortData.map(function(e){return e.name});this.model.fields.sort(function(e,t){return n.indexOf(e.name)-n.indexOf(t.name)})}this.sortingReset()}},{key:"sortingReset",value:function(){var e=(0,Z.findIndex)(this.model.fields,{name:this.currentFieldName});this.action=e>-1?"edit_field":"add_field",this.sortData.splice(0,this.sortData.length),this.sortingFieldName="",this.blockFieldList.nativeElement.style.display="block"}},{key:"getSaveRequest",value:function(e){return e.id?this.dataService.update(e):this.dataService.create(e)}},{key:"getFormData",value:function(){this.sortData.length>0&&this.sortingApply();var e=this.form.value;return e.id=this.model.id||0,e.groups=this.model.groups,e.fields=this.model.fields,e}},{key:"toggleAccordion",value:function(e,t,n){e.activeIds.indexOf(t)>-1&&n||e.toggle(t)}},{key:"fieldsExport",value:function(t){var n=this;t&&t.preventDefault(),this.errorMessage="",this.model.fields||(this.model.fields=[]),this.errorMessage="";var i=JSON.stringify(this.model.fields,null,"\t"),o=this.modalService.open(qe.O,{backdrop:"static",keyboard:!1,container:"#modals-container"});o.componentInstance.modalTitle="".concat(this.getLangString("EXPORT")," JSON"),o.componentInstance.textValue=i,o.result.then(function(t){if(t.data)try{var i,o=JSON.parse(t.data);n.model.fields.splice(0,n.model.fields.length),(i=n.model.fields).push.apply(i,e(o))}catch(r){n.errorMessage=n.getLangString("JSON_SYNTAX_ERROR")}},function(e){})}}]),o}(j.B);return t.\u0275fac=function(e){return new(e||t)(m.Y36(A.qu),m.Y36(O.Kz),m.Y36(g.sK),m.Y36(C.U),m.Y36(k.s),m.Y36(m.SBq),m.Y36(ye),m.Y36(Ae),m.Y36(O.FF))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-content-type-modal-content"]],viewQuery:function(e,t){var n;(1&e&&(m.Gf(ke,7),m.Gf(_e,7),m.Gf(Ie,7),m.Gf(Ee,5)),2&e)&&(m.iGM(n=m.CRH())&&(t.elementAddCollectionBlock=n.first),m.iGM(n=m.CRH())&&(t.elementAddGroupBlock=n.first),m.iGM(n=m.CRH())&&(t.accordion=n.first),m.iGM(n=m.CRH())&&(t.blockFieldList=n.first))},features:[m.qOj],decls:289,vars:254,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5"],["confirmPopover",""],[1,"modal-body","py-0"],[1,"row","mb-3"],[1,"col-lg-4",3,"formGroup"],["method","post",3,"formGroup","ngClass","ngSubmit"],["formEl",""],[1,"mb-2","form-group-message"],["for","fieldTitle",1,"label-filled"],["type","text","name","title","id","fieldTitle","formControlName","title",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","fieldName",1,"label-filled"],[1,"input-group",3,"ngClass"],["type","text","name","name","id","fieldName","formControlName","name",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"icon-reload"],[1,"mb-2"],["for","fieldDescription",1,"label-filled"],["type","text","rows","3","name","description","id","fieldDescription","formControlName","description",1,"form-control"],[1,"mb-2","row","form-group-message"],[1,"col-12"],[1,"mb-0"],["for","fieldCollectionName",1,"label-filled"],["id","fieldCollectionName","name","collection","formControlName","collection",1,"form-select","form-select-sm",3,"ngModel","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"icon-plus"],["triggers","manual",1,"d-flex",3,"ngbPopover"],["buttonDeleteCollection","ngbPopover"],["type","button",1,"btn","btn-secondary","btn-sm","rounded-top-start-0","rounded-bottom-start-0",3,"ngbTooltip","click"],[1,"card","p-1","mt-2","form-group-message",2,"display","none"],["addCollectionBlock",""],["type","text","formControlName","newCollection",1,"form-control","form-control-sm",3,"ngClass"],["addCollectionField",""],["class","alert alert-danger mb-1",4,"ngIf"],[1,"text-end","mt-1"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"form-check","m-0"],["type","checkbox","value","1","name","isCreateByUsersAllowed","formControlName","isCreateByUsersAllowed",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],[1,"card","card-body","p-2","ps-3"],["type","checkbox","value","1","name","isActive","formControlName","isActive",1,"form-check-input",3,"id"],[1,"col-lg-8",3,"formGroup"],[1,"label-filled",3,"hidden"],[1,"card"],[1,"card-body"],[1,"col-md-5"],[3,"for"],[1,"col-md-7"],["type","text","name","field_title","formControlName","title",1,"form-control","form-control-sm",3,"id","ngClass"],["type","text","name","field_name","formControlName","name",1,"form-control","form-control-sm",3,"id","ngClass"],[1,"mb-2","row"],["type","text","rows","3","name","field_description","formControlName","description",1,"form-control","form-control-sm",3,"id","ngClass"],["name","field_inputType","formControlName","inputType","placement","left",1,"form-select","form-select-sm",3,"id","ngbTooltip","change"],["value",""],[1,"icon-cog"],[1,"card","card-body","bg-light","mb-3",2,"display","none",3,"hidden"],["inputTypeOptionsBlock",""],[1,"alert","alert-secondary","small",3,"hidden"],["class","row mb-2",4,"ngFor","ngForOf"],["name","field_outputType","formControlName","outputType","placement","left",1,"form-select","form-select-sm",3,"id","ngbTooltip","ngClass","change"],["outputTypeOptionsBlock",""],["for","field_fieldGroup"],[1,"form-group-message"],[1,"input-group","input-group-sm",3,"ngClass"],["id","field_fieldGroup","name","field_group","formControlName","group",1,"form-select",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],["addGroupBlock",""],["type","text","formControlName","newGroup",1,"form-control","form-control-sm",3,"ngClass"],["addGroupField",""],[1,"row","mb-0"],[1,"col-md-7","offset-md-5"],[1,"form-check"],["type","checkbox","value","1","name","required","formControlName","required",1,"form-check-input",3,"id"],["type","checkbox","value","1","name","showInTable","formControlName","showInTable",1,"form-check-input",3,"id"],["type","checkbox","value","1","name","showOnPage","formControlName","showOnPage",1,"form-check-input",3,"id"],["type","checkbox","value","1","name","showInList","formControlName","showInList",1,"form-check-input",3,"id"],["type","checkbox","value","1","name","isFilter","formControlName","isFilter",1,"form-check-input",3,"id"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-3",3,"hidden"],["type","button",1,"btn-close",3,"click"],[1,"mt-3"],["type","button",1,"btn","btn-sm","btn-info","btn-wide",3,"hidden","click"],["type","button",1,"btn","btn-sm","btn-success","btn-wide",3,"hidden","click"],[1,"icon-check"],["type","button",1,"btn","btn-sm","btn-secondary","btn-wide",3,"click"],["activeIds","accordion-content-type-fields",1,"ngb-accordion",3,"closeOthers"],["accordion","ngbAccordion"],["id","accordion-content-type-fields",3,"title"],["ngbPanelContent",""],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["type","button","ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],[1,"text-center"],["class","alert alert-danger p-2",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"alert","alert-danger","p-2"],[3,"value"],[1,"alert","alert-danger","mb-1"],[1,"row","mb-2"],["type","text",1,"form-control","form-control-sm",3,"id","ngModel","ngModelOptions","ngModelChange"],["blockFieldList",""],[1,"float-end","mb-2",3,"hidden"],[1,"form-select","form-select-sm","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],["sortTypeSelect",""],["value","listOrder-showInList"],["value","pageOrder-showOnPage"],["value","filterOrder-isFilter"],["type","button",1,"btn","btn-sm","btn-secondary","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2","mb-2","mb-md-0",3,"click"],[1,"icon-shuffle"],["type","button",1,"btn","btn-sm","btn-secondary","d-inline-block",3,"click"],[1,"icon-inbox","me-2"],[1,"clearfix"],[1,"table","table-striped","table-divided","mb-0"],[1,"d-none","d-lg-table-cell"],["class","show-on-hover-parent",4,"ngFor","ngForOf"],[1,"table-active",3,"hidden"],["colspan","5",1,"text-center","p-3"],[3,"items","itemsChange","save","cancel"],[1,"show-on-hover-parent"],[1,"text-muted"],["outputType","boolean",3,"value"],[1,"relative"],[1,"show-on-hover-right"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"hidden","ngbTooltip","click"],[1,"icon-pencil"],["type","button",1,"btn","btn-secondary","btn-sm","ms-2",3,"ngbTooltip","click"],[1,"icon-stack"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"]],template:function(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"button",2),m.NdJ("click",function(e){return t.closeModal(e)}),m._UZ(3,"i",3),m.TgZ(4,"span"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.TgZ(7,"button",2),m.NdJ("click",function(e){return t.minimize(e)}),m._UZ(8,"i",4),m.TgZ(9,"span"),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",5),m.TgZ(13,"div",6),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(e){return t.maximize(e)}),m.ALo(16,"translate"),m._UZ(17,"i",9),m.qZA(),m.TgZ(18,"button",10),m.NdJ("click",function(e){return t.closeModal(e)}),m.ALo(19,"translate"),m._UZ(20,"i",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"h4",12),m._uU(22),m.qZA(),m.qZA(),m.YNc(23,Se,12,10,"ng-template",null,13,m.W1O),m.TgZ(25,"div",14),m.TgZ(26,"div",15),m.TgZ(27,"div",16),m.TgZ(28,"form",17,18),m.NdJ("ngSubmit",function(){return t.onSubmit()}),m.TgZ(30,"div",19),m.TgZ(31,"label",20),m._uU(32),m.ALo(33,"translate"),m.qZA(),m._UZ(34,"input",21),m.TgZ(35,"div",22),m._uU(36),m.qZA(),m.qZA(),m.TgZ(37,"div",19),m.TgZ(38,"label",23),m._uU(39),m.ALo(40,"translate"),m.qZA(),m.TgZ(41,"div",24),m._UZ(42,"input",25),m.TgZ(43,"button",26),m.NdJ("click",function(){return t.generateName(t.model)}),m.ALo(44,"translate"),m._UZ(45,"i",27),m.qZA(),m.qZA(),m.TgZ(46,"div",22),m._uU(47),m.qZA(),m.qZA(),m.TgZ(48,"div",28),m.TgZ(49,"label",29),m._uU(50),m.ALo(51,"translate"),m.qZA(),m._UZ(52,"textarea",30),m.qZA(),m.TgZ(53,"div",31),m.TgZ(54,"div",32),m.TgZ(55,"div",33),m.TgZ(56,"label",34),m._uU(57),m.ALo(58,"translate"),m.qZA(),m.TgZ(59,"div",24),m.TgZ(60,"select",35),m.NdJ("ngModelChange",function(e){return t.model.collection=e}),m.YNc(61,Ne,2,2,"option",36),m.qZA(),m.TgZ(62,"button",37),m.NdJ("click",function(e){m.CHM(n);var i=m.MAs(73);return t.addCollectionToggle(i,e)}),m.ALo(63,"translate"),m._UZ(64,"i",38),m.qZA(),m.TgZ(65,"div",39,40),m.TgZ(67,"button",41),m.NdJ("click",function(){m.CHM(n);var e=m.MAs(66);return t.deleteCollection(e)}),m.ALo(68,"translate"),m._UZ(69,"i",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(70,"div",42,43),m._UZ(72,"input",44,45),m.YNc(74,Oe,2,1,"div",46),m.TgZ(75,"div",47),m.TgZ(76,"button",48),m.NdJ("click",function(e){return t.addCollection(e)}),m._uU(77),m.ALo(78,"translate"),m.qZA(),m._uU(79," \xa0 "),m.TgZ(80,"button",48),m.NdJ("click",function(){return m.CHM(n),m.MAs(71).style.display="none",t.formErrors.newCollection=""}),m._uU(81),m.ALo(82,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(83,"div",28),m.TgZ(84,"div",49),m._UZ(85,"input",50),m.TgZ(86,"label",51),m._uU(87),m.ALo(88,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(89,"div",28),m.TgZ(90,"div",52),m.TgZ(91,"div",49),m._UZ(92,"input",53),m.TgZ(93,"label",51),m._uU(94),m.ALo(95,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(96,"div",54),m.TgZ(97,"label",55),m._uU(98),m.ALo(99,"translate"),m.qZA(),m.TgZ(100,"label",55),m._uU(101),m.ALo(102,"translate"),m.qZA(),m.TgZ(103,"div",56),m.TgZ(104,"div",57),m.TgZ(105,"div",31),m.TgZ(106,"div",58),m.TgZ(107,"label",59),m._uU(108),m.ALo(109,"translate"),m.qZA(),m.qZA(),m.TgZ(110,"div",60),m._UZ(111,"input",61),m.TgZ(112,"div",22),m._uU(113),m.qZA(),m.qZA(),m.qZA(),m.TgZ(114,"div",31),m.TgZ(115,"div",58),m.TgZ(116,"label",59),m._uU(117),m.ALo(118,"translate"),m.qZA(),m.qZA(),m.TgZ(119,"div",60),m.TgZ(120,"div",24),m._UZ(121,"input",62),m.TgZ(122,"button",37),m.NdJ("click",function(e){return t.generateName(t.fieldModel,e,t.secondForm)}),m.ALo(123,"translate"),m._UZ(124,"i",27),m.qZA(),m.qZA(),m.TgZ(125,"div",22),m._uU(126),m.qZA(),m.qZA(),m.qZA(),m.TgZ(127,"div",63),m.TgZ(128,"div",58),m.TgZ(129,"label",59),m._uU(130),m.ALo(131,"translate"),m.qZA(),m.qZA(),m.TgZ(132,"div",60),m._UZ(133,"textarea",64),m.qZA(),m.qZA(),m.TgZ(134,"div",31),m.TgZ(135,"div",58),m.TgZ(136,"label",59),m._uU(137),m.ALo(138,"translate"),m.qZA(),m.qZA(),m.TgZ(139,"div",60),m.TgZ(140,"div",24),m.TgZ(141,"select",65),m.NdJ("change",function(){return t.selectFieldTypeProperties("input")}),m._UZ(142,"option",66),m.YNc(143,we,2,2,"option",36),m.qZA(),m.TgZ(144,"button",37),m.NdJ("click",function(){m.CHM(n);var e=m.MAs(150);return t.displayToggle(e)}),m.ALo(145,"translate"),m._UZ(146,"i",67),m.qZA(),m.qZA(),m.TgZ(147,"div",22),m._uU(148),m.qZA(),m.qZA(),m.qZA(),m.TgZ(149,"div",68,69),m.TgZ(151,"div"),m.TgZ(152,"div",70),m._uU(153),m.ALo(154,"translate"),m.qZA(),m.YNc(155,Fe,6,8,"div",71),m.qZA(),m.TgZ(156,"div",47),m.TgZ(157,"button",48),m.NdJ("click",function(){return m.CHM(n),m.MAs(150).style.display="none"}),m._uU(158),m.ALo(159,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(160,"div",31),m.TgZ(161,"div",58),m.TgZ(162,"label",59),m._uU(163),m.ALo(164,"translate"),m.qZA(),m.qZA(),m.TgZ(165,"div",60),m.TgZ(166,"div",24),m.TgZ(167,"select",72),m.NdJ("change",function(){return t.selectFieldTypeProperties("output")}),m._UZ(168,"option",66),m.YNc(169,Ue,2,2,"option",36),m.qZA(),m.TgZ(170,"button",37),m.NdJ("click",function(){m.CHM(n);var e=m.MAs(176);return t.displayToggle(e)}),m.ALo(171,"translate"),m._UZ(172,"i",67),m.qZA(),m.qZA(),m.TgZ(173,"div",22),m._uU(174),m.qZA(),m.qZA(),m.qZA(),m.TgZ(175,"div",68,73),m.TgZ(177,"div",70),m._uU(178),m.ALo(179,"translate"),m.qZA(),m.YNc(180,De,6,8,"div",71),m.TgZ(181,"div",47),m.TgZ(182,"button",48),m.NdJ("click",function(){return m.CHM(n),m.MAs(176).style.display="none"}),m._uU(183),m.ALo(184,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(185,"div",63),m.TgZ(186,"div",58),m.TgZ(187,"label",74),m._uU(188),m.ALo(189,"translate"),m.qZA(),m.qZA(),m.TgZ(190,"div",60),m.TgZ(191,"div",75),m.TgZ(192,"div",76),m.TgZ(193,"select",77),m._UZ(194,"option",66),m.YNc(195,Je,2,2,"option",36),m.qZA(),m.TgZ(196,"button",37),m.NdJ("click",function(){m.CHM(n);var e=m.MAs(204),i=m.MAs(206);return t.displayToggle(e),i.value="",i.focus()}),m.ALo(197,"translate"),m._UZ(198,"i",38),m.qZA(),m.TgZ(199,"button",37),m.NdJ("click",function(){return t.deleteGroup()}),m.ALo(200,"translate"),m._UZ(201,"i",11),m.qZA(),m.qZA(),m.YNc(202,Re,2,1,"div",78),m.TgZ(203,"div",42,79),m._UZ(205,"input",80,81),m.YNc(207,Ye,2,1,"div",46),m.TgZ(208,"div",47),m.TgZ(209,"button",48),m.NdJ("click",function(e){return t.addGroup(e)}),m._uU(210),m.ALo(211,"translate"),m.qZA(),m._uU(212," \xa0 "),m.TgZ(213,"button",48),m.NdJ("click",function(){return m.CHM(n),m.MAs(204).style.display="none",t.secondFormErrors.fld_newGroup=""}),m._uU(214),m.ALo(215,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(216,"div",82),m.TgZ(217,"div",83),m.TgZ(218,"div",84),m._UZ(219,"input",85),m.TgZ(220,"label",51),m._uU(221),m.ALo(222,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(223,"div",82),m.TgZ(224,"div",83),m.TgZ(225,"div",84),m._UZ(226,"input",86),m.TgZ(227,"label",51),m._uU(228),m.ALo(229,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(230,"div",82),m.TgZ(231,"div",83),m.TgZ(232,"div",84),m._UZ(233,"input",87),m.TgZ(234,"label",51),m._uU(235),m.ALo(236,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(237,"div",82),m.TgZ(238,"div",83),m.TgZ(239,"div",84),m._UZ(240,"input",88),m.TgZ(241,"label",51),m._uU(242),m.ALo(243,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(244,"div",82),m.TgZ(245,"div",83),m.TgZ(246,"div",84),m._UZ(247,"input",89),m.TgZ(248,"label",51),m._uU(249),m.ALo(250,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(251,"div",90),m._uU(252),m.TgZ(253,"button",91),m.NdJ("click",function(){return t.errorFieldMessage=""}),m.qZA(),m.qZA(),m.TgZ(254,"div",92),m.TgZ(255,"button",93),m.NdJ("click",function(e){return t.submitField(e)}),m._UZ(256,"i",38),m._uU(257),m.ALo(258,"translate"),m.qZA(),m.TgZ(259,"button",94),m.NdJ("click",function(e){return t.submitField(e)}),m._UZ(260,"i",95),m._uU(261),m.ALo(262,"translate"),m.qZA(),m._uU(263," \xa0 "),m.TgZ(264,"button",96),m.NdJ("click",function(e){return t.editFieldCancel(e)}),m._uU(265),m.ALo(266,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(267,"ngb-accordion",97,98),m.TgZ(269,"ngb-panel",99),m.ALo(270,"translate"),m.YNc(271,Qe,53,40,"ng-template",100),m.qZA(),m.qZA(),m.YNc(272,Ge,3,1,"div",101),m.qZA(),m.TgZ(273,"div",102),m.TgZ(274,"div",103),m.TgZ(275,"button",104),m.NdJ("click",function(e){return t.save(!0,e)}),m.TgZ(276,"span"),m._uU(277),m.ALo(278,"translate"),m.qZA(),m.qZA(),m.TgZ(279,"div",105),m._UZ(280,"button",106),m.TgZ(281,"div",107),m.TgZ(282,"button",108),m.NdJ("click",function(e){return t.save(!1,e)}),m._uU(283),m.ALo(284,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(285,"button",109),m.NdJ("click",function(e){return t.closeModal(e)}),m.TgZ(286,"span"),m._uU(287),m.ALo(288,"translate"),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=m.MAs(24);m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(6,128,"CLOSE")),m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(11,130,"MINIMIZE")),m.xp6(5),m.Q6J("title",m.lcZ(16,132,"EXPAND")),m.xp6(3),m.Q6J("title",m.lcZ(19,134,"CLOSE")),m.xp6(4),m.Oqu(t.modalTitle),m.xp6(5),m.Q6J("formGroup",t.form),m.xp6(1),m.Q6J("formGroup",t.form)("ngClass",m.VKq(220,je,t.submitted)),m.xp6(4),m.hij(" ",m.lcZ(33,136,"TITLE")," "),m.xp6(2),m.Q6J("ngClass",m.VKq(222,Be,t.form.controls.title.touched&&!t.form.controls.title.valid)),m.xp6(2),m.hij(" ",t.formErrors.title," "),m.xp6(3),m.hij(" ",m.lcZ(40,138,"SYSTEM_NAME")," "),m.xp6(2),m.Q6J("ngClass",m.VKq(224,Be,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.Q6J("ngClass",m.VKq(226,Be,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(44,140,"GENERATE")),m.xp6(4),m.hij(" ",t.formErrors.name," "),m.xp6(3),m.hij(" ",m.lcZ(51,142,"DESCRIPTION")," "),m.xp6(7),m.Oqu(m.lcZ(58,144,"COLLECTION")),m.xp6(2),m.Q6J("ngClass",m.VKq(228,Be,t.form.controls.collection.touched&&!t.form.controls.collection.valid)),m.xp6(1),m.Q6J("ngModel",t.model.collection)("ngClass",m.VKq(230,Be,t.form.controls.collection.touched&&!t.form.controls.collection.valid)),m.xp6(1),m.Q6J("ngForOf",t.collections),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(63,146,"ADD_COLLECTION")),m.xp6(3),m.Q6J("ngbPopover",i),m.xp6(2),m.s9C("ngbTooltip",m.lcZ(68,148,"DELETE")),m.xp6(5),m.Q6J("ngClass",m.VKq(232,Be,t.form.controls.newCollection.touched&&!t.form.controls.newCollection.valid)),m.xp6(2),m.Q6J("ngIf",t.formErrors.newCollection),m.xp6(3),m.hij(" ",m.lcZ(78,150,"ADD")," "),m.xp6(4),m.hij(" ",m.lcZ(82,152,"CANCEL")," "),m.xp6(4),m.MGl("id","fieldIsCreateByUsersAllowed",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldIsCreateByUsersAllowed",t.uniqueId,""),m.xp6(1),m.hij(" ",m.lcZ(88,154,"CREATE_BY_USERS_ALLOWED")," "),m.xp6(5),m.MGl("id","fieldIsActive",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldIsActive",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(95,156,"ACTIVE")),m.xp6(2),m.Q6J("formGroup",t.secondForm),m.xp6(1),m.Q6J("hidden","add_field"!=t.action),m.xp6(1),m.hij(" ",m.lcZ(99,158,"ADD_FIELD")," "),m.xp6(2),m.Q6J("hidden","edit_field"!=t.action),m.xp6(1),m.hij(" ",m.lcZ(102,160,"EDIT_FIELD")," "),m.xp6(6),m.MGl("for","field_fieldTitle",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(109,162,"TITLE")),m.xp6(3),m.MGl("id","field_fieldTitle",t.uniqueId,""),m.Q6J("ngClass",m.VKq(234,Be,t.secondForm.controls.title.touched&&!t.secondForm.controls.title.valid)),m.xp6(2),m.Oqu(t.secondFormErrors.title),m.xp6(3),m.MGl("for","field_fieldName",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(118,164,"SYSTEM_NAME")),m.xp6(3),m.Q6J("ngClass",m.VKq(236,Be,t.secondForm.controls.name.touched&&!t.secondForm.controls.name.valid)),m.xp6(1),m.MGl("id","field_fieldName",t.uniqueId,""),m.Q6J("ngClass",m.VKq(238,Be,t.secondForm.controls.name.touched&&!t.secondForm.controls.name.valid)),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(123,166,"GENERATE")),m.xp6(4),m.Oqu(t.secondFormErrors.name),m.xp6(3),m.MGl("for","field_fieldDescription",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(131,168,"DESCRIPTION")),m.xp6(3),m.MGl("id","field_fieldDescription",t.uniqueId,""),m.Q6J("ngClass",m.VKq(240,Be,t.secondForm.controls.description.touched&&!t.secondForm.controls.description.valid)),m.xp6(3),m.MGl("for","field_fieldInputType",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(138,170,"INPUT_TYPE")),m.xp6(3),m.Q6J("ngClass",m.VKq(242,Be,t.secondForm.controls.inputType.touched&&!t.secondForm.controls.inputType.valid)),m.xp6(1),m.ekj("is-invalid",t.secondFormErrors.fld_inputType),m.MGl("id","field_fieldInputType",t.uniqueId,""),m.Q6J("ngbTooltip",t.getFieldTypeProperty(t.fieldModel.inputType,"description")),m.xp6(2),m.Q6J("ngForOf",t.fieldTypes),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(145,172,"OPTIONS")),m.xp6(4),m.Oqu(t.secondFormErrors.inputType),m.xp6(1),m.Q6J("hidden",!t.fieldModel.inputType),m.xp6(3),m.Q6J("hidden",t.fieldTypeProperties.input.length>0),m.xp6(1),m.hij(" ",m.lcZ(154,174,"THERE_NO_PARAMETERS")," "),m.xp6(2),m.Q6J("ngForOf",t.fieldTypeProperties.input),m.xp6(3),m.hij(" ",m.lcZ(159,176,"CLOSE")," "),m.xp6(4),m.MGl("for","field_fieldOutputType",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(164,178,"OUTPUT_TYPE")),m.xp6(3),m.Q6J("ngClass",m.VKq(244,Be,t.secondForm.controls.outputType.touched&&!t.secondForm.controls.outputType.valid)),m.xp6(1),m.MGl("id","field_fieldOutputType",t.uniqueId,""),m.Q6J("ngbTooltip",t.getFieldTypeProperty(t.fieldModel.outputType,"description"))("ngClass",m.VKq(246,Be,t.secondForm.controls.outputType.touched&&!t.secondForm.controls.outputType.valid)),m.xp6(2),m.Q6J("ngForOf",t.fieldTypes),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(171,180,"OPTIONS")),m.xp6(4),m.Oqu(t.secondFormErrors.outputType),m.xp6(1),m.Q6J("hidden",!t.fieldModel.outputType),m.xp6(2),m.Q6J("hidden",t.fieldTypeProperties.output.length>0),m.xp6(1),m.hij(" ",m.lcZ(179,182,"THERE_NO_PARAMETERS")," "),m.xp6(2),m.Q6J("ngForOf",t.fieldTypeProperties.output),m.xp6(3),m.hij(" ",m.lcZ(184,184,"CLOSE")," "),m.xp6(5),m.Oqu(m.lcZ(189,186,"GROUP")),m.xp6(4),m.Q6J("ngClass",m.VKq(248,Be,t.secondForm.controls.group.touched&&!t.secondForm.controls.group.valid)),m.xp6(1),m.Q6J("ngClass",m.VKq(250,Be,t.secondForm.controls.group.touched&&!t.secondForm.controls.group.valid)),m.xp6(2),m.Q6J("ngForOf",t.model.groups),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(197,188,"ADD_GROUP")),m.xp6(3),m.s9C("ngbTooltip",m.lcZ(200,190,"DELETE_GROUP")),m.xp6(3),m.Q6J("ngIf",t.secondFormErrors.group),m.xp6(3),m.Q6J("ngClass",m.VKq(252,Be,t.secondForm.controls.newGroup.touched&&!t.secondForm.controls.newGroup.valid)),m.xp6(2),m.Q6J("ngIf",t.secondFormErrors.newGroup),m.xp6(3),m.hij(" ",m.lcZ(211,192,"ADD")," "),m.xp6(4),m.hij(" ",m.lcZ(215,194,"CANCEL")," "),m.xp6(5),m.MGl("id","fieldRequired",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldRequired",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(222,196,"REQUIRED")),m.xp6(5),m.MGl("id","fieldShowInTable",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldShowInTable",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(229,198,"SHOW_IN_TABLE")),m.xp6(5),m.MGl("id","fieldShowOnPage",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldShowOnPage",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(236,200,"SHOW_ON_PAGE")),m.xp6(5),m.MGl("id","fieldShowInList",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldShowInList",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(243,202,"SHOW_IN_LIST")),m.xp6(5),m.MGl("id","fieldIsFilter",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldIsFilter",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(250,204,"SHOW_IN_FILTER")),m.xp6(2),m.Q6J("hidden",!t.errorFieldMessage),m.xp6(1),m.hij(" ",t.errorFieldMessage," "),m.xp6(3),m.Q6J("hidden","add_field"!=t.action),m.xp6(2),m.hij(" ",m.lcZ(258,206,"ADD_FIELD")," "),m.xp6(2),m.Q6J("hidden","edit_field"!=t.action),m.xp6(2),m.hij(" ",m.lcZ(262,208,"SAVE_FIELD")," "),m.xp6(4),m.hij(" ",m.lcZ(266,210,"CANCEL")," "),m.xp6(2),m.Q6J("closeOthers",!0),m.xp6(2),m.Q6J("title",m.lcZ(270,212,"FIELDS")),m.xp6(3),m.Q6J("ngIf",t.errorMessage),m.xp6(3),m.Q6J("disabled",t.submitted),m.xp6(2),m.Oqu(m.lcZ(278,214,"SAVE_AND_CLOSE")),m.xp6(3),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(284,216,"SAVE")),m.xp6(4),m.Oqu(m.lcZ(288,218,"CLOSE"))}},directives:[A.JL,A.sg,A._Y,d.mk,A.Fj,A.JJ,A.u,O._L,A.EJ,d.sg,O.o8,d.O5,A.Wl,A.YN,A.Kr,O.gY,O.Gk,O.gW,O.jt,O.iD,O.Vi,O.TH,A.On,Ce.i,xe.D],pipes:[g.X$],encapsulation:2}),t}(),He=function(){var e=function(e){i(o,e);var t=r(o);function o(e,n,i,r){var l;return s(this,o),(l=t.call(this,e,n,i,r)).dataService=e,l.activeModal=n,l.modalService=i,l.translateService=r,l.title="\u0422\u0438\u043f\u044b \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",l.queryOptions=new P.J("name","asc",1,10,0,0),l.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"title",sortName:"title",title:"TITLE",outputType:"text",outputProperties:{}},{name:"name",sortName:"name",title:"SYSTEM_NAME",outputType:"text",outputProperties:{}},{name:"collection",sortName:"collection",title:"COLLECTION",outputType:"text",outputProperties:{}},{name:"isActive",sortName:"isActive",title:"STATUS",outputType:"boolean",outputProperties:{}}],l}return c(o,[{key:"getModalContent",value:function(){return ze}},{key:"getModalElementId",value:function(e){return["modal","content_type",e||0].join("-")}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(a(o.prototype),"setModalInputs",this).call(this,e,t,i),this.modalRef.componentInstance.modalTitle=e&&!t?"".concat(this.getLangString("CONTENT_TYPE")," #").concat(e):this.getLangString("ADD_CONTENT_TYPE")}}]),o}(T.U);return e.\u0275fac=function(t){return new(t||e)(m.Y36(k.s),m.Y36(O.Kz),m.Y36(O.FF),m.Y36(g.sK))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-shk-content-types"]],features:[m.qOj],decls:30,vars:24,consts:[[1,"mb-3"],[1,"float-md-start"],[1,"btn","btn-outline-secondary","btn-wide","mb-2","mb-md-0",3,"routerLink"],[1,"icon-arrow-left"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2",3,"click"],[1,"icon-plus"],[1,"clearfix"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","isCloneAllowed","loading","selectedIdsChange","loadingChange","actionRequest"],["table",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"i",3),m._uU(4," \xa0 "),m.TgZ(5,"span"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(8,"div",4),m.TgZ(9,"div",5),m.TgZ(10,"button",6),m.TgZ(11,"span"),m._uU(12),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(){return t.blockSelected()}),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.TgZ(18,"button",8),m.NdJ("click",function(){return t.deleteSelected()}),m._uU(19),m.ALo(20,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"button",9),m.NdJ("click",function(){return t.modalOpen()}),m._UZ(22,"i",10),m._uU(23," \xa0 "),m.TgZ(24,"span"),m._uU(25),m.ALo(26,"translate"),m.qZA(),m.qZA(),m.qZA(),m._UZ(27,"div",11),m.qZA(),m.TgZ(28,"app-table",12,13),m.NdJ("selectedIdsChange",function(e){return t.selectedIds=e})("loadingChange",function(e){return t.loading=e})("actionRequest",function(e){return t.actionRequest(e)}),m.qZA()),2&e&&(m.xp6(2),m.Q6J("routerLink",m.DdM(23,Ve)),m.xp6(4),m.Oqu(m.lcZ(7,13,"CATALOG")),m.xp6(6),m.Oqu(m.lcZ(13,15,"BATCH_ACTIONS")),m.xp6(4),m.Oqu(m.lcZ(17,17,"DISABLE_ENABLE")),m.xp6(3),m.Oqu(m.lcZ(20,19,"DELETE")),m.xp6(6),m.Oqu(m.lcZ(26,21,"ADD")),m.xp6(3),m.Q6J("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("isCloneAllowed",!0)("loading",t.loading))},directives:[p.yS,O.jt,O.iD,O.Vi,he.a],pipes:[g.X$],encapsulation:2}),e}(),Ke=function e(t,n,i,o,r,l,a){s(this,e),this.id=t,this.name=n,this.title=i,this.description=o,this.isActive=r,this.inputProperties=l,this.outputProperties=a};function $e(e,t){if(1&e&&(m.TgZ(0,"div",50),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.title," ")}}function Xe(e,t){if(1&e&&(m.TgZ(0,"div",50),m._uU(1),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.hij(" ",n.formErrors.name," ")}}var We=function(e){return{"is-invalid":e}};function et(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"tr",59),m.TgZ(1,"td"),m._UZ(2,"input",60),m.qZA(),m.TgZ(3,"td",61),m._UZ(4,"input",62),m.qZA(),m.TgZ(5,"td",61),m._UZ(6,"input",63),m.qZA(),m.TgZ(7,"td",61),m.TgZ(8,"button",64),m.NdJ("click",function(e){var t=m.CHM(n).index;return m.oxw(3).arrayFieldDelete("inputProperties",t,e)}),m.ALo(9,"translate"),m._UZ(10,"i",11),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit;m.Q6J("formGroupName",t.index+""),m.xp6(2),m.Q6J("ngClass",m.VKq(7,We,i.controls.name.touched&&!i.controls.name.valid)),m.xp6(2),m.Q6J("ngClass",m.VKq(9,We,i.controls.title.touched&&!i.controls.title.valid)),m.xp6(2),m.Q6J("ngClass",m.VKq(11,We,i.controls.default_value.touched&&!i.controls.default_value.valid)),m.xp6(2),m.s9C("ngbTooltip",m.lcZ(9,5,"DELETE"))}}function tt(e,t){if(1&e&&(m.TgZ(0,"tbody"),m.YNc(1,et,11,13,"tr",58),m.qZA()),2&e){var n=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",n.arrayFields.inputProperties.controls)}}function nt(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",51),m.TgZ(1,"table",52),m.TgZ(2,"thead"),m.TgZ(3,"tr"),m.TgZ(4,"th"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"th"),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"th"),m._uU(11),m.ALo(12,"translate"),m.qZA(),m._UZ(13,"th"),m.qZA(),m.qZA(),m.YNc(14,tt,2,1,"tbody",53),m.TgZ(15,"tfoot"),m.TgZ(16,"tr",54),m.TgZ(17,"td",55),m.TgZ(18,"button",56),m.NdJ("click",function(e){return m.CHM(n),m.oxw().arrayFieldAdd("inputProperties",e)}),m._UZ(19,"i",57),m._uU(20," \xa0 "),m.TgZ(21,"span"),m._uU(22),m.ALo(23,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(5),m.hij(" ",m.lcZ(6,5,"SYSTEM_NAME")," "),m.xp6(3),m.hij(" ",m.lcZ(9,7,"TITLE")," "),m.xp6(3),m.hij(" ",m.lcZ(12,9,"DEFAULT_VALUE")," "),m.xp6(3),m.Q6J("ngIf",i.arrayFields.inputProperties),m.xp6(8),m.Oqu(m.lcZ(23,11,"ADD"))}}function it(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"tr",59),m.TgZ(1,"td"),m._UZ(2,"input",60),m.qZA(),m.TgZ(3,"td",61),m._UZ(4,"input",62),m.qZA(),m.TgZ(5,"td",61),m._UZ(6,"input",63),m.qZA(),m.TgZ(7,"td",61),m.TgZ(8,"button",64),m.NdJ("click",function(e){var t=m.CHM(n).index;return m.oxw(3).arrayFieldDelete("outputProperties",t,e)}),m.ALo(9,"translate"),m._UZ(10,"i",11),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit;m.Q6J("formGroupName",t.index+""),m.xp6(2),m.Q6J("ngClass",m.VKq(7,We,i.controls.name.touched&&!i.controls.name.valid)),m.xp6(2),m.Q6J("ngClass",m.VKq(9,We,i.controls.title.touched&&!i.controls.title.valid)),m.xp6(2),m.Q6J("ngClass",m.VKq(11,We,i.controls.default_value.touched&&!i.controls.default_value.valid)),m.xp6(2),m.s9C("ngbTooltip",m.lcZ(9,5,"DELETE"))}}function ot(e,t){if(1&e&&(m.TgZ(0,"tbody"),m.YNc(1,it,11,13,"tr",58),m.qZA()),2&e){var n=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",n.arrayFields.outputProperties.controls)}}function rt(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",65),m.TgZ(1,"table",52),m.TgZ(2,"thead"),m.TgZ(3,"tr"),m.TgZ(4,"th"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"th"),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"th"),m._uU(11),m.ALo(12,"translate"),m.qZA(),m._UZ(13,"th"),m.qZA(),m.qZA(),m.YNc(14,ot,2,1,"tbody",53),m.TgZ(15,"tfoot"),m.TgZ(16,"tr",54),m.TgZ(17,"td",55),m.TgZ(18,"button",56),m.NdJ("click",function(e){return m.CHM(n),m.oxw().arrayFieldAdd("outputProperties",e)}),m._UZ(19,"i",57),m._uU(20," \xa0 "),m.TgZ(21,"span"),m._uU(22),m.ALo(23,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(5),m.hij(" ",m.lcZ(6,5,"SYSTEM_NAME")," "),m.xp6(3),m.hij(" ",m.lcZ(9,7,"TITLE")," "),m.xp6(3),m.hij(" ",m.lcZ(12,9,"DEFAULT_VALUE")," "),m.xp6(3),m.Q6J("ngIf",i.arrayFields.outputProperties),m.xp6(8),m.Oqu(m.lcZ(23,11,"ADD"))}}function lt(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",66),m._uU(1),m.TgZ(2,"button",67),m.NdJ("click",function(){return m.CHM(n),m.oxw().errorMessage=""}),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.xp6(1),m.hij(" ",i.errorMessage," ")}}var at,st,dt=function(e){return{"no-events":e}},ct=function(){return["/catalog"]},ut=function(){var e=function(e){i(n,e);var t=r(n);function n(e,i,o,r,l,a){var d;return s(this,n),(d=t.call(this,e,i,o,r,l,a)).fb=e,d.activeModal=i,d.translateService=o,d.systemNameService=r,d.dataService=l,d.elRef=a,d.model=new Ke(0,"","","",!0,[],[]),d.formFields=[{name:"title",validators:[A.kI.required]},{name:"name",validators:[A.kI.required,A.kI.pattern("[A-Za-z0-9_-]+")]},{name:"description",validators:[]},{name:"isActive",validators:[]},{name:"inputProperties",validators:[],children:[{name:"name",validators:[A.kI.required]},{name:"title",validators:[A.kI.required]},{name:"default_value",validators:[]}]},{name:"outputProperties",validators:[],children:[{name:"name",validators:[A.kI.required]},{name:"title",validators:[A.kI.required]},{name:"default_value",validators:[]}]}],d}return n}(j.B);return e.\u0275fac=function(t){return new(t||e)(m.Y36(A.qu),m.Y36(O.Kz),m.Y36(g.sK),m.Y36(C.U),m.Y36(ye),m.Y36(m.SBq))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-field-type-modal-content"]],features:[m.qOj],decls:83,vars:68,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5"],["method","post",3,"formGroup","ngClass","ngSubmit"],["formEl",""],[1,"modal-body","py-0"],[1,"row"],[1,"col-md-6"],[1,"mb-2","form-group-message"],["for","fieldTitle",1,"label-filled"],["type","text","name","title","formControlName","title","id","fieldTitle",1,"form-control",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],["for","fieldName",1,"label-filled"],[1,"input-group",3,"ngClass"],["type","text","name","name","formControlName","name","id","fieldName",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"icon-reload"],[1,"mb-2","row"],[1,"col-12"],[1,"card","card-body","p-2","ps-3"],[1,"form-check","m-0"],["type","checkbox","value","1","name","isActive","formControlName","isActive",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],[1,"mb-2"],["for","fieldDescription",1,"label-filled"],["rows","5","name","description","formControlName","description","id","fieldDescription",1,"form-control"],["activeIds","accordion-input-options",1,"ngb-accordion",3,"closeOthers"],["accordion","ngbAccordion"],["id","accordion-input-options",3,"title"],["ngbPanelContent",""],["id","accordion-output-options",3,"title"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","display-block"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["type","button","ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],[1,"alert","alert-danger"],["formArrayName","inputProperties"],[1,"table","table-bordered","table-divided","mb-0"],[4,"ngIf"],[1,"bg-faded"],["colspan","4",1,"text-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"text-center"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],["type","text","formControlName","default_value",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],["formArrayName","outputProperties"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button",1,"btn-close",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"button",2),m.NdJ("click",function(e){return t.closeModal(e)}),m._UZ(3,"i",3),m.TgZ(4,"span"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.TgZ(7,"button",2),m.NdJ("click",function(e){return t.minimize(e)}),m._UZ(8,"i",4),m.TgZ(9,"span"),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",5),m.TgZ(13,"div",6),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(e){return t.maximize(e)}),m.ALo(16,"translate"),m._UZ(17,"i",9),m.qZA(),m.TgZ(18,"button",10),m.NdJ("click",function(e){return t.closeModal(e)}),m.ALo(19,"translate"),m._UZ(20,"i",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"h4",12),m._uU(22),m.qZA(),m.qZA(),m.TgZ(23,"form",13,14),m.NdJ("ngSubmit",function(){return t.onSubmit()}),m.TgZ(25,"div",15),m.TgZ(26,"div",16),m.TgZ(27,"div",17),m.TgZ(28,"div",18),m.TgZ(29,"label",19),m._uU(30),m.ALo(31,"translate"),m.qZA(),m._UZ(32,"input",20),m.YNc(33,$e,2,1,"div",21),m.qZA(),m.TgZ(34,"div",18),m.TgZ(35,"label",22),m._uU(36),m.ALo(37,"translate"),m.qZA(),m.TgZ(38,"div",23),m._UZ(39,"input",24),m.TgZ(40,"button",25),m.NdJ("click",function(){return t.generateName(t.model)}),m.ALo(41,"translate"),m._UZ(42,"i",26),m.qZA(),m.qZA(),m.YNc(43,Xe,2,1,"div",21),m.qZA(),m.TgZ(44,"div",27),m.TgZ(45,"div",28),m.TgZ(46,"div",29),m.TgZ(47,"div",30),m._UZ(48,"input",31),m.TgZ(49,"label",32),m._uU(50),m.ALo(51,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(52,"div",17),m.TgZ(53,"div",33),m.TgZ(54,"label",34),m._uU(55),m.ALo(56,"translate"),m.qZA(),m._UZ(57,"textarea",35),m.qZA(),m.qZA(),m.qZA(),m.TgZ(58,"ngb-accordion",36,37),m.TgZ(60,"ngb-panel",38),m.ALo(61,"translate"),m.YNc(62,nt,24,13,"ng-template",39),m.qZA(),m.TgZ(63,"ngb-panel",40),m.ALo(64,"translate"),m.YNc(65,rt,24,13,"ng-template",39),m.qZA(),m.qZA(),m.YNc(66,lt,3,1,"div",41),m.qZA(),m.TgZ(67,"div",42),m.TgZ(68,"div",43),m.TgZ(69,"button",44),m.NdJ("click",function(e){return t.save(!0,e)}),m.TgZ(70,"span"),m._uU(71),m.ALo(72,"translate"),m.qZA(),m.qZA(),m.TgZ(73,"div",45),m._UZ(74,"button",46),m.TgZ(75,"div",47),m.TgZ(76,"button",48),m.NdJ("click",function(e){return t.save(!1,e)}),m._uU(77),m.ALo(78,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(79,"button",49),m.NdJ("click",function(e){return t.closeModal(e)}),m.TgZ(80,"span"),m._uU(81),m.ALo(82,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(6,32,"CLOSE")),m.xp6(2),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(11,34,"MINIMIZE")),m.xp6(5),m.Q6J("title",m.lcZ(16,36,"EXPAND")),m.xp6(3),m.Q6J("title",m.lcZ(19,38,"CLOSE")),m.xp6(4),m.Oqu(t.modalTitle),m.xp6(1),m.Q6J("formGroup",t.form)("ngClass",m.VKq(60,dt,t.submitted)),m.xp6(2),m.ekj("loading",t.loading),m.xp6(5),m.Oqu(m.lcZ(31,40,"TITLE")),m.xp6(2),m.Q6J("ngClass",m.VKq(62,We,t.form.controls.title.touched&&!t.form.controls.title.valid)),m.xp6(1),m.Q6J("ngIf",t.formErrors.title),m.xp6(3),m.Oqu(m.lcZ(37,42,"SYSTEM_NAME")),m.xp6(2),m.Q6J("ngClass",m.VKq(64,We,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.Q6J("ngClass",m.VKq(66,We,t.form.controls.name.touched&&!t.form.controls.name.valid)),m.xp6(1),m.s9C("ngbTooltip",m.lcZ(41,44,"GENERATE")),m.xp6(3),m.Q6J("ngIf",t.formErrors.name),m.xp6(5),m.MGl("id","fieldIsActive",t.uniqueId,""),m.xp6(1),m.MGl("for","fieldIsActive",t.uniqueId,""),m.xp6(1),m.Oqu(m.lcZ(51,46,"ACTIVE")),m.xp6(5),m.Oqu(m.lcZ(56,48,"DESCRIPTION")),m.xp6(3),m.Q6J("closeOthers",!1),m.xp6(2),m.Q6J("title",m.lcZ(61,50,"INPUT_OPTIONS")),m.xp6(3),m.Q6J("title",m.lcZ(64,52,"OUTPUT_OPTIONS")),m.xp6(3),m.Q6J("ngIf",t.errorMessage),m.xp6(3),m.Q6J("disabled",t.submitted),m.xp6(2),m.Oqu(m.lcZ(72,54,"SAVE_AND_CLOSE")),m.xp6(3),m.Q6J("disabled",t.submitted),m.xp6(3),m.Oqu(m.lcZ(78,56,"SAVE")),m.xp6(4),m.Oqu(m.lcZ(82,58,"CLOSE")))},directives:[A._Y,A.JL,A.sg,d.mk,A.Fj,A.JJ,A.u,d.O5,O._L,A.Wl,O.gY,O.Gk,O.gW,O.jt,O.iD,O.Vi,O.TH,A.CE,d.sg,A.x0],pipes:[g.X$],encapsulation:2}),e}(),pt=[{path:"",component:v,children:[{path:"",redirectTo:"category/"},{path:"category",redirectTo:"category/"},{path:"category/:categoryId",component:Ze},{path:"content_types",component:He},{path:"field_types",component:(at=function(e){i(o,e);var t=r(o);function o(e,n,i,r){var l;return s(this,o),(l=t.call(this,e,n,i,r)).dataService=e,l.activeModal=n,l.modalService=i,l.translateService=r,l.title="Field types",l.queryOptions=new P.J("name","asc",1,10,0,0),l.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"title",sortName:"title",title:"TITLE",outputType:"text",outputProperties:{}},{name:"name",sortName:"name",title:"SYSTEM_NAME",outputType:"text",outputProperties:{}},{name:"isActive",sortName:"isActive",title:"STATUS",outputType:"boolean",outputProperties:{}}],l}return c(o,[{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(a(o.prototype),"setModalInputs",this).call(this,e,t,i),this.modalRef.componentInstance.modalTitle=e&&!t?"".concat(this.getLangString("FIELD_TYPE")," #").concat(e):this.getLangString("ADD_FIELD_TYPE")}},{key:"getModalElementId",value:function(e){return["modal","field_type",e||0].join("-")}},{key:"getModalContent",value:function(){return ut}}]),o}(T.U),at.\u0275fac=function(e){return new(e||at)(m.Y36(ye),m.Y36(O.Kz),m.Y36(O.FF),m.Y36(g.sK))},at.\u0275cmp=m.Xpm({type:at,selectors:[["app-shk-field-types"]],features:[m.qOj],decls:30,vars:24,consts:[[1,"mb-3"],[1,"float-md-start"],[1,"btn","btn-outline-secondary","btn-wide","mb-2","mb-md-0",3,"routerLink"],[1,"icon-arrow-left"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2",3,"click"],[1,"icon-plus"],[1,"clearfix"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","isCloneAllowed","loading","selectedIdsChange","loadingChange","actionRequest"],["table",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"i",3),m._uU(4," \xa0 "),m.TgZ(5,"span"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(8,"div",4),m.TgZ(9,"div",5),m.TgZ(10,"button",6),m.TgZ(11,"span"),m._uU(12),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.TgZ(14,"div",7),m.TgZ(15,"button",8),m.NdJ("click",function(){return t.blockSelected()}),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.TgZ(18,"button",8),m.NdJ("click",function(){return t.deleteSelected()}),m._uU(19),m.ALo(20,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"button",9),m.NdJ("click",function(){return t.modalOpen()}),m._UZ(22,"i",10),m._uU(23," \xa0 "),m.TgZ(24,"span"),m._uU(25),m.ALo(26,"translate"),m.qZA(),m.qZA(),m.qZA(),m._UZ(27,"div",11),m.qZA(),m.TgZ(28,"app-table",12,13),m.NdJ("selectedIdsChange",function(e){return t.selectedIds=e})("loadingChange",function(e){return t.loading=e})("actionRequest",function(e){return t.actionRequest(e)}),m.qZA()),2&e&&(m.xp6(2),m.Q6J("routerLink",m.DdM(23,ct)),m.xp6(4),m.Oqu(m.lcZ(7,13,"CATALOG")),m.xp6(6),m.Oqu(m.lcZ(13,15,"BATCH_ACTIONS")),m.xp6(4),m.Oqu(m.lcZ(17,17,"DISABLE_ENABLE")),m.xp6(3),m.Oqu(m.lcZ(20,19,"DELETE")),m.xp6(6),m.Oqu(m.lcZ(26,21,"ADD")),m.xp6(3),m.Q6J("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("isCloneAllowed",!0)("loading",t.loading))},directives:[p.yS,O.jt,O.iD,O.Vi,he.a],pipes:[g.X$],encapsulation:2}),at)}]}],mt=function(){var e=function e(){s(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[p.Bz.forChild(pt)],p.Bz]}),e}(),gt=((st=function e(){s(this,e)}).\u0275fac=function(e){return new(e||st)},st.\u0275mod=m.oAB({type:st}),st.\u0275inj=m.cJS({providers:[E,ye,Ae,L],imports:[[d.ez,u.m,mt]]}),st)},23056:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var o=n(5304),l=n(6887),a=n(37716),d=n(91841),u=function(){var e=function(e){i(n,e);var t=r(n);function n(e){var i;return s(this,n),(i=t.call(this,e)).setRequestUrl("/admin/content_types"),i}return c(n,[{key:"getItemByName",value:function(e){var t=this.getRequestUrl()+"/by_name/".concat(e);return this.http.get(t).pipe((0,o.K)(this.handleError()))}},{key:"getItemByCategory",value:function(e){var t=this.getRequestUrl()+"/by_category/".concat(e);return this.http.get(t).pipe((0,o.K)(this.handleError()))}}]),n}(l.D);return e.\u0275fac=function(t){return new(t||e)(a.LFG(d.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},49093:function(e,t,n){"use strict";n.d(t,{B:function(){return g}});var i=n(3679),o=n(79765),r=n(46782),l=n(6887),a=n(63124),d=n(37716),u=n(95047),p=n(29790),m=["formEl"],g=function(){var e=function(){function e(t,n,i,r,l,a){s(this,e),this.fb=t,this.activeModal=n,this.translateService=i,this.systemNameService=r,this.dataService=l,this.elRef=a,this.modalId="",this._formFieldsErrors={},this.submitted=!1,this.loading=!1,this.dataLoaded=!1,this.closeReason="canceled",this.files={},this.formFields=[],this.arrayFields={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},this.uniqueId="",this.destroyed$=new o.xQ}return c(e,[{key:"formErrors",get:function(){return this._formFieldsErrors},set:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=this.getControl(this.form,null,t);n&&n.setErrors({incorrect:!0})}this._formFieldsErrors=e}},{key:"ngOnInit",value:function(){var e=this;this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then(function(){e.onAfterGetData()}):this.onAfterGetData(),this.onAfterInit()}},{key:"onBeforeInit",value:function(){}},{key:"onAfterInit",value:function(){}},{key:"onAfterGetData",value:function(){this.dataLoaded=!0,this.buildControls(this.form,this.formFields)}},{key:"getSystemFieldName",value:function(){return""}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"getModelData",value:function(){var e=this;return this.loading=!0,new Promise(function(t,n){e.dataService.getItem(e.itemId).pipe((0,r.R)(e.destroyed$)).subscribe({next:function(n){if(e.isItemCopy){n.id=null;var i=e.getSystemFieldName();i&&(n[i]="")}Object.assign(e.model,n),e.loading=!1,t(n)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,n(t)}})})}},{key:"buildForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"model";n||(n=this.formFields),this[t]=this.fb.group(this.buildControls(null,n,o)),this[t].valueChanges.pipe((0,r.R)(this.destroyed$)).subscribe(function(){return e.onValueChanged(t,i)})}},{key:"buildControls",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"model",o={};return n.forEach(function(n){var r=t?e.getControl(t,n):null,l=null;if(i&&e[i]?(e[i].options||(e[i].options={}),l=0===n.name.indexOf("options_")?e[i].options[n.name.substr(8)]||null:e[i][n.name]||null):l=null,r)if(n.disabled&&r.disable(),n.children){var a=l,s=r;s.clear(),a.forEach(function(t,i){var o=e.getFormFieldByName(n.name),r=e.buildControls(null,o.children,null);s.push(e.fb.group(r))}),s.patchValue(a)}else r.setValue(l);else n.children?(o[n.name]=e.fb.array([]),e.createArrayFieldsProperty(n.name)):o[n.name]=e.fb.control({value:l,disabled:n.disabled||!1},n.validators)}),o}},{key:"onValueChanged",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this[t]&&(n||(n=this.formErrors),this[t].valid&&(this.errorMessage=""),Object.keys(this[t].value).forEach(function(i){n[i]="";var o=e.getControl(e[t],null,i);if(o&&!o.valid&&o.errors){var r="";Object.keys(o.errors).forEach(function(t){r+=(r?" ":"")+e.getLangString("INVALID_"+t.toUpperCase())}),n[i]=r}}))}},{key:"getFormFieldByName",value:function(e){var t=this.formFields.filter(function(t){return t.name===e});return t.length>0?t[0]:null}},{key:"createArrayFieldsProperty",value:function(e){var t=this;Object.defineProperty(this.arrayFields,e,{get:function(){return t.form?t.form.get(e):null}})}},{key:"getControl",value:function(e,t,n){return e?e.get(n||t.name):null}},{key:"focusFormError",value:function(){var e=this;setTimeout(function(){e.formEl.nativeElement.querySelector(".form-control.is-invalid")&&e.formEl.nativeElement.querySelector(".form-control.is-invalid").focus()},1)}},{key:"formGroupMarkTouched",value:function(e){var t=this;Object.keys(e.controls).forEach(function(n){e.controls[n].markAsTouched(),e.controls[n]instanceof i.Oe&&Array.from(t.form.controls[n].controls).forEach(function(e){t.formGroupMarkTouched(e)})})}},{key:"getSaveRequest",value:function(e){return e.id||"root"===e.name?this.dataService.update(e):this.dataService.create(e)}},{key:"getFormData",value:function(){var e=this.form.value;return e.id=this.model.id||0,void 0!==this.model.translations&&(e.translations=this.model.translations||null),e}},{key:"arrayFieldDelete",value:function(e,t,n){n&&n.preventDefault(),this.arrayFields[e].removeAt(t)}},{key:"arrayFieldAdd",value:function(e,t){t&&t.preventDefault();var n=this.getFormFieldByName(e);if(n){var i=this.buildControls(null,n.children,null);this.arrayFields[e].push(this.fb.group(i))}}},{key:"generateName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&t.preventDefault(),n||(n=this.form);var i=this.getControl(n,null,"title").value||"";e.name=this.systemNameService.generateName(i),this.getControl(n,null,"name").setValue(e.name)}},{key:"closeModal",value:function(e){e&&e.preventDefault(),this.close(this.closeReason)}},{key:"close",value:function(e,t){t&&t.preventDefault(),"submit"===e?this.activeModal.close(e):this.activeModal.dismiss(e)}},{key:"minimize",value:function(e){e&&e.preventDefault(),window.document.body.classList.remove("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.remove("d-block"),t.classList.add("modal-minimized"),n.classList.add("d-none")}},{key:"maximize",value:function(e){e&&e.preventDefault(),window.document.body.classList.add("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.add("d-block"),t.classList.remove("modal-minimized"),n.classList.remove("d-none")}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;t&&t.preventDefault(),this.onSubmit(e)}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var n=new FormData;for(var i in this.files)this.files.hasOwnProperty(i)&&this.files[i]instanceof File&&n.append(i,this.files[i],this.files[i].name);n.append("itemId",String(e)),this.dataService.postFormData(n).pipe((0,r.R)(this.destroyed$)).subscribe({next:function(){t.close("submit")},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.submitted=!1,t.loading=!1}})}else this.close("submit")}},{key:"onSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.formGroupMarkTouched(this.form),!this.form.valid)return this.errorMessage=this.getLangString("PLEASE_FIX_FORM_ERRORS"),void this.focusFormError();this.errorMessage="",this.loading=!0,this.submitted=!0;var n=this.getFormData();this.getSaveRequest(n).pipe((0,r.R)(this.destroyed$)).subscribe({next:function(n){Object.keys(e.files).length>0?e.saveFiles(n._id||n.id):t&&e.close("submit"),n&&n.id&&(e.model.id=n.id),e.closeReason="updated",e.loading=!1,e.submitted=!1},error:function(t){t.error&&(e.errorMessage=t.error),t.errors&&(e.formErrors=t.errors,e.errorMessage=e.getLangString("PLEASE_FIX_FORM_ERRORS")),e.loading=!1,e.submitted=!1}})}},{key:"onLocaleSwitch",value:function(){var e=this;if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach(function(t){e.model[t]=e.localePreviousValues[t],e.getControl(e.form,null,t).setValue(e.localePreviousValues[t])}),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach(function(t){e.localePreviousValues[t]=e.getControl(e.form,null,t).value,e.model.translations[t]?(e.model[t]=e.model.translations[t][e.localeCurrent]||"",e.getControl(e.form,null,t).setValue(e.model[t])):(e.model[t]="",e.getControl(e.form,null,t).setValue(""))})}},{key:"saveTranslations",value:function(e){var t=this;e&&e.preventDefault(),this.localeFieldsAllowed.forEach(function(e){t.getControl(t.form,null,e)&&t.getControl(t.form,null,e).value?(t.model.translations[e]||(t.model.translations[e]={}),t.model.translations[e][t.localeCurrent]=t.getControl(t.form,null,e).value):t.model.translations[e]&&(t.model.translations[e][t.localeCurrent]&&delete t.model.translations[e][t.localeCurrent],0===Object.keys(t.model.translations[e]).length&&delete t.model.translations[e])}),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()}},{key:"emailValidator",value:function(e){return e.value?/\S+@\S+\.\S+/.test(e.value)?void 0:{email:!0}:{required:!0}}},{key:"getRootElement",value:function(){return this.elRef.nativeElement.parentNode.parentNode.parentNode}},{key:"createUniqueId",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"displayToggle",value:function(e,t,n){n&&n.preventDefault(),e.style.display=(t=t||"none"===e.style.display)?"block":"none"}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(i.qu),d.Y36(u.Kz),d.Y36(p.sK),d.Y36(a.U),d.Y36(l.D),d.Y36(d.SBq))},e.\u0275cmp=d.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;(1&e&&d.Gf(m,5),2&e)&&(d.iGM(n=d.CRH())&&(t.formEl=n.first))},inputs:{modalTitle:"modalTitle",itemId:"itemId",modalId:"modalId",isItemCopy:"isItemCopy",isEditMode:"isEditMode"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}()},39343:function(e,t,n){"use strict";n.d(t,{D:function(){return g}});var i=n(3679),o=n(79765),r=n(46782),l=n(63124),a=n(6887),d=n(12946),u=n(37716),p=n(95047),m=n(29790),g=function(){var e=function(){function e(t,n,i,r,l,a,d){s(this,e),this.fb=t,this.dataService=n,this.systemNameService=i,this.activeModal=r,this.tooltipConfig=l,this.translateService=a,this.elRef=d,this.modalId="",this.submitted=!1,this.loading=!1,this.formErrors={},this.validationMessages={},this.formFields={},this.files={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},this.closeReason="canceled",this.uniqueId="",this.destroyed$=new o.xQ,l.placement="bottom",l.container="body",l.triggers="hover click"}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then(function(){e.onAfterGetData()}):this.onAfterGetData(),this.onAfterInit()}},{key:"onBeforeInit",value:function(){}},{key:"onAfterInit",value:function(){}},{key:"onAfterGetData",value:function(){}},{key:"getSystemFieldName",value:function(){return"name"}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"getModelData",value:function(){var e=this;return this.loading=!0,new Promise(function(t,n){e.dataService.getItem(e.itemId).pipe((0,r.R)(e.destroyed$)).subscribe({next:function(n){e.isItemCopy&&(n.id=null,n[e.getSystemFieldName()]=""),e.model=n,e.loading=!1,t(n)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,n(t)}})})}},{key:"buildForm",value:function(){var e=this,t=this.buildControls(this.formFields);this.form=this.fb.group(t),this.form.valueChanges.pipe((0,r.R)(this.destroyed$)).subscribe({next:function(t){return e.onValueChanged("form","",t)}})}},{key:"buildControls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"model",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o={};for(var r in e)if(e.hasOwnProperty(r)){var l=e[r],a=l.dataKey?this[t][l.dataKey]:this[t];a[r]||(a[r]=l.value),o[r]=new i.NI({value:a[r]||"",disabled:l.disabled||!1},l.validators),this.formErrors[n+r]="",this.translateValidationMessages(n,r,l)}return o}},{key:"translateValidationMessages",value:function(e,t,n){var o=this,r={};n.fieldLabel&&(Object.keys(n.messages).forEach(function(e){"required"!==e&&o.translateService.get(String(n.messages[e])).subscribe(function(t){r[e]=t})}),n.validators.indexOf(i.kI.required)>-1&&this.translateService.get(n.fieldLabel).subscribe(function(e){o.translateService.get("FIELD_REQUIRED",{name:e}).subscribe(function(e){r.required=e})}),this.validationMessages[e+t]=r)}},{key:"getControl",value:function(e){return this.form.controls.name}},{key:"onValueChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this[e]){var n=this[e].value;for(var i in n)if(n.hasOwnProperty(i)){this.formErrors[t+i]="";var o=this[e].get(i);if(o&&(o.dirty||this[t+"submitted"])&&!o.valid)for(var r in o.errors)this.formErrors[t+i]+=this.validationMessages[t+i][r]?this.validationMessages[t+i][r]+" ":this.getLangString("ERROR")+" "}}}},{key:"displayToggle",value:function(e,t){e.style.display=(t=t||"none"===e.style.display)?"block":"none"}},{key:"toggleAccordion",value:function(e,t,n){e.activeIds.indexOf(t)>-1&&n||e.toggle(t)}},{key:"generateName",value:function(e){e.name=this.systemNameService.generateName(e.title||"")}},{key:"closeModal",value:function(e){e&&e.preventDefault(),this.activeModal.close({reason:this.itemId?"edit":"create",data:this.model})}},{key:"close",value:function(e){e&&e.preventDefault(),this.activeModal.dismiss(this.closeReason)}},{key:"minimize",value:function(e){e&&e.preventDefault(),window.document.body.classList.remove("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.remove("d-block"),t.classList.add("modal-minimized"),n.classList.add("d-none")}},{key:"maximize",value:function(e){e&&e.preventDefault(),window.document.body.classList.add("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.add("d-block"),t.classList.remove("modal-minimized"),n.classList.remove("d-none")}},{key:"getFormData",value:function(){var e=this,t={};return Object.keys(this.model).forEach(function(n){t[n]=e.files[n]?Array.isArray(e.model[n])?[d.O.getFileData(e.files[n])]:d.O.getFileData(e.files[n]):e.model[n]}),t}},{key:"fileChange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.target.files;i.length>0&&(this.model[t]=n?[d.O.getFileData(i[0])]:d.O.getFileData(i[0]),this.files[t]=i[0],this.form.controls[t].setValue(this.files[t].name))}},{key:"fileClear",value:function(e,t){this.model[e]=null,this.form.controls[e].reset(null),t.files=null,t.value="",delete this.files[e]}},{key:"onLocaleSwitch",value:function(){var e=this;if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach(function(t){e.model[t]=e.localePreviousValues[t]}),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach(function(t){e.localePreviousValues[t]=e.model[t]||"",e.model[t]=e.model.translations[t]&&e.model.translations[t][e.localeCurrent]||""})}},{key:"saveTranslations",value:function(e){var t=this;e&&e.preventDefault(),this.localeFieldsAllowed.forEach(function(e){t.model[e]?(t.model.translations[e]||(t.model.translations[e]={}),t.model.translations[e][t.localeCurrent]=t.model[e]):t.model.translations[e]&&(t.model.translations[e][t.localeCurrent]&&delete t.model.translations[e][t.localeCurrent],0===Object.keys(t.model.translations[e]).length&&delete t.model.translations[e])}),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()}},{key:"saveRequest",value:function(){return this.isEditMode?this.dataService.update(this.getFormData()):this.dataService.create(this.getFormData())}},{key:"onSubmit",value:function(){this.submitted=!0,this.closeModal()}},{key:"appendFormData",value:function(e){}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var n=new FormData;for(var i in this.files)this.files.hasOwnProperty(i)&&this.files[i]instanceof File&&n.append(i,this.files[i],this.files[i].name);n.append("itemId",String(e)),this.appendFormData(n),this.dataService.postFormData(n).pipe((0,r.R)(this.destroyed$)).subscribe({next:function(){t.closeModal()},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.submitted=!1,t.loading=!1}})}else this.closeModal()}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(n&&n.preventDefault(),this.submitted=!0,this.errorMessage="",!this.form.valid)return this.onValueChanged("form"),void(this.submitted=!1);this.loading=!0,this.saveRequest().pipe((0,r.R)(this.destroyed$)).subscribe({next:function(n){Object.keys(e.files).length>0?e.saveFiles(n._id||n.id):(t?e.closeModal():n&&n.id&&(e.model=n,e.onAfterGetData(),e.isEditMode=!0),e.closeReason="updated",e.loading=!1,e.submitted=!1)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,e.submitted=!1}})}},{key:"emailValidator",value:function(e){return e.value?/\S+@\S+\.\S+/.test(e.value)?void 0:{email:!0}:{required:!0}}},{key:"getRootElement",value:function(){return this.elRef.nativeElement.parentNode.parentNode.parentNode}},{key:"createUniqueId",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(i.qu),u.Y36(a.D),u.Y36(l.U),u.Y36(p.Kz),u.Y36(p.xI),u.Y36(m.sK),u.Y36(u.SBq))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],inputs:{modalTitle:"modalTitle",itemId:"itemId",modalId:"modalId",isItemCopy:"isItemCopy",isEditMode:"isEditMode"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}()},3677:function(e,t,n){"use strict";n.d(t,{U:function(){return g}});var i=n(79765),o=n(46782),r=n(35930),l=n(6887),a=n(90660),d=n(37716),u=n(95047),p=n(29790),m=["table"],g=function(){var e=function(){function e(t,n,o,l){s(this,e),this.dataService=t,this.activeModal=n,this.modalService=o,this.translateService=l,this.items=[],this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new r.J("name","asc",1,10,0,0),this.destroyed$=new i.xQ}return c(e,[{key:"ngOnInit",value:function(){this.getList(),this.afterInit()}},{key:"afterInit",value:function(){}},{key:"onSearchClear",value:function(){this.getList()}},{key:"onModalClose",value:function(e){}},{key:"onSearchWordUpdate",value:function(e){var t=this;if(void 0!==e)return this.queryOptions.search_word=e,this.queryOptions.page=1,void(this.queryOptions.search_word?this.getList():this.onSearchClear());clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){t.queryOptions.page=1,t.getList()},700)}},{key:"getModalElementId",value:function(e){return["modal",e||0].join("-")}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=void 0!==e&&!t;this.modalRef.componentInstance.modalTitle=this.getLangString(i?"EDITING":"ADD"),this.modalRef.componentInstance.modalId=n,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=t||!1,this.modalRef.componentInstance.isEditMode=i}},{key:"modalOpen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getModalElementId(e);if(window.document.body.classList.add("modal-open"),window.document.getElementById(i)){var o=window.document.getElementById(i),r=o.previousElementSibling;return o.classList.add("d-block"),o.classList.remove("modal-minimized"),void r.classList.remove("d-none")}this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1,backdropClass:"modal-backdrop-left45",windowClass:"modal-left45",container:"#modals-container"}),this.setModalInputs(e,n,i),this.modalRef.result.then(function(e){t.destroyed$.isStopped||(t.onModalClose(e),t.getList())},function(e){t.destroyed$.isStopped||(t.onModalClose(e),e&&["submit","updated"].indexOf(e)>-1&&t.getList())})}},{key:"deleteItemConfirm",value:function(e){var t=this;this.modalRef=this.modalService.open(a.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then(function(n){"accept"===n&&t.deleteItem(e)})}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"confirmAction",value:function(e){return this.modalRef=this.modalService.open(a.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=e,this.modalRef.result}},{key:"blockSelected",value:function(){var e=this;0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe(function(t){e.clearSelected(),e.getList()},function(t){return e.showAlert(t.error||e.getLangString("ERROR"))}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"deleteSelected",value:function(){var e=this;0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then(function(t){"accept"===t&&e.dataService.actionBatch(e.selectedIds,"delete").subscribe(function(t){e.clearSelected(),e.getList()},function(t){return e.showAlert(t.error||e.getLangString("ERROR"))})}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"showAlert",value:function(e){this.modalRef=this.modalService.open(a.$N),this.modalRef.componentInstance.modalContent=e,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"}},{key:"deleteItem",value:function(e){var t=this;this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then(function(n){"accept"===n&&t.dataService.deleteItem(e).subscribe(function(e){t.getList()},function(e){e.error&&t.showAlert(e.error)})})}},{key:"clearSelected",value:function(){this.table&&this.table.clearSelected()}},{key:"actionRequest",value:function(e){switch(e[0]){case"edit":this.modalOpen(e[1]);break;case"copy":this.modalOpen(e[1],!0);break;case"delete":this.deleteItem(e[1]);break;case"changeQuery":this.getList()}}},{key:"getList",value:function(){var e=this;this.loading=!0,this.dataService.getListPage(this.queryOptions).pipe((0,o.R)(this.destroyed$)).subscribe({next:function(t){e.items=t.items,e.collectionSize=t.total,e.loading=!1},error:function(t){e.items=[],e.collectionSize=0,t.error&&e.showAlert(t.error),e.loading=!1}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.title="",e.\u0275fac=function(t){return new(t||e)(d.Y36(l.D),d.Y36(u.Kz),d.Y36(u.FF),d.Y36(p.sK))},e.\u0275dir=d.lG2({type:e,viewQuery:function(e,t){var n;(1&e&&d.Gf(m,7),2&e)&&(d.iGM(n=d.CRH())&&(t.table=n.first))}}),e}()}}])}();