!function(){"use strict";function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(t,n,i||t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_import-export_import-export_module_ts"],{23056:function(e,n,r){r.d(n,{s:function(){return p}});var l,s=r(5304),d=r(6887),c=r(37716),u=r(91841),p=((l=function(e){o(r,e);var n=a(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).setRequestUrl("/admin/content_types"),i}return i(r,[{key:"getItemByName",value:function(e){var t=this.getRequestUrl()+"/by_name/".concat(e);return this.http.get(t).pipe((0,s.K)(this.handleError()))}},{key:"getItemByCategory",value:function(e){var t=this.getRequestUrl()+"/by_category/".concat(e);return this.http.get(t).pipe((0,s.K)(this.handleError()))}}]),r}(d.D)).\u0275fac=function(e){return new(e||l)(c.LFG(u.eN))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l)},91577:function(n,r,l){l.r(r),l.d(r,{ImportExportModule:function(){return He}});var d,c=l(38583),u=l(16964),p=l(64916),g=l(99639),f=l(63124),m=l(5727),h=l(23815),Z=l(33013),v=l(3677),T=l(35930),A=l(91841),b=l(5304),q=l(6887),x=l(37716),y=((d=function(e){o(r,e);var n=a(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).setRequestUrl("import"),i}return i(r,[{key:"getSheetProperties",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/properties");return this.http.post(t,e,{headers:this.headers}).pipe((0,b.K)(this.handleError()))}},{key:"getFieldsOptions",value:function(e,t){var n=this.getRequestUrl()+"/".concat(e,"/fields_options"),i=this.createHttpParams(t);return this.http.get(n,{params:i,headers:this.headers}).pipe((0,b.K)(this.handleError()))}},{key:"splitFileAction",value:function(e){var t=this.getRequestUrl()+"/".concat(e,"/split_file");return this.http.post(t,{},{headers:this.headers}).pipe((0,b.K)(this.handleError()))}},{key:"testData",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/do_import_test");return this.http.post(t,e,{headers:this.headers}).pipe((0,b.K)(this.handleError()))}},{key:"importData",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/do_import");return this.http.post(t,e,{headers:this.headers}).pipe((0,b.K)(this.handleError()))}},{key:"importDataProgress",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/do_import");return this.http.request(new A.aW("POST",t,e,{reportProgress:!0,responseType:"text",headers:this.headers}))}},{key:"getPercent",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/percent");return this.http.get(t,{headers:this.headers}).pipe((0,b.K)(this.handleError()))}}]),r}(q.D)).\u0275fac=function(e){return new(e||d)(x.LFG(A.eN))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d),N=l(3679),E=l(88002),M=l(39343),C=function(){function e(n,i,o,r,a,l,s,d,c,u){t(this,e),this.id=n,this.title=i,this.fileData=o,this.type=r,this.fileSize=a,this.rowsQuantity=l,this.sheetsQuantity=s,this.sheetsNames=d,this.options=c,this.fieldsOptions=u,void 0===this.options&&e.setOptiontDefaults(this)}return i(e,null,[{key:"setOptiontDefaults",value:function(e){e.options||(e.options={}),e.options=Object.assign({parentId:0,rowNumberHeaders:1,rowNumberFirst:2,rowNumberLast:0,stepsNumber:1,step:1,categoriesSeparator:"",sheetName:"",contentType:"",articulFieldName:"",aliasAdditionalFieldName:"",csvSeparator:";",csvEncoding:"UTF-8",csvEnclosure:'"',skipFound:!1,filesDownload:!1},e.options)}}]),e}(),S=l(73844),O=l(5041),w=l(23056),_=l(90660),k=l(95047),I=l(29790),L=l(2917),R=l(89516);function U(e,t){if(1&e&&(x.TgZ(0,"div",47),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.title," ")}}function J(e,t){if(1&e&&(x.TgZ(0,"div",48),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.fileData," ")}}function F(e,t){if(1&e&&(x.TgZ(0,"div",47),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.rowNumberHeaders," ")}}function D(e,t){if(1&e&&(x.TgZ(0,"div",47),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.rowNumberFirst," ")}}function Q(e,t){if(1&e&&(x.TgZ(0,"div",47),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.rowNumberLast," ")}}function Y(e,t){if(1&e&&(x.TgZ(0,"div",47),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.categoriesSeparator," ")}}function P(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",16),x.TgZ(2,"div",17),x.TgZ(3,"div",16),x.TgZ(4,"div",27),x.TgZ(5,"div",22),x.TgZ(6,"label",49),x.TgZ(7,"span",29),x.ALo(8,"translate"),x._uU(9),x.ALo(10,"translate"),x.qZA(),x.qZA(),x.TgZ(11,"input",50),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvSeparator=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",27),x.TgZ(13,"div",22),x.TgZ(14,"label",51),x.TgZ(15,"span",29),x.ALo(16,"translate"),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.qZA(),x.TgZ(19,"input",52),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvEnclosure=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"div",17),x.TgZ(21,"div",22),x.TgZ(22,"label",53),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"input",54),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvEncoding=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw();x.xp6(7),x.Q6J("title",x.lcZ(8,8,"CSV_SEPARATOR")),x.xp6(2),x.Oqu(x.lcZ(10,10,"CSV_SEPARATOR")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvSeparator),x.xp6(4),x.Q6J("title",x.lcZ(16,12,"CSV_ENCLOSURE")),x.xp6(2),x.Oqu(x.lcZ(18,14,"CSV_ENCLOSURE")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvEnclosure),x.xp6(4),x.Oqu(x.lcZ(24,16,"CSV_ENCODING")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvEncoding)}}function j(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n),x.xp6(1),x.Oqu(n)}}function B(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.Oqu(n.title)}}function H(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.hij(" ",n.title," ")}}function $(e,t){if(1&e&&(x.ynx(0),x.YNc(1,H,2,2,"option",58),x.BQk()),2&e){var n=x.oxw(2);x.xp6(1),x.Q6J("ngForOf",n.contentType.fields)}}function z(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.hij(" ",n.title," ")}}function V(e,t){if(1&e&&(x.ynx(0),x.YNc(1,z,2,2,"option",58),x.BQk()),2&e){var n=x.oxw(2);x.xp6(1),x.Q6J("ngForOf",n.contentType.fields)}}function G(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n),x.xp6(1),x.Oqu(n)}}var K=function(){return{standalone:!0}};function X(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",83),x.TgZ(1,"div",84),x.TgZ(2,"div",85),x.TgZ(3,"span",86),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.TgZ(6,"select",87),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(3).model.options.step=e}),x.YNc(7,G,2,2,"option",58),x.qZA(),x.qZA(),x.qZA()}if(2&e){var i=x.oxw(3);x.xp6(4),x.hij(" ",x.lcZ(5,4,"STEP")," "),x.xp6(2),x.Q6J("ngModel",i.model.options.step)("ngModelOptions",x.DdM(6,K)),x.xp6(1),x.Q6J("ngForOf",i.steps)}}function W(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",99),x.TgZ(2,"input",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.targetName=e}),x.ALo(3,"translate"),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw().$implicit;x.xp6(2),x.Q6J("ngbTooltip",x.lcZ(3,2,"SYSTEM_NAME"))("ngModel",i.targetName)}}function ee(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.hij(" ",n.title," ")}}function te(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"select",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).$implicit.targetName=e}),x.YNc(2,ee,2,2,"option",58),x.qZA(),x.BQk()}if(2&e){var i=x.oxw(2).$implicit,o=x.oxw(3);x.xp6(1),x.Q6J("ngModel",i.targetName),x.xp6(1),x.Q6J("ngForOf",o.contentType.fields)}}function ne(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"div",99),x.YNc(2,te,3,2,"ng-container",37),x.qZA(),x.BQk()),2&e){var n=x.oxw(4);x.xp6(2),x.Q6J("ngIf",n.contentType)}}function ie(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",99),x.TgZ(2,"input",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.separator=e}),x.ALo(3,"translate"),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw().$implicit;x.xp6(2),x.Q6J("ngbTooltip",x.lcZ(3,2,"SEPARATOR"))("ngModel",i.separator)}}function oe(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",107),x.TgZ(2,"input",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.targetTitle=e}),x.ALo(3,"translate"),x.qZA(),x.qZA(),x.TgZ(4,"div",108),x.TgZ(5,"input",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().$implicit.targetName=e}),x.ALo(6,"translate"),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw().$implicit;x.xp6(2),x.Q6J("ngbTooltip",x.lcZ(3,4,"FIELD_NAME"))("ngModel",i.targetTitle),x.xp6(3),x.Q6J("ngbTooltip",x.lcZ(6,6,"SYSTEM_NAME"))("ngModel",i.targetName)}}function re(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",107),x.TgZ(1,"input",100),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).$implicit.targetTitle=e}),x.ALo(2,"translate"),x.qZA(),x.qZA()}if(2&e){var i=x.oxw(2).$implicit;x.xp6(1),x.Q6J("ngbTooltip",x.lcZ(2,2,"FIELD_NAME"))("ngModel",i.targetTitle)}}function ae(e,t){if(1&e&&(x.TgZ(0,"option",70),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.hij(" ",n.title," ")}}function le(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"select",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).$implicit.targetName=e}),x.YNc(2,ae,2,2,"option",58),x.qZA(),x.BQk()}if(2&e){var i=x.oxw(2).$implicit,o=x.oxw(5);x.xp6(1),x.Q6J("ngModel",i.targetName),x.xp6(1),x.Q6J("ngForOf",o.contentType.fields)}}var se=function(e,t){return{"col-4":e,"col-6":t}};function de(e,t){if(1&e&&(x.ynx(0),x.YNc(1,re,3,4,"div",109),x.TgZ(2,"div",110),x.YNc(3,le,3,2,"ng-container",37),x.qZA(),x.BQk()),2&e){var n=x.oxw().$implicit,i=x.oxw(5);x.xp6(1),x.Q6J("ngIf",i.getIsParametersField(n.targetName)),x.xp6(1),x.Q6J("ngClass",x.WLB(3,se,i.getIsParametersField(n.targetName),!i.getIsParametersField(n.targetName))),x.xp6(1),x.Q6J("ngIf",i.contentType)}}function ce(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",105),x.TgZ(1,"div",91),x.TgZ(2,"select",61),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.targetAction=e})("ngModelChange",function(e){var t=x.CHM(n).$implicit,i=x.oxw(2).$implicit;return x.oxw(3).onChangeFieldAction(t,e,i)}),x.TgZ(3,"option",57),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.TgZ(6,"option",93),x._uU(7),x.ALo(8,"translate"),x.qZA(),x.TgZ(9,"option",95),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.TgZ(12,"option",106),x._uU(13),x.ALo(14,"translate"),x.qZA(),x.qZA(),x.qZA(),x.ynx(15,97),x.YNc(16,oe,7,8,"ng-container",98),x.YNc(17,de,4,6,"ng-container",98),x.BQk(),x.qZA()}if(2&e){var i=t.$implicit,o=x.oxw(5);x.xp6(1),x.Q6J("ngClass",o.getFieldsColumnClass(i,"field_sub")),x.xp6(1),x.Q6J("ngModel",i.targetAction),x.xp6(2),x.Oqu(x.lcZ(5,9,"NO_IMPORT")),x.xp6(3),x.Oqu(x.lcZ(8,11,"SELECT_FIELD")),x.xp6(3),x.Oqu(x.lcZ(11,13,"CREATE_FIELD")),x.xp6(3),x.hij("\xd7 ",x.lcZ(14,15,"DELETE"),""),x.xp6(2),x.Q6J("ngSwitch",i.targetAction),x.xp6(1),x.Q6J("ngSwitchCase","new"),x.xp6(1),x.Q6J("ngSwitchCase","field")}}function ue(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",16),x.TgZ(2,"div",101),x._UZ(3,"hr"),x.YNc(4,ce,18,17,"div",102),x.TgZ(5,"div",103),x.TgZ(6,"button",104),x.NdJ("click",function(e){x.CHM(n);var t=x.oxw().$implicit;return x.oxw(3).fieldAddOptions(t,e)}),x._uU(7),x.ALo(8,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw().$implicit;x.xp6(4),x.Q6J("ngForOf",i.options),x.xp6(3),x.hij(" ",x.lcZ(8,2,"ADD")," ")}}function pe(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td"),x.TgZ(3,"div",16),x.TgZ(4,"div",88),x._uU(5),x.qZA(),x.TgZ(6,"div",89),x.TgZ(7,"div",90),x.TgZ(8,"div",91),x.TgZ(9,"select",61),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.targetAction=e})("ngModelChange",function(e){var t=x.CHM(n).$implicit;return x.oxw(3).onChangeFieldAction(t,"field",e)}),x.TgZ(10,"option",57),x._uU(11),x.ALo(12,"translate"),x.qZA(),x.TgZ(13,"option",92),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"option",93),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"option",94),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"option",95),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.TgZ(25,"option",96),x._uU(26),x.ALo(27,"translate"),x.qZA(),x.qZA(),x.qZA(),x.ynx(28,97),x.YNc(29,W,4,4,"ng-container",98),x.YNc(30,ne,3,1,"ng-container",98),x.YNc(31,ie,4,4,"ng-container",98),x.BQk(),x.qZA(),x.qZA(),x.qZA(),x.YNc(32,ue,9,4,"ng-container",37),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=t.$implicit,o=x.oxw(3);x.xp6(5),x.hij(" ",i.sourceTitle," "),x.xp6(3),x.Q6J("ngClass",o.getFieldsColumnClass(i,"field")),x.xp6(1),x.Q6J("ngModel",i.targetAction),x.xp6(2),x.Oqu(x.lcZ(12,14,"NO_IMPORT")),x.xp6(3),x.Oqu(x.lcZ(15,16,"CATEGORY")),x.xp6(3),x.Oqu(x.lcZ(18,18,"SELECT_FIELD")),x.xp6(3),x.Oqu(x.lcZ(21,20,"TRANSLATIONS")),x.xp6(3),x.Oqu(x.lcZ(24,22,"CREATE_FIELD")),x.xp6(3),x.Oqu(x.lcZ(27,24,"SPLIT")),x.xp6(2),x.Q6J("ngSwitch",i.targetAction),x.xp6(1),x.Q6J("ngSwitchCase","new"),x.xp6(1),x.Q6J("ngSwitchCase","field"),x.xp6(1),x.Q6J("ngSwitchCase","split"),x.xp6(1),x.Q6J("ngIf","split"==i.targetAction)}}function ge(e,t){if(1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.qZA()),2&e){var n=t.$implicit;x.xp6(2),x.hij(" ",n," ")}}function fe(e,t){if(1&e&&(x.TgZ(0,"table",124),x.TgZ(1,"thead"),x.TgZ(2,"tr"),x.TgZ(3,"th"),x._uU(4),x.ALo(5,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(6,"tbody"),x.YNc(7,ge,3,1,"tr",82),x.qZA(),x.qZA()),2&e){var n=x.oxw(4);x.xp6(4),x.Oqu(x.lcZ(5,2,"CATEGORIES")),x.xp6(3),x.Q6J("ngForOf",n.testData.categories)}}function me(e,t){if(1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.ALo(5,"json"),x.qZA(),x.qZA()),2&e){var n=t.$implicit;x.xp6(2),x.hij(" ",n.key," "),x.xp6(2),x.hij(" ",x.lcZ(5,2,n.value)," ")}}function he(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",111),x.TgZ(2,"div",112),x.TgZ(3,"div",113),x.TgZ(4,"button",114),x.NdJ("click",function(e){return x.CHM(n),x.oxw(3).clearTestData(e)}),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(7,"div",16),x.TgZ(8,"div",115),x.YNc(9,fe,8,4,"table",116),x.TgZ(10,"table",117),x.TgZ(11,"colgroup"),x._UZ(12,"col",118),x.qZA(),x.TgZ(13,"tr"),x.TgZ(14,"td"),x._uU(15),x.ALo(16,"translate"),x.qZA(),x.TgZ(17,"td"),x._uU(18),x.qZA(),x.qZA(),x.TgZ(19,"tr"),x.TgZ(20,"td"),x._uU(21),x.ALo(22,"translate"),x.qZA(),x.TgZ(23,"td"),x._uU(24),x.qZA(),x.qZA(),x.TgZ(25,"tr"),x.TgZ(26,"td"),x._uU(27),x.ALo(28,"translate"),x.qZA(),x.TgZ(29,"td"),x._uU(30),x.ALo(31,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(32,"div",119),x.TgZ(33,"div",120),x.TgZ(34,"table",117),x.TgZ(35,"colgroup"),x._UZ(36,"col",121),x._UZ(37,"col",122),x.qZA(),x.TgZ(38,"thead"),x.TgZ(39,"tr"),x.TgZ(40,"th",123),x._uU(41),x.ALo(42,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(43,"tbody"),x.YNc(44,me,6,4,"tr",82),x.ALo(45,"keyvalue"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw(3);x.xp6(5),x.hij(" ",x.lcZ(6,11,"CLOSE")," "),x.xp6(4),x.Q6J("ngIf",i.testData.categories.length),x.xp6(6),x.hij(" ",x.lcZ(16,13,"ROW_NUMBER")," "),x.xp6(3),x.hij(" ",i.testData.row_number_first," "),x.xp6(3),x.hij(" ",x.lcZ(22,15,"MEMORY_USED")," "),x.xp6(3),x.hij(" ",i.testData.memory_peak_usage," "),x.xp6(3),x.hij(" ",x.lcZ(28,17,"TIME_EXECUTION")," "),x.xp6(3),x.AsE(" ",i.testData.time_execution," ",x.lcZ(31,19,"TIME_EXECUTION_SEC")," "),x.xp6(11),x.Oqu(x.lcZ(42,21,"PRODUCT_DATA")),x.xp6(3),x.Q6J("ngForOf",x.lcZ(45,23,i.testData.data))}}function Ze(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",71),x.TgZ(1,"div",72),x.TgZ(2,"div",73),x.YNc(3,X,8,7,"div",74),x.TgZ(4,"button",75),x.NdJ("click",function(e){return x.CHM(n),x.oxw(2).startImport(e)}),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.qZA(),x.TgZ(7,"button",76),x.NdJ("click",function(e){return x.CHM(n),x.oxw(2).updateData(e)}),x.ALo(8,"translate"),x._UZ(9,"i",77),x.qZA(),x.TgZ(10,"button",78),x.NdJ("click",function(e){return x.CHM(n),x.oxw(2).getTestData(e)}),x._uU(11),x.ALo(12,"translate"),x.qZA(),x.qZA(),x.TgZ(13,"div",79),x.TgZ(14,"div",80),x.TgZ(15,"table",81),x.YNc(16,pe,33,26,"ng-container",82),x.qZA(),x.qZA(),x.YNc(17,he,46,25,"ng-container",37),x.qZA(),x.qZA()}if(2&e){var i=x.oxw(2);x.xp6(3),x.Q6J("ngIf",i.model.options.stepsNumber>1),x.xp6(2),x.hij(" ",x.lcZ(6,7,"START_IMPORT")," "),x.xp6(2),x.Q6J("ngbTooltip",x.lcZ(8,9,"REFRESH")),x.xp6(3),x.Q6J("disabled",i.testData),x.xp6(1),x.hij(" ",x.lcZ(12,11,"TEST")," "),x.xp6(5),x.Q6J("ngForOf",i.model.fieldsOptions),x.xp6(1),x.Q6J("ngIf",i.testData)}}function ve(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div"),x._UZ(2,"hr"),x.TgZ(3,"div",16),x.TgZ(4,"div",17),x.TgZ(5,"div",22),x.TgZ(6,"label",55),x._uU(7),x.ALo(8,"translate"),x.qZA(),x.TgZ(9,"select",56),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.sheetName=e})("ngModelChange",function(){return x.CHM(n),x.oxw().getSheetProperties()}),x._UZ(10,"option",57),x.YNc(11,j,2,2,"option",58),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",17),x.TgZ(13,"div",22),x.TgZ(14,"label",59),x._uU(15),x.ALo(16,"translate"),x.qZA(),x.TgZ(17,"app-select-parent-dropdown",60),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.parentId=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(18,"div",16),x.TgZ(19,"div",17),x.TgZ(20,"div",22),x.TgZ(21,"label",55),x._uU(22),x.ALo(23,"translate"),x.qZA(),x.TgZ(24,"select",61),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.contentType=e})("ngModelChange",function(e){return x.CHM(n),x.oxw().getContentType(e)}),x._UZ(25,"option",57),x.YNc(26,B,2,2,"option",58),x.ALo(27,"async"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(28,"div",17),x.TgZ(29,"div",22),x.TgZ(30,"label",62),x._uU(31),x.ALo(32,"translate"),x.qZA(),x.TgZ(33,"select",63),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.articulFieldName=e}),x._UZ(34,"option",57),x.YNc(35,$,2,1,"ng-container",37),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(36,"div",16),x.TgZ(37,"div",17),x.TgZ(38,"label",64),x.TgZ(39,"span",29),x.ALo(40,"translate"),x._uU(41),x.ALo(42,"translate"),x.qZA(),x.qZA(),x.TgZ(43,"select",65),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.aliasAdditionalFieldName=e}),x._UZ(44,"option",57),x.YNc(45,V,2,1,"ng-container",37),x.qZA(),x.qZA(),x.TgZ(46,"div",17),x.TgZ(47,"div",22),x.TgZ(48,"div",66),x.TgZ(49,"input",67),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.filesDownload=e}),x.qZA(),x.TgZ(50,"label",68),x._uU(51),x.ALo(52,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(53,"div",22),x.TgZ(54,"div",66),x.TgZ(55,"input",67),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.skipFound=e}),x.qZA(),x.TgZ(56,"label",68),x._uU(57),x.ALo(58,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(59,Ze,18,13,"div",69),x.qZA(),x.BQk()}if(2&e){var i=x.oxw();x.xp6(1),x.ekj("loading",i.loadingConfiguration),x.xp6(6),x.Oqu(x.lcZ(8,26,"SHEET")),x.xp6(2),x.Q6J("ngModel",i.model.options.sheetName),x.xp6(2),x.Q6J("ngForOf",i.model.sheetsNames),x.xp6(4),x.Oqu(x.lcZ(16,28,"PARENT_FOLDER")),x.xp6(2),x.Q6J("ngModel",i.model.options.parentId),x.xp6(5),x.Oqu(x.lcZ(23,30,"CONTENT_TYPE")),x.xp6(2),x.Q6J("ngModel",i.model.options.contentType),x.xp6(2),x.Q6J("ngForOf",x.lcZ(27,32,i.contentTypes$)),x.xp6(5),x.Oqu(x.lcZ(32,34,"SEARCH_FIELD")),x.xp6(2),x.Q6J("ngModel",i.model.options.articulFieldName),x.xp6(2),x.Q6J("ngIf",i.contentType),x.xp6(4),x.Q6J("title",x.lcZ(40,36,"ALIAS_ADDITIONAL_FIELD")),x.xp6(2),x.Oqu(x.lcZ(42,38,"ALIAS_ADDITIONAL_FIELD")),x.xp6(2),x.Q6J("ngModel",i.model.options.aliasAdditionalFieldName),x.xp6(2),x.Q6J("ngIf",i.contentType),x.xp6(4),x.MGl("id","fieldFilesDownload",i.uniqueId,""),x.Q6J("ngModel",i.model.options.filesDownload),x.xp6(1),x.MGl("for","fieldFilesDownload",i.uniqueId,""),x.xp6(1),x.Oqu(x.lcZ(52,40,"FILES_DOWNLOAD")),x.xp6(4),x.MGl("id","fieldSkipFound",i.uniqueId,""),x.Q6J("ngModel",i.model.options.skipFound),x.xp6(1),x.MGl("for","fieldSkipFound",i.uniqueId,""),x.xp6(1),x.Oqu(x.lcZ(58,42,"SKIP_FOUND")),x.xp6(2),x.Q6J("ngIf",i.model.options.sheetName)}}function Te(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",125),x._uU(1),x.TgZ(2,"button",126),x.NdJ("click",function(){return x.CHM(n),x.oxw().errorMessage=""}),x.qZA(),x.qZA()}if(2&e){var i=x.oxw();x.xp6(1),x.hij(" ",i.errorMessage," ")}}function Ae(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.qZA()),2&e){var n=x.oxw(2);x.xp6(1),x.hij("",n.percent,"%")}}function be(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"div",127),x.TgZ(2,"ngb-progressbar",128),x.YNc(3,Ae,2,1,"span",37),x.qZA(),x.qZA(),x.BQk()),2&e){var n=x.oxw();x.xp6(2),x.Q6J("value",n.percent)("animated",!0)("striped",!0),x.xp6(1),x.Q6J("ngIf",n.percent>10)}}var qe=function(){var e=function(e){o(r,e);var n=a(r);function r(e,i,o,a,l,s,d,c,u,p,g,f){var m;return t(this,r),(m=n.call(this,e,i,o,a,l,s,d)).fb=e,m.dataService=i,m.systemNameService=o,m.activeModal=a,m.tooltipConfig=l,m.translateService=s,m.elRef=d,m.modalService=c,m.settingsService=u,m.contentTypeService=p,m.appSettings=g,m.messageService=f,m.model=new C(0,""),m.modalTitle="Import",m.loadingConfiguration=!1,m.isInitialised=!1,m.sheetHeaders=[],m.contentTypes=[],m.percent=0,m.showProgressBar=!1,m.steps=[1],m.formFields={title:{fieldLabel:"TITLE",value:"",validators:[N.kI.required],messages:{}},fileData:{fieldLabel:"FILE",value:"",validators:[N.kI.required],messages:{}},rowNumberHeaders:{fieldLabel:"ROW_NUMBER_HEADERS",value:1,dataKey:"options",validators:[],messages:{}},rowNumberFirst:{fieldLabel:"ROW_NUMBER_FIRST",value:2,dataKey:"options",validators:[],messages:{}},rowNumberLast:{fieldLabel:"ROW_NUMBER_LAST",value:0,dataKey:"options",validators:[],messages:{}},categoriesSeparator:{fieldLabel:"SEPARATOR_CATEGORIES",value:"",dataKey:"options",validators:[],messages:{}}},m.files={},m}return i(r,[{key:"onBeforeInit",value:function(){this.model&&!this.model.options&&(this.model.options={})}},{key:"onAfterInit",value:function(){this.itemId&&this.getContentTypesList()}},{key:"onAfterGetData",value:function(){var e=this;setTimeout(function(){e.isInitialised=!0},1),this.model.options.contentType&&this.getContentType(),(!this.model.fieldsOptions||0===this.model.fieldsOptions.length)&&this.getSheetProperties(),this.updateStepsArr()}},{key:"getFileName",value:function(e){return"string"==typeof e?e:O.q.getFileName(e)}},{key:"onOptionChanged",value:function(){!this.isInitialised||(clearTimeout(this.timerConfiguration),this.timerConfiguration=setTimeout(this.getSheetProperties.bind(this),700))}},{key:"getContentTypesList",value:function(){this.contentTypes$=this.contentTypeService.getListPage().pipe((0,E.U)(function(e){return e.items}))}},{key:"getContentType",value:function(e){var t=this;e||(e=this.model.options.contentType),e?(this.loadingConfiguration=!0,this.contentTypeService.getItemByName(e).subscribe({next:function(e){t.contentType=e,t.loadingConfiguration=!1},error:function(e){e.error&&(t.errorMessage=e.error),t.contentType=null,t.loadingConfiguration=!1}})):this.contentType=null}},{key:"onChangeFieldAction",value:function(e,t,n){if(e.targetName="",e.targetTitle="",e.separator="",e.options=[],"delete"===t&&n){var i=(0,h.findIndex)(n.options,{targetAction:"delete"});i>-1&&n.options.splice(i,1)}}},{key:"getSheetProperties",value:function(e){var t=this;e&&e.preventDefault(),this.model.options.sheetName?(this.errorMessage="",this.loadingConfiguration=!0,this.dataService.getSheetProperties(this.model).subscribe({next:function(e){t.model.fieldsOptions=e.fieldsOptions,t.model.options.rowNumberLast=e.rowsQuantity,t.loadingConfiguration=!1},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.loadingConfiguration=!1}})):this.sheetHeaders=[]}},{key:"getTestData",value:function(e){var t=this;e&&e.preventDefault(),!this.loading&&!this.loadingConfiguration&&(this.errorMessage="",this.loadingConfiguration=!0,this.dataService.testData(this.model).subscribe({next:function(e){e?t.testData=e:t.errorMessage=t.getLangString("ERROR"),t.loadingConfiguration=!1},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.loadingConfiguration=!1}}))}},{key:"updateData",value:function(e){e&&e.preventDefault(),this.testData?this.getTestData():this.getSheetProperties()}},{key:"fieldAddOptions",value:function(e,t){t&&t.preventDefault(),e.options.push({targetAction:""})}},{key:"getIsFieldsCount",value:function(e,t){switch(t){case 1:return!e.targetAction||["category"].indexOf(e.targetAction)>-1;case 2:return["field","split"].indexOf(e.targetAction)>-1;case 3:return["new"].indexOf(e.targetAction)>-1}return!0}},{key:"getIsParametersField",value:function(e){return!!this.contentType&&this.contentType.fields.filter(function(e){return"parameters"===e.inputType}).map(function(e){return e.name}).indexOf(e)>-1}},{key:"getFieldsColumnClass",value:function(e,t){var n=[["split","field","new"],[]],i=["col-6 pe-2","col-4 pe-2"],o=this.getIsParametersField(e.targetName);"field_sub"==t&&(n=[["split"],["new"]],o?n[1].push("field"):n[0].push("field"),i=["col-6 pe-2","col-4 pe-2"]);var r="col-12";return n.forEach(function(t,n){t.indexOf(e.targetAction)>-1&&(r=i[n])}),r}},{key:"onStepNumberChange",value:function(){this.updateStepsArr()}},{key:"onImportCompleted",value:function(){this.showProgressBar=!1,this.loading=!1,this.activeModal.close({reason:"import_completed"})}},{key:"updateStepsArr",value:function(){this.steps=(0,h.range)(1,Math.max(1,parseInt(String(this.model.options.stepsNumber))+1)),this.model.options.step=1}},{key:"startImport",value:function(e){var t=this;if(e&&e.preventDefault(),!this.loading&&!this.loadingConfiguration){this.errorMessage="",this.testData=null,this.loading=!0,this.percent=0;var n=0,i="",o={};this.dataService.importDataProgress(this.model).subscribe({next:function(e){if(e instanceof A.Zn)t.updatePercent(100);else if(e instanceof A.ZM)200!==e.status&&400!==e.status&&t.onImportCompleted();else if(e.type===A.dt.DownloadProgress){var r=(i=e.partialText.substr(n).trim()).split("\n");i=r[r.length-1],n=e.partialText.length,"{"===i.substr(0,1)&&"}"===i.substr(i.length-1,1)&&(o=JSON.parse(i),t.updatePercent((o.currentIndex-o.rowNumberFirst)/(o.rowNumberLast-o.rowNumberFirst)*100))}},error:function(e){e.error&&e.error.indexOf("{")>-1&&(e.error=JSON.parse(e.error),e.error=e.error.error||t.getLangString("ERROR")),t.errorMessage=e.error||t.getLangString("ERROR"),t.showProgressBar=!1,t.loading=!1}})}}},{key:"updatePercent",value:function(e){var t=this;this.percent=Math.min(100,Math.floor(e)),this.percent>0&&!this.showProgressBar&&(this.showProgressBar=!0),100===this.percent&&setTimeout(function(){t.onImportCompleted()},1e3)}},{key:"confirmAction",value:function(e){return this.modalRef=this.modalService.open(_.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=e,this.modalRef.result}},{key:"clearTestData",value:function(e){e&&e.preventDefault(),this.testData=null}},{key:"saveRequest",value:function(){return this.isEditMode?this.dataService.update(this.getFormData()):this.dataService.create(this.getFormData())}}]),r}(M.D);return e.\u0275fac=function(t){return new(t||e)(x.Y36(N.qu),x.Y36(y),x.Y36(f.U),x.Y36(k.Kz),x.Y36(k.xI),x.Y36(I.sK),x.Y36(x.SBq),x.Y36(k.FF),x.Y36(g.g),x.Y36(w.s),x.Y36(S.d),x.Y36(Z.ez))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-modal-import"]],inputs:{model:"model"},features:[x._Bn([y,Z.ez]),x.qOj],decls:100,vars:88,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5",3,"title"],[1,"modal-body","py-0"],[3,"formGroup"],["formElement","ngForm"],[1,"row"],[1,"col-md-6"],[1,"mb-2","form-group-message"],["for","fieldTitle",1,"label-filled"],["type","text","id","fieldTitle","name","title","formControlName","title",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],[1,"mb-2"],["formControlName","fileData",3,"allowedExtensions","fieldName","largeFieldMode","files","ngModel","filesChange","ngModelChange"],["class","alert alert-danger d-block px-2 py-0 mt-2",4,"ngIf"],["for","fieldRowNumberHeaders",1,"label-filled"],["type","number","id","fieldRowNumberHeaders","step","1","min","1","name","rowNumberHeaders","formControlName","rowNumberHeaders",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-lg-6"],["for","fieldRowNumberFirst",1,"label-filled","max-width95"],[1,"text-overflow",3,"title"],["type","number","id","fieldRowNumberFirst","step","1","min","1","name","rowNumberFirst","formControlName","rowNumberFirst",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldRowNumberLast",1,"label-filled","max-width95"],["type","number","id","fieldRowNumberLast","step","1","min","1","name","rowNumberLast","formControlName","rowNumberLast",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldCategoriesSeparator",1,"label-filled"],["type","text","id","fieldCategoriesSeparator","name","categoriesSeparator","formControlName","categoriesSeparator",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldStepsNumber",1,"label-filled"],["type","number","id","fieldStepsNumber","step","1","min","1","max","100",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[4,"ngIf"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"alert","alert-danger"],[1,"alert","alert-danger","d-block","px-2","py-0","mt-2"],["for","fieldCSVSeparator",1,"label-filled","max-width95"],["type","text","id","fieldCSVSeparator","name","csvSeparator",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldCSVEnclosure",1,"label-filled","max-width95"],["type","text","id","fieldCSVEnclosure","name","csvEnclosure",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldCSVEncoding",1,"label-filled"],["type","text","id","fieldCSVEncoding","name","csvEncoding",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldSheetsNames",1,"label-filled"],["id","fieldSheetsNames",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"label-filled"],[3,"ngModel","ngModelChange"],[1,"form-select",3,"ngModel","ngModelChange"],["for","fieldArticulFieldName",1,"label-filled"],["id","fieldArticulFieldName",1,"form-select",3,"ngModel","ngModelChange"],["for","fieldAliasAdditionalFieldName",1,"label-filled","max-width95"],["id","fieldAliasAdditionalFieldName",1,"form-select",3,"ngModel","ngModelChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","ngModel","ngModelChange"],[1,"form-check-label",3,"for"],["class","card",4,"ngIf"],[3,"value"],[1,"card"],[1,"card-header"],[1,"float-none","float-lg-end","mb-2","mb-lg-0"],["class","d-inline-block me-2","style","width: 150px;",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-wide",3,"click"],["type","button",1,"btn","btn-secondary","me-2",3,"ngbTooltip","click"],[1,"icon-repeat"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"p-0"],[1,"max-height400"],[1,"table","border-top-0","my-0","bg-light"],[4,"ngFor","ngForOf"],[1,"d-inline-block","me-2",2,"width","150px"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","fieldStep",1,"form-select",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","no-gutters"],[3,"ngClass"],["value","category"],["value","field"],["value","translations"],["value","new"],["value","split"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-6","ps-2"],["type","text",1,"form-control",3,"ngbTooltip","ngModel","ngModelChange"],[1,"col-12","col-lg-8","offset-lg-4"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"text-center"],["type","button",1,"btn","btn-secondary","btn-sm","btn-wide",3,"click"],[1,"row","no-gutters","mb-3"],["value","delete"],[1,"col-4","px-1"],[1,"col-4","ps-2"],["class","col-4 px-1",4,"ngIf"],[1,"ps-2",3,"ngClass"],[1,"p-2","border-top"],[1,"position-relative"],[1,"position-absolute","pos-absolute-right2",2,"z-index","10"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"col-lg-5"],["class","table table-striped table-bordered bg-light table-sm mt-0",4,"ngIf"],[1,"table","table-striped","table-bordered","bg-light","table-sm","my-0"],["width","50%","span","2"],[1,"col-lg-7"],[1,"table-responsive"],["width","40%"],["width","60%"],["colspan","2"],[1,"table","table-striped","table-bordered","bg-light","table-sm","mt-0"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button",1,"btn-close",3,"click"],[1,"app-progress",2,"width","400px","position","absolute","left","50%","top","50%","margin-left","-200px","margin-top","50px","z-index","2222"],["type","success","height","1.4rem",3,"value","animated","striped"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"button",2),x.NdJ("click",function(e){return t.closeModal(e)}),x._UZ(3,"i",3),x.TgZ(4,"span"),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.qZA(),x.TgZ(7,"button",2),x.NdJ("click",function(e){return t.minimize(e)}),x._UZ(8,"i",4),x.TgZ(9,"span"),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",5),x.TgZ(13,"div",6),x.TgZ(14,"div",7),x.TgZ(15,"button",8),x.NdJ("click",function(e){return t.maximize(e)}),x.ALo(16,"translate"),x._UZ(17,"i",9),x.qZA(),x.TgZ(18,"button",10),x.NdJ("click",function(e){return t.closeModal(e)}),x.ALo(19,"translate"),x._UZ(20,"i",11),x.qZA(),x.qZA(),x.qZA(),x.TgZ(21,"h4",12),x._uU(22),x.qZA(),x.qZA(),x.TgZ(23,"div",13),x.TgZ(24,"form",14,15),x.TgZ(26,"div",16),x.TgZ(27,"div",17),x.TgZ(28,"div",18),x.TgZ(29,"label",19),x._uU(30),x.ALo(31,"translate"),x.qZA(),x.TgZ(32,"input",20),x.NdJ("ngModelChange",function(e){return t.model.title=e}),x.qZA(),x.YNc(33,U,2,1,"div",21),x.qZA(),x.qZA(),x.TgZ(34,"div",17),x.TgZ(35,"div",22),x.TgZ(36,"app-file-widget",23),x.NdJ("filesChange",function(e){return t.files=e})("ngModelChange",function(e){return t.model.fileData=e}),x.qZA(),x.YNc(37,J,2,1,"div",24),x.qZA(),x.qZA(),x.qZA(),x.TgZ(38,"div",16),x.TgZ(39,"div",17),x.TgZ(40,"div",18),x.TgZ(41,"label",25),x._uU(42),x.ALo(43,"translate"),x.qZA(),x.TgZ(44,"input",26),x.NdJ("ngModelChange",function(e){return t.model.options.rowNumberHeaders=e})("ngModelChange",function(){return t.onOptionChanged()}),x.qZA(),x.YNc(45,F,2,1,"div",21),x.qZA(),x.qZA(),x.TgZ(46,"div",17),x.TgZ(47,"div",16),x.TgZ(48,"div",27),x.TgZ(49,"div",18),x.TgZ(50,"label",28),x.TgZ(51,"span",29),x.ALo(52,"translate"),x._uU(53),x.ALo(54,"translate"),x.qZA(),x.qZA(),x.TgZ(55,"input",30),x.NdJ("ngModelChange",function(e){return t.model.options.rowNumberFirst=e}),x.qZA(),x.YNc(56,D,2,1,"div",21),x.qZA(),x.qZA(),x.TgZ(57,"div",27),x.TgZ(58,"div",18),x.TgZ(59,"label",31),x.TgZ(60,"span",29),x.ALo(61,"translate"),x._uU(62),x.ALo(63,"translate"),x.qZA(),x.qZA(),x.TgZ(64,"input",32),x.NdJ("ngModelChange",function(e){return t.model.options.rowNumberLast=e}),x.qZA(),x.YNc(65,Q,2,1,"div",21),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(66,"div",16),x.TgZ(67,"div",17),x.TgZ(68,"div",18),x.TgZ(69,"label",33),x._uU(70),x.ALo(71,"translate"),x.qZA(),x.TgZ(72,"input",34),x.NdJ("ngModelChange",function(e){return t.model.options.categoriesSeparator=e}),x.qZA(),x.YNc(73,Y,2,1,"div",21),x.qZA(),x.qZA(),x.TgZ(74,"div",17),x.TgZ(75,"div",22),x.TgZ(76,"label",35),x._uU(77),x.ALo(78,"translate"),x.qZA(),x.TgZ(79,"input",36),x.NdJ("ngModelChange",function(e){return t.model.options.stepsNumber=e})("ngModelChange",function(){return t.onStepNumberChange()}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(80,P,26,18,"ng-container",37),x.YNc(81,ve,60,44,"ng-container",37),x.YNc(82,Te,3,1,"div",38),x.YNc(83,be,4,4,"ng-container",37),x.qZA(),x.TgZ(84,"div",39),x.TgZ(85,"div",40),x.TgZ(86,"button",41),x.NdJ("click",function(e){return t.save(!0,e)}),x.TgZ(87,"span"),x._uU(88),x.ALo(89,"translate"),x.qZA(),x.qZA(),x.TgZ(90,"div",42),x._UZ(91,"button",43),x.TgZ(92,"div",44),x.TgZ(93,"button",45),x.NdJ("click",function(e){return t.save(!1,e)}),x._uU(94),x.ALo(95,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(96,"button",46),x.NdJ("click",function(e){return t.closeModal(e)}),x.TgZ(97,"span"),x._uU(98),x.ALo(99,"translate"),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(2),x.Q6J("disabled",t.submitted),x.xp6(3),x.Oqu(x.lcZ(6,57,"CLOSE")),x.xp6(2),x.Q6J("disabled",t.submitted),x.xp6(3),x.Oqu(x.lcZ(11,59,"MINIMIZE")),x.xp6(5),x.Q6J("title",x.lcZ(16,61,"EXPAND")),x.xp6(3),x.Q6J("title",x.lcZ(19,63,"CLOSE")),x.xp6(3),x.Q6J("title",t.modalTitle),x.xp6(1),x.Oqu(t.modalTitle),x.xp6(1),x.ekj("loading",t.loading),x.xp6(1),x.Q6J("formGroup",t.form),x.xp6(6),x.Oqu(x.lcZ(31,65,"TITLE")),x.xp6(2),x.ekj("is-invalid",t.formErrors.title),x.Q6J("ngModel",t.model.title),x.xp6(1),x.Q6J("ngIf",t.formErrors.title),x.xp6(3),x.Q6J("allowedExtensions",".xls,.xlsx,.csv")("fieldName","fileData")("largeFieldMode",!1)("files",t.files)("ngModel",t.model.fileData),x.xp6(1),x.Q6J("ngIf",t.formErrors.fileData),x.xp6(5),x.Oqu(x.lcZ(43,67,"ROW_NUMBER_HEADERS")),x.xp6(2),x.ekj("is-invalid",t.formErrors.rowNumberHeaders),x.Q6J("ngModel",t.model.options.rowNumberHeaders),x.xp6(1),x.Q6J("ngIf",t.formErrors.rowNumberHeaders),x.xp6(6),x.Q6J("title",x.lcZ(52,69,"ROW_NUMBER_FIRST")),x.xp6(2),x.Oqu(x.lcZ(54,71,"ROW_NUMBER_FIRST")),x.xp6(2),x.ekj("is-invalid",t.formErrors.rowNumberFirst),x.Q6J("ngModel",t.model.options.rowNumberFirst),x.xp6(1),x.Q6J("ngIf",t.formErrors.rowNumberFirst),x.xp6(4),x.Q6J("title",x.lcZ(61,73,"ROW_NUMBER_LAST")),x.xp6(2),x.Oqu(x.lcZ(63,75,"ROW_NUMBER_LAST")),x.xp6(2),x.ekj("is-invalid",t.formErrors.rowNumberLast),x.Q6J("ngModel",t.model.options.rowNumberLast),x.xp6(1),x.Q6J("ngIf",t.formErrors.rowNumberLast),x.xp6(5),x.Oqu(x.lcZ(71,77,"SEPARATOR_CATEGORIES")),x.xp6(2),x.ekj("is-invalid",t.formErrors.categoriesSeparator),x.Q6J("ngModel",t.model.options.categoriesSeparator),x.xp6(1),x.Q6J("ngIf",t.formErrors.categoriesSeparator),x.xp6(4),x.Oqu(x.lcZ(78,79,"STEPS_NUMBER")),x.xp6(2),x.Q6J("ngModel",t.model.options.stepsNumber)("ngModelOptions",x.DdM(87,K)),x.xp6(1),x.Q6J("ngIf","csv"==t.model.type),x.xp6(1),x.Q6J("ngIf",t.model.id),x.xp6(1),x.Q6J("ngIf",t.errorMessage),x.xp6(1),x.Q6J("ngIf",t.showProgressBar),x.xp6(3),x.Q6J("disabled",t.submitted&&t.form.valid),x.xp6(2),x.Oqu(x.lcZ(89,81,"SAVE_AND_CLOSE")),x.xp6(3),x.Q6J("disabled",t.submitted&&t.form.valid),x.xp6(3),x.Oqu(x.lcZ(95,83,"SAVE")),x.xp6(2),x.Q6J("disabled",t.submitted||t.loading),x.xp6(2),x.Oqu(x.lcZ(99,85,"CLOSE")))},directives:[N._Y,N.JL,N.sg,N.Fj,N.JJ,N.u,c.O5,L.E,N.qQ,N.wV,N.Fd,N.On,k.jt,k.iD,k.Vi,k.TH,N.EJ,N.YN,N.Kr,c.sg,R.F,N.Wl,k._L,c.mk,c.RF,c.n9,k.Ly],pipes:[I.X$,c.Ov,c.Nd,c.Ts],encapsulation:2}),e}(),xe=l(53332),ye=l(27965),Ne=function(){var n=function(n){o(l,n);var r=a(l);function l(e,n,i,o,a){var s;return t(this,l),(s=r.call(this,e,n,i,o)).dataService=e,s.activeModal=n,s.modalService=i,s.translateService=o,s.messageService=a,s.queryOptions=new T.J("id","desc",1,10,0,0),s.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"title",sortName:"title",title:"TITLE",outputType:"text",outputProperties:{}},{name:"fileSize",sortName:"fileSize",title:"FILE_SIZE_MB",outputType:"number",outputProperties:{}},{name:"type",sortName:"type",title:"FILE_TYPE",outputType:"text",outputProperties:{}},{name:"sheetsQuantity",sortName:"sheetsQuantity",title:"SHEETS_QUANTITY",outputType:"text",outputProperties:{}},{name:"rowsQuantity",sortName:"rowsQuantity",title:"ROWS_QUANTITY",outputType:"text",outputProperties:{}}],s}return i(l,[{key:"onModalClose",value:function(e){"import_completed"===(e&&e.reason?e.reason:"")&&this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("IMPORT_COMPLETED")})}},{key:"getModalContent",value:function(){return qe}},{key:"appendFormData",value:function(e){e.append("ownerType","import_export")}},{key:"getModalElementId",value:function(e){return["modal","export-config",e||0].join("-")}},{key:"setModalInputs",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e(s(l.prototype),"setModalInputs",this).call(this,t,n,i),this.modalRef.componentInstance.modalTitle=void 0===t||n?this.getLangString("ADD_IMPORT_CONFIGURATION"):"".concat(this.getLangString("EDIT_IMPORT_CONFIGURATION")," #").concat(t);var o=(0,h.findIndex)(this.items,{id:t});o>-1&&(this.modalRef.componentInstance.model=this.items[o])}}]),l}(v.U);return n.title="IMPORT_EXPORT",n.\u0275fac=function(e){return new(e||n)(x.Y36(y),x.Y36(k.Kz),x.Y36(k.FF),x.Y36(I.sK),x.Y36(Z.ez))},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-import"]],features:[x._Bn([y,Z.ez]),x.qOj],decls:22,vars:15,consts:[[1,"mb-3"],[1,"float-md-start"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2",3,"click"],[1,"icon-plus"],[1,"clearfix"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","loading","selectedIdsChange","loadingChange","actionRequest"],["table",""],["key","message","position","bottom-right"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x._UZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"button",4),x.TgZ(5,"span"),x._uU(6),x.ALo(7,"translate"),x.qZA(),x.qZA(),x.TgZ(8,"div",5),x.TgZ(9,"button",6),x.NdJ("click",function(){return t.deleteSelected()}),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"button",7),x.NdJ("click",function(){return t.modalOpen()}),x._UZ(13,"i",8),x._uU(14," \xa0 "),x.TgZ(15,"span"),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.qZA(),x.qZA(),x._UZ(18,"div",9),x.qZA(),x.TgZ(19,"app-table",10,11),x.NdJ("selectedIdsChange",function(e){return t.selectedIds=e})("loadingChange",function(e){return t.loading=e})("actionRequest",function(e){return t.actionRequest(e)}),x.qZA(),x._UZ(21,"p-toast",12)),2&e&&(x.xp6(6),x.Oqu(x.lcZ(7,9,"BATCH_ACTIONS")),x.xp6(4),x.Oqu(x.lcZ(11,11,"DELETE")),x.xp6(6),x.Oqu(x.lcZ(17,13,"ADD")),x.xp6(3),x.Q6J("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("loading",t.loading))},directives:[k.jt,k.iD,k.Vi,xe.a,ye.FN],pipes:[I.X$],styles:[""]}),n}(),Ee=function(){function e(n,i,o,r,a,l,s){t(this,e),this.id=n,this.title=i,this.fileData=o,this.type=r,this.fileSize=a,this.options=l,this.fieldsOptions=s,void 0===this.options&&e.setOptiontDefaults(this)}return i(e,null,[{key:"setOptiontDefaults",value:function(e){e.options||(e.options={}),e.options=Object.assign({parentId:0,contentType:"",categoryType:"column",categoriesSeparator:"",csvSeparator:";",csvEncoding:"UTF-8",csvEnclosure:'"'},e.options)}}]),e}(),Me=function(){var e=function(e){o(r,e);var n=a(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).setRequestUrl("export"),i}return i(r,[{key:"exportDataProgress",value:function(e){var t=this.getRequestUrl()+"/".concat(e.id,"/do_export");return this.http.request(new A.aW("POST",t,e,{reportProgress:!0,responseType:"text",headers:this.headers}))}}]),r}(q.D);return e.\u0275fac=function(t){return new(t||e)(x.LFG(A.eN))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac}),e}();function Ce(e,t){if(1&e&&(x.TgZ(0,"div",61),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.title," ")}}function Se(e,t){if(1&e&&(x.TgZ(0,"option",62),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.Oqu(n.title)}}function Oe(e,t){if(1&e&&(x.TgZ(0,"div",61),x._uU(1),x.qZA()),2&e){var n=x.oxw();x.xp6(1),x.hij(" ",n.formErrors.contentType," ")}}function we(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"div",16),x.TgZ(2,"div",17),x.TgZ(3,"div",22),x.TgZ(4,"label",63),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.TgZ(7,"input",64),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvSeparator=e}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",17),x.TgZ(9,"div",22),x.TgZ(10,"label",65),x._uU(11),x.ALo(12,"translate"),x.qZA(),x.TgZ(13,"input",66),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvEncoding=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(14,"div",16),x.TgZ(15,"div",17),x.TgZ(16,"div",22),x.TgZ(17,"label",67),x._uU(18),x.ALo(19,"translate"),x.qZA(),x.TgZ(20,"input",68),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw().model.options.csvEnclosure=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=x.oxw();x.xp6(5),x.Oqu(x.lcZ(6,6,"CSV_SEPARATOR")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvSeparator),x.xp6(4),x.Oqu(x.lcZ(12,8,"CSV_ENCODING")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvEncoding),x.xp6(5),x.Oqu(x.lcZ(19,10,"CSV_ENCLOSURE")),x.xp6(2),x.Q6J("ngModel",i.model.options.csvEnclosure)}}function _e(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"a",69),x._UZ(2,"i",70),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.BQk()),2&e){var n=x.oxw();x.xp6(1),x.hYB("href","",n.baseUrl,"/admin/files/download/",n.model.fileData.fileId,"",x.LSH),x.xp6(2),x.hij(" ",x.lcZ(4,3,"DOWNLOAD")," ")}}function ke(e,t){if(1&e&&(x.TgZ(0,"option",62),x._uU(1),x.qZA()),2&e){var n=t.$implicit;x.Q6J("value",n.name),x.xp6(1),x.hij(" ",n.title," ")}}function Ie(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"select",75),x.NdJ("ngModelChange",function(e){return x.CHM(n),x.oxw(2).$implicit.targetName=e})("ngModelChange",function(e){x.CHM(n);var t=x.oxw(2).$implicit;return x.oxw().onChangeFieldName(t,e)}),x.TgZ(2,"option",84),x._uU(3),x.ALo(4,"translate"),x.qZA(),x.YNc(5,ke,2,2,"option",34),x.qZA(),x.BQk()}if(2&e){var i=x.oxw(2).$implicit,o=x.oxw();x.xp6(1),x.Q6J("ngModel",i.targetName),x.xp6(2),x.Oqu(x.lcZ(4,3,"ID")),x.xp6(2),x.Q6J("ngForOf",o.contentType.fields)}}function Le(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"div",83),x.YNc(2,Ie,6,5,"ng-container",41),x.qZA(),x.BQk()),2&e){var n=x.oxw(2);x.xp6(2),x.Q6J("ngIf",n.contentType)}}function Re(e,t){if(1&e){var n=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td"),x.TgZ(3,"div",16),x.TgZ(4,"div",71),x._uU(5),x.qZA(),x.TgZ(6,"div",72),x.TgZ(7,"div",73),x.TgZ(8,"div",74),x.TgZ(9,"select",75),x.NdJ("ngModelChange",function(e){return x.CHM(n).$implicit.targetAction=e})("ngModelChange",function(e){var t=x.CHM(n),i=t.$implicit,o=t.index;return x.oxw().onChangeFieldAction(i,o,e)}),x.TgZ(10,"option",76),x._uU(11),x.ALo(12,"translate"),x.qZA(),x.TgZ(13,"option",77),x._uU(14),x.ALo(15,"translate"),x.qZA(),x.TgZ(16,"option",78),x._uU(17),x.ALo(18,"translate"),x.qZA(),x.TgZ(19,"option",79),x._uU(20),x.ALo(21,"translate"),x.qZA(),x.TgZ(22,"option",80),x._uU(23),x.ALo(24,"translate"),x.qZA(),x.qZA(),x.qZA(),x.ynx(25,81),x.YNc(26,Le,3,1,"ng-container",82),x.BQk(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){var i=t.$implicit,o=t.index,r=x.oxw();x.xp6(5),x.hij(" \u041a\u043e\u043b\u043e\u043d\u043a\u0430 #",o+1," "),x.xp6(3),x.Q6J("ngClass",r.getFieldsColumnClass(i)),x.xp6(1),x.Q6J("ngModel",i.targetAction),x.xp6(2),x.Oqu(x.lcZ(12,10,"CATEGORY")),x.xp6(3),x.Oqu(x.lcZ(15,12,"CATEGORIES_WITH_SEPARATOR")),x.xp6(3),x.Oqu(x.lcZ(18,14,"SELECT_FIELD")),x.xp6(3),x.Oqu(x.lcZ(21,16,"TRANSLATIONS")),x.xp6(3),x.hij("\xd7 ",x.lcZ(24,18,"DELETE"),""),x.xp6(2),x.Q6J("ngSwitch",i.targetAction),x.xp6(1),x.Q6J("ngSwitchCase","field")}}function Ue(e,t){if(1&e){var n=x.EpF();x.TgZ(0,"div",85),x._uU(1),x.TgZ(2,"button",86),x.NdJ("click",function(){return x.CHM(n),x.oxw().errorMessage=""}),x.qZA(),x.qZA()}if(2&e){var i=x.oxw();x.xp6(1),x.hij(" ",i.errorMessage," ")}}function Je(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.qZA()),2&e){var n=x.oxw(2);x.xp6(1),x.hij("",n.percent,"%")}}function Fe(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"div",87),x.TgZ(2,"ngb-progressbar",88),x.YNc(3,Je,2,1,"span",41),x.qZA(),x.qZA(),x.BQk()),2&e){var n=x.oxw();x.xp6(2),x.Q6J("value",n.percent)("animated",!0)("striped",!0),x.xp6(1),x.Q6J("ngIf",n.percent>10)}}var De=function(){var e=function(e){o(r,e);var n=a(r);function r(e,i,o,a,l,s,d,c,u,p,g){var f;return t(this,r),(f=n.call(this,e,i,o,a,l,s,d)).fb=e,f.dataService=i,f.systemNameService=o,f.activeModal=a,f.tooltipConfig=l,f.translateService=s,f.elRef=d,f.modalService=c,f.settingsService=u,f.contentTypeService=p,f.appSettings=g,f.model=new Ee(0,""),f.modalTitle="Export",f.loadingConfiguration=!1,f.isInitialised=!1,f.sheetHeaders=[],f.contentTypes=[],f.percent=0,f.showProgressBar=!1,f.baseUrl="",f.formFields={title:{fieldLabel:"TITLE",value:"",validators:[N.kI.required],messages:{}},parentId:{fieldLabel:"PARENT_FOLDER",value:"",dataKey:"options",validators:[],messages:{}},type:{fieldLabel:"FORMAT",value:"xls",validators:[],messages:{}},contentType:{fieldLabel:"CONTENT_TYPE",value:"",dataKey:"options",validators:[N.kI.required],messages:{}}},f}return i(r,[{key:"onBeforeInit",value:function(){this.model&&!this.model.options&&(this.model.options={}),this.model&&!this.model.fieldsOptions&&(this.model.fieldsOptions=[]),this.baseUrl=this.appSettings.settings.webApiUrl}},{key:"onAfterInit",value:function(){this.getContentTypesList()}},{key:"getContentTypesList",value:function(){this.contentTypes$=this.contentTypeService.getListPage().pipe((0,E.U)(function(e){return e.items}))}},{key:"getContentType",value:function(e){var t=this;e||(e=this.model.options.contentType),e?(this.loading=!0,this.contentTypeService.getItemByName(e).subscribe(function(e){t.contentType=e,t.loading=!1},function(e){e.error&&(t.errorMessage=e.error),t.contentType=null,t.loading=!1})):this.contentType=null}},{key:"updateFieldOptions",value:function(){var e=this;if(this.contentType){var t=(0,h.cloneDeep)(this.model.fieldsOptions);this.model.fieldsOptions=[],this.contentType.fields.forEach(function(n){var i=(0,h.findIndex)(t,{sourceName:n.name}),o=i>-1?t[i]:{};e.model.fieldsOptions.push({sourceTitle:o.sourceTitle||n.title,sourceName:o.sourceName||n.name,targetName:o.targetName||"",targetTitle:o.targetTitle||"",targetAction:o.targetAction||""})})}}},{key:"getFieldsColumnClass",value:function(e){var t=["col-6 pe-2","col-4 pe-2"],n="col-12";return[["field"],[]].forEach(function(i,o){i.indexOf(e.targetAction)>-1&&(n=t[o])}),n}},{key:"onChangeFieldAction",value:function(e,t,n){switch(e.targetName="",e.targetTitle="",e.separator="",e.options=[],n){case"delete":this.model.fieldsOptions.splice(t,1);break;case"category":e.targetTitle="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f";break;case"categories_splitted":e.targetTitle="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}}},{key:"onChangeFieldName",value:function(e,t){if("_id"===t)e.targetTitle="ID";else{var n=(0,h.findIndex)(this.contentType.fields,{name:t});e.targetTitle=this.contentType.fields[n].title}}},{key:"fieldOptionsAdd",value:function(e){e&&e.preventDefault(),this.model.fieldsOptions.push({targetAction:"category",targetTitle:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"})}},{key:"startExport",value:function(e){var t=this;if(e&&e.preventDefault(),!this.loading){this.errorMessage="",this.loading=!0,this.percent=0;var n=0,i="",o={};this.dataService.exportDataProgress(this.model).subscribe({next:function(e){if(e instanceof A.Zn)t.updatePercent(100);else if(!(e instanceof A.ZM)&&e.type===A.dt.DownloadProgress){var r=(i=e.partialText.substr(n).trim()).split("\n");i=r[r.length-1],n=e.partialText.length,"{"===i.substr(0,1)&&"}"===i.substr(i.length-1,1)&&(o=JSON.parse(i),t.updatePercent((o.currentIndex-o.rowNumberFirst)/(o.rowNumberLast-o.rowNumberFirst)*100))}},error:function(e){e.error&&e.error.indexOf("{")>-1&&(e.error=JSON.parse(e.error),e.error=e.error.error||t.getLangString("ERROR")),e.error&&(t.errorMessage=e.error),t.loading=!1,t.showProgressBar=!1}})}}},{key:"updatePercent",value:function(e){var t=this;this.percent=Math.min(100,Math.floor(e)),this.percent>0&&!this.showProgressBar&&(this.showProgressBar=!0),100===this.percent&&setTimeout(function(){t.showProgressBar=!1,t.loading=!1,t.getModelData()},1e3)}}]),r}(M.D);return e.\u0275fac=function(t){return new(t||e)(x.Y36(N.qu),x.Y36(Me),x.Y36(f.U),x.Y36(k.Kz),x.Y36(k.xI),x.Y36(I.sK),x.Y36(x.SBq),x.Y36(k.FF),x.Y36(g.g),x.Y36(w.s),x.Y36(S.d))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-modal-export"]],inputs:{model:"model"},features:[x._Bn([Me]),x.qOj],decls:117,vars:82,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5",3,"title"],[1,"modal-body","py-0"],[3,"formGroup"],["formElement","ngForm"],[1,"row"],[1,"col-md-6"],[1,"mb-2","mb-2-message","form-group-message"],["for","fieldTitle",1,"label-filled"],["type","text","id","fieldTitle","name","title","formControlName","title",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],[1,"mb-2"],[1,"label-filled"],["name","parentId","formControlName","parentId",3,"ngModel","ngModelChange"],["for","fieldType",1,"label-filled"],["id","fieldType","name","type","formControlName","type",1,"form-select",3,"ngModel","ngModelChange"],["value","xls"],["value","xlsx"],["value","csv"],[1,"mb-2","form-group-message"],["for","fieldContentType",1,"label-filled"],["id","fieldContentType","name","contentType","formControlName","contentType",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","fieldCategoryType",1,"label-filled"],["id","fieldCategoryType",1,"form-select",3,"ngModel","ngModelChange"],["value","column"],["value","row"],["for","fieldCategoriesSeparator",1,"label-filled"],["type","text","id","fieldCategoriesSeparator",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"card"],[1,"card-header"],[1,"float-end"],["type","button",1,"btn","btn-primary","btn-wide",3,"disabled","click"],[1,"p-0"],[1,"max-height400"],[1,"table","border-top-0","my-0","bg-light"],[4,"ngFor","ngForOf"],[1,"text-center","py-2"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"alert","alert-danger"],[3,"value"],["for","fieldCSVSeparator",1,"label-filled"],["type","text","id","fieldCSVSeparator","name","csvSeparator",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldCSVEncoding",1,"label-filled"],["type","text","id","fieldCSVEncoding","name","csvEncoding",1,"form-control",3,"ngModel","ngModelChange"],["for","fieldCSVEnclosure",1,"label-filled"],["type","text","id","fieldCSVEnclosure","name","csvEnclosure",1,"form-control",3,"ngModel","ngModelChange"],["target","_blank",1,"btn","btn-success",3,"href"],[1,"icon-download"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","no-gutters"],[3,"ngClass"],[1,"form-select",3,"ngModel","ngModelChange"],["value","category"],["value","categories_splitted"],["value","field"],["value","translations"],["value","delete"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-6","ps-2"],["value","_id"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button",1,"btn-close",3,"click"],[1,"app-progress",2,"width","400px","position","absolute","left","50%","top","50%","margin-left","-200px","margin-top","50px","z-index","2222"],["type","success","height","1.4rem",3,"value","animated","striped"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"button",2),x.NdJ("click",function(e){return t.closeModal(e)}),x._UZ(3,"i",3),x.TgZ(4,"span"),x._uU(5),x.ALo(6,"translate"),x.qZA(),x.qZA(),x.TgZ(7,"button",2),x.NdJ("click",function(e){return t.minimize(e)}),x._UZ(8,"i",4),x.TgZ(9,"span"),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",5),x.TgZ(13,"div",6),x.TgZ(14,"div",7),x.TgZ(15,"button",8),x.NdJ("click",function(e){return t.maximize(e)}),x.ALo(16,"translate"),x._UZ(17,"i",9),x.qZA(),x.TgZ(18,"button",10),x.NdJ("click",function(e){return t.closeModal(e)}),x.ALo(19,"translate"),x._UZ(20,"i",11),x.qZA(),x.qZA(),x.qZA(),x.TgZ(21,"h4",12),x._uU(22),x.qZA(),x.qZA(),x.TgZ(23,"div",13),x.TgZ(24,"form",14,15),x.TgZ(26,"div",16),x.TgZ(27,"div",17),x.TgZ(28,"div",18),x.TgZ(29,"label",19),x._uU(30),x.ALo(31,"translate"),x.qZA(),x.TgZ(32,"input",20),x.NdJ("ngModelChange",function(e){return t.model.title=e}),x.qZA(),x.YNc(33,Ce,2,1,"div",21),x.qZA(),x.qZA(),x.TgZ(34,"div",17),x.TgZ(35,"div",22),x.TgZ(36,"label",23),x._uU(37),x.ALo(38,"translate"),x.qZA(),x.TgZ(39,"app-select-parent-dropdown",24),x.NdJ("ngModelChange",function(e){return t.model.options.parentId=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(40,"div",16),x.TgZ(41,"div",17),x.TgZ(42,"div",22),x.TgZ(43,"label",25),x._uU(44),x.ALo(45,"translate"),x.qZA(),x.TgZ(46,"select",26),x.NdJ("ngModelChange",function(e){return t.model.type=e}),x.TgZ(47,"option",27),x._uU(48,"XLS"),x.qZA(),x.TgZ(49,"option",28),x._uU(50,"XLSX"),x.qZA(),x.TgZ(51,"option",29),x._uU(52,"CSV"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(53,"div",17),x.TgZ(54,"div",30),x.TgZ(55,"label",31),x._uU(56),x.ALo(57,"translate"),x.qZA(),x.TgZ(58,"select",32),x.NdJ("ngModelChange",function(e){return t.model.options.contentType=e})("ngModelChange",function(e){return t.getContentType(e)}),x._UZ(59,"option",33),x.YNc(60,Se,2,2,"option",34),x.ALo(61,"async"),x.qZA(),x.YNc(62,Oe,2,1,"div",21),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(63,"div",16),x.TgZ(64,"div",17),x.TgZ(65,"div",22),x.TgZ(66,"label",35),x._uU(67),x.ALo(68,"translate"),x.qZA(),x.TgZ(69,"select",36),x.NdJ("ngModelChange",function(e){return t.model.options.categoryType=e}),x.TgZ(70,"option",37),x._uU(71),x.ALo(72,"translate"),x.qZA(),x.TgZ(73,"option",38),x._uU(74),x.ALo(75,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(76,"div",17),x.TgZ(77,"div",22),x.TgZ(78,"label",39),x._uU(79),x.ALo(80,"translate"),x.qZA(),x.TgZ(81,"input",40),x.NdJ("ngModelChange",function(e){return t.model.options.categoriesSeparator=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(82,we,21,12,"ng-container",41),x.TgZ(83,"div",42),x.TgZ(84,"div",43),x.TgZ(85,"div",44),x.TgZ(86,"button",45),x.NdJ("click",function(e){return t.startExport(e)}),x._uU(87),x.ALo(88,"translate"),x.qZA(),x.qZA(),x.YNc(89,_e,5,5,"ng-container",41),x.qZA(),x.TgZ(90,"div",46),x.TgZ(91,"div",47),x.TgZ(92,"table",48),x.YNc(93,Re,27,20,"ng-container",49),x.TgZ(94,"tr"),x.TgZ(95,"td",50),x.TgZ(96,"button",51),x.NdJ("click",function(e){return t.fieldOptionsAdd(e)}),x._uU(97),x.ALo(98,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(99,Ue,3,1,"div",52),x.YNc(100,Fe,4,4,"ng-container",41),x.qZA(),x.TgZ(101,"div",53),x.TgZ(102,"div",54),x.TgZ(103,"button",55),x.NdJ("click",function(e){return t.save(!0,e)}),x.TgZ(104,"span"),x._uU(105),x.ALo(106,"translate"),x.qZA(),x.qZA(),x.TgZ(107,"div",56),x._UZ(108,"button",57),x.TgZ(109,"div",58),x.TgZ(110,"button",59),x.NdJ("click",function(e){return t.save(!1,e)}),x._uU(111),x.ALo(112,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(113,"button",60),x.NdJ("click",function(e){return t.closeModal(e)}),x.TgZ(114,"span"),x._uU(115),x.ALo(116,"translate"),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(2),x.Q6J("disabled",t.submitted),x.xp6(3),x.Oqu(x.lcZ(6,46,"CLOSE")),x.xp6(2),x.Q6J("disabled",t.submitted),x.xp6(3),x.Oqu(x.lcZ(11,48,"MINIMIZE")),x.xp6(5),x.Q6J("title",x.lcZ(16,50,"EXPAND")),x.xp6(3),x.Q6J("title",x.lcZ(19,52,"CLOSE")),x.xp6(3),x.Q6J("title",t.modalTitle),x.xp6(1),x.Oqu(t.modalTitle),x.xp6(1),x.ekj("loading",t.loading),x.xp6(1),x.Q6J("formGroup",t.form),x.xp6(6),x.Oqu(x.lcZ(31,54,"TITLE")),x.xp6(2),x.ekj("is-invalid",t.formErrors.title),x.Q6J("ngModel",t.model.title),x.xp6(1),x.Q6J("ngIf",t.formErrors.title),x.xp6(4),x.Oqu(x.lcZ(38,56,"PARENT_FOLDER")),x.xp6(2),x.Q6J("ngModel",t.model.options.parentId),x.xp6(5),x.Oqu(x.lcZ(45,58,"FORMAT")),x.xp6(2),x.Q6J("ngModel",t.model.type),x.xp6(10),x.Oqu(x.lcZ(57,60,"CONTENT_TYPE")),x.xp6(2),x.ekj("is-invalid",t.formErrors.contentType),x.Q6J("ngModel",t.model.options.contentType),x.xp6(2),x.Q6J("ngForOf",x.lcZ(61,62,t.contentTypes$)),x.xp6(2),x.Q6J("ngIf",t.formErrors.contentType),x.xp6(5),x.Oqu(x.lcZ(68,64,"SAVE_CATEGORIES_TYPE")),x.xp6(2),x.Q6J("ngModel",t.model.options.categoryType),x.xp6(2),x.Oqu(x.lcZ(72,66,"COLUMNS")),x.xp6(3),x.Oqu(x.lcZ(75,68,"ROWS")),x.xp6(5),x.Oqu(x.lcZ(80,70,"SEPARATOR_CATEGORIES")),x.xp6(2),x.Q6J("ngModel",t.model.options.categoriesSeparator),x.xp6(1),x.Q6J("ngIf","csv"==t.model.type),x.xp6(4),x.Q6J("disabled",0==t.model.fieldsOptions.length),x.xp6(1),x.hij(" ",x.lcZ(88,72,"EXPORT")," "),x.xp6(2),x.Q6J("ngIf",t.model.fileData),x.xp6(4),x.Q6J("ngForOf",t.model.fieldsOptions),x.xp6(4),x.hij(" ",x.lcZ(98,74,"ADD")," "),x.xp6(2),x.Q6J("ngIf",t.errorMessage),x.xp6(1),x.Q6J("ngIf",t.showProgressBar),x.xp6(3),x.Q6J("disabled",t.submitted&&t.form.valid),x.xp6(2),x.Oqu(x.lcZ(106,76,"SAVE_AND_CLOSE")),x.xp6(3),x.Q6J("disabled",t.submitted&&t.form.valid),x.xp6(3),x.Oqu(x.lcZ(112,78,"SAVE")),x.xp6(2),x.Q6J("disabled",t.submitted||t.loading),x.xp6(2),x.Oqu(x.lcZ(116,80,"CLOSE")))},directives:[N._Y,N.JL,N.sg,N.Fj,N.JJ,N.u,c.O5,R.F,N.EJ,N.YN,N.Kr,c.sg,N.On,k.jt,k.iD,k.Vi,k.TH,c.mk,c.RF,c.n9,k.Ly],pipes:[I.X$,c.Ov],encapsulation:2}),e}(),Qe=function(){var n=function(n){o(l,n);var r=a(l);function l(e,n,i,o,a){var s;return t(this,l),(s=r.call(this,e,n,i,o)).dataService=e,s.activeModal=n,s.modalService=i,s.translateService=o,s.messageService=a,s.queryOptions=new T.J("id","desc",1,10,0,0),s.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"title",sortName:"title",title:"TITLE",outputType:"text",outputProperties:{}},{name:"fileSize",sortName:"fileSize",title:"FILE_SIZE_MB",outputType:"number",outputProperties:{}},{name:"type",sortName:"type",title:"FILE_TYPE",outputType:"text",outputProperties:{}}],s}return i(l,[{key:"getModalContent",value:function(){return De}},{key:"getModalElementId",value:function(e){return["modal","import-config",e||0].join("-")}},{key:"setModalInputs",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e(s(l.prototype),"setModalInputs",this).call(this,t,n,i),this.modalRef.componentInstance.modalTitle=void 0===t||n?this.getLangString("ADD_EXPORT_CONFIGURATION"):"".concat(this.getLangString("EDIT_EXPORT_CONFIGURATION")," #").concat(t)}}]),l}(v.U);return n.title="IMPORT_EXPORT",n.\u0275fac=function(e){return new(e||n)(x.Y36(Me),x.Y36(k.Kz),x.Y36(k.FF),x.Y36(I.sK),x.Y36(Z.ez))},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-export"]],features:[x._Bn([Me,Z.ez]),x.qOj],decls:22,vars:15,consts:[[1,"mb-3"],[1,"float-md-start"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2",3,"click"],[1,"icon-plus"],[1,"clearfix"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","loading","selectedIdsChange","loadingChange","actionRequest"],["table",""],["key","message","position","bottom-right"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x._UZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"button",4),x.TgZ(5,"span"),x._uU(6),x.ALo(7,"translate"),x.qZA(),x.qZA(),x.TgZ(8,"div",5),x.TgZ(9,"button",6),x.NdJ("click",function(){return t.deleteSelected()}),x._uU(10),x.ALo(11,"translate"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"button",7),x.NdJ("click",function(){return t.modalOpen()}),x._UZ(13,"i",8),x._uU(14," \xa0 "),x.TgZ(15,"span"),x._uU(16),x.ALo(17,"translate"),x.qZA(),x.qZA(),x.qZA(),x._UZ(18,"div",9),x.qZA(),x.TgZ(19,"app-table",10,11),x.NdJ("selectedIdsChange",function(e){return t.selectedIds=e})("loadingChange",function(e){return t.loading=e})("actionRequest",function(e){return t.actionRequest(e)}),x.qZA(),x._UZ(21,"p-toast",12)),2&e&&(x.xp6(6),x.Oqu(x.lcZ(7,9,"BATCH_ACTIONS")),x.xp6(4),x.Oqu(x.lcZ(11,11,"DELETE")),x.xp6(6),x.Oqu(x.lcZ(17,13,"ADD")),x.xp6(3),x.Q6J("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("loading",t.loading))},directives:[k.jt,k.iD,k.Vi,xe.a,ye.FN],pipes:[I.X$],styles:[""]}),n}(),Ye=function(){return["/import-export/export"]},Pe=function(){return["/import-export/import"]},je=[{path:"",component:function(){var e=function(){function e(){t(this,e)}return i(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.title="IMPORT_EXPORT",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-import-export"]],decls:27,vars:13,consts:[[1,"position-relative"],[1,"tabs-top"],["href","","routerLinkActive","active",1,"btn","btn-outline-primary","d-block","d-md-inline-block","ms-md-2",3,"routerLink"],[1,"icon-outbox"],["href","","routerLinkActive","active",1,"btn","btn-outline-primary","d-block","d-md-inline-block","mb-2","mb-md-0",3,"routerLink"],[1,"icon-inbox"],[1,"card"],[1,"card-body"],[1,"float-md-start","mt-4","mt-md-0"],[1,"clearfix"],[1,"min-height400"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"a",2),x._UZ(3,"i",3),x._uU(4," \xa0 "),x.TgZ(5,"span"),x._uU(6),x.ALo(7,"translate"),x.qZA(),x.qZA(),x.TgZ(8,"a",4),x._UZ(9,"i",5),x._uU(10," \xa0 "),x.TgZ(11,"span"),x._uU(12),x.ALo(13,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(14,"div",6),x.TgZ(15,"div",7),x.TgZ(16,"div",8),x.TgZ(17,"h3"),x._UZ(18,"i",3),x._uU(19," \xa0 "),x.TgZ(20,"span"),x._uU(21),x.ALo(22,"translate"),x.qZA(),x.qZA(),x.qZA(),x._UZ(23,"div",9),x._UZ(24,"hr"),x.TgZ(25,"div",10),x._UZ(26,"router-outlet"),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(2),x.Q6J("routerLink",x.DdM(11,Ye)),x.xp6(4),x.Oqu(x.lcZ(7,5,"EXPORT")),x.xp6(2),x.Q6J("routerLink",x.DdM(12,Pe)),x.xp6(4),x.Oqu(x.lcZ(13,7,"IMPORT")),x.xp6(9),x.Oqu(x.lcZ(22,9,"IMPORT_EXPORT")))},directives:[m.yS,m.Od,m.lC],pipes:[I.X$],encapsulation:2}),e}(),children:[{path:"",redirectTo:"import"},{path:"import",component:Ne},{path:"export",component:Qe}]}],Be=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({imports:[[m.Bz.forChild(je)],m.Bz]}),e}(),He=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[g.g,f.U,y,Me,p.G],imports:[[c.ez,u.m,Be]]}),e}()},39343:function(e,n,o){o.d(n,{D:function(){return m}});var r,a=o(3679),l=o(79765),s=o(46782),d=o(63124),c=o(6887),u=o(12946),p=o(37716),g=o(95047),f=o(29790),m=((r=function(){function e(n,i,o,r,a,s,d){t(this,e),this.fb=n,this.dataService=i,this.systemNameService=o,this.activeModal=r,this.tooltipConfig=a,this.translateService=s,this.elRef=d,this.modalId="",this.submitted=!1,this.loading=!1,this.formErrors={},this.validationMessages={},this.formFields={},this.files={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},this.closeReason="canceled",this.uniqueId="",this.destroyed$=new l.xQ,a.placement="bottom",a.container="body",a.triggers="hover click"}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then(function(){e.onAfterGetData()}):this.onAfterGetData(),this.onAfterInit()}},{key:"onBeforeInit",value:function(){}},{key:"onAfterInit",value:function(){}},{key:"onAfterGetData",value:function(){}},{key:"getSystemFieldName",value:function(){return"name"}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"getModelData",value:function(){var e=this;return this.loading=!0,new Promise(function(t,n){e.dataService.getItem(e.itemId).pipe((0,s.R)(e.destroyed$)).subscribe({next:function(n){e.isItemCopy&&(n.id=null,n[e.getSystemFieldName()]=""),e.model=n,e.loading=!1,t(n)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,n(t)}})})}},{key:"buildForm",value:function(){var e=this,t=this.buildControls(this.formFields);this.form=this.fb.group(t),this.form.valueChanges.pipe((0,s.R)(this.destroyed$)).subscribe({next:function(t){return e.onValueChanged("form","",t)}})}},{key:"buildControls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"model",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i={};for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],l=r.dataKey?this[t][r.dataKey]:this[t];l[o]||(l[o]=r.value),i[o]=new a.NI({value:l[o]||"",disabled:r.disabled||!1},r.validators),this.formErrors[n+o]="",this.translateValidationMessages(n,o,r)}return i}},{key:"translateValidationMessages",value:function(e,t,n){var i=this,o={};!n.fieldLabel||(Object.keys(n.messages).forEach(function(e){"required"!==e&&i.translateService.get(String(n.messages[e])).subscribe(function(t){o[e]=t})}),n.validators.indexOf(a.kI.required)>-1&&this.translateService.get(n.fieldLabel).subscribe(function(e){i.translateService.get("FIELD_REQUIRED",{name:e}).subscribe(function(e){o.required=e})}),this.validationMessages[e+t]=o)}},{key:"getControl",value:function(e){return this.form.controls.name}},{key:"onValueChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this[e]){var n=this[e].value;for(var i in n)if(n.hasOwnProperty(i)){this.formErrors[t+i]="";var o=this[e].get(i);if(o&&(o.dirty||this[t+"submitted"])&&!o.valid)for(var r in o.errors)this.formErrors[t+i]+=this.validationMessages[t+i][r]?this.validationMessages[t+i][r]+" ":this.getLangString("ERROR")+" "}}}},{key:"displayToggle",value:function(e,t){e.style.display=(t=t||"none"===e.style.display)?"block":"none"}},{key:"toggleAccordion",value:function(e,t,n){e.activeIds.indexOf(t)>-1&&n||e.toggle(t)}},{key:"generateName",value:function(e){e.name=this.systemNameService.generateName(e.title||"")}},{key:"closeModal",value:function(e){e&&e.preventDefault(),this.activeModal.close({reason:this.itemId?"edit":"create",data:this.model})}},{key:"close",value:function(e){e&&e.preventDefault(),this.activeModal.dismiss(this.closeReason)}},{key:"minimize",value:function(e){e&&e.preventDefault(),window.document.body.classList.remove("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.remove("d-block"),t.classList.add("modal-minimized"),n.classList.add("d-none")}},{key:"maximize",value:function(e){e&&e.preventDefault(),window.document.body.classList.add("modal-open");var t=this.getRootElement(),n=t.previousElementSibling;t.classList.add("d-block"),t.classList.remove("modal-minimized"),n.classList.remove("d-none")}},{key:"getFormData",value:function(){var e=this,t={};return Object.keys(this.model).forEach(function(n){t[n]=e.files[n]?Array.isArray(e.model[n])?[u.O.getFileData(e.files[n])]:u.O.getFileData(e.files[n]):e.model[n]}),t}},{key:"fileChange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.target.files;i.length>0&&(this.model[t]=n?[u.O.getFileData(i[0])]:u.O.getFileData(i[0]),this.files[t]=i[0],this.form.controls[t].setValue(this.files[t].name))}},{key:"fileClear",value:function(e,t){this.model[e]=null,this.form.controls[e].reset(null),t.files=null,t.value="",delete this.files[e]}},{key:"onLocaleSwitch",value:function(){var e=this;if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach(function(t){e.model[t]=e.localePreviousValues[t]}),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach(function(t){e.localePreviousValues[t]=e.model[t]||"",e.model[t]=e.model.translations[t]&&e.model.translations[t][e.localeCurrent]||""})}},{key:"saveTranslations",value:function(e){var t=this;e&&e.preventDefault(),this.localeFieldsAllowed.forEach(function(e){t.model[e]?(t.model.translations[e]||(t.model.translations[e]={}),t.model.translations[e][t.localeCurrent]=t.model[e]):t.model.translations[e]&&(t.model.translations[e][t.localeCurrent]&&delete t.model.translations[e][t.localeCurrent],0===Object.keys(t.model.translations[e]).length&&delete t.model.translations[e])}),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()}},{key:"saveRequest",value:function(){return this.isEditMode?this.dataService.update(this.getFormData()):this.dataService.create(this.getFormData())}},{key:"onSubmit",value:function(){this.submitted=!0,this.closeModal()}},{key:"appendFormData",value:function(e){}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var n=new FormData;for(var i in this.files)this.files.hasOwnProperty(i)&&this.files[i]instanceof File&&n.append(i,this.files[i],this.files[i].name);n.append("itemId",String(e)),this.appendFormData(n),this.dataService.postFormData(n).pipe((0,s.R)(this.destroyed$)).subscribe({next:function(){t.closeModal()},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.submitted=!1,t.loading=!1}})}else this.closeModal()}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(n&&n.preventDefault(),this.submitted=!0,this.errorMessage="",!this.form.valid)return this.onValueChanged("form"),void(this.submitted=!1);this.loading=!0,this.saveRequest().pipe((0,s.R)(this.destroyed$)).subscribe({next:function(n){Object.keys(e.files).length>0?e.saveFiles(n._id||n.id):(t?e.closeModal():n&&n.id&&(e.model=n,e.onAfterGetData(),e.isEditMode=!0),e.closeReason="updated",e.loading=!1,e.submitted=!1)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,e.submitted=!1}})}},{key:"emailValidator",value:function(e){return e.value?/\S+@\S+\.\S+/.test(e.value)?void 0:{email:!0}:{required:!0}}},{key:"getRootElement",value:function(){return this.elRef.nativeElement.parentNode.parentNode.parentNode}},{key:"createUniqueId",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}()).\u0275fac=function(e){return new(e||r)(p.Y36(a.qu),p.Y36(c.D),p.Y36(d.U),p.Y36(g.Kz),p.Y36(g.xI),p.Y36(f.sK),p.Y36(p.SBq))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ng-component"]],inputs:{modalTitle:"modalTitle",itemId:"itemId",modalId:"modalId",isItemCopy:"isItemCopy",isEditMode:"isEditMode"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),r)},3677:function(e,n,o){o.d(n,{U:function(){return m}});var r,a=o(79765),l=o(46782),s=o(35930),d=o(6887),c=o(90660),u=o(37716),p=o(95047),g=o(29790),f=["table"],m=((r=function(){function e(n,i,o,r){t(this,e),this.dataService=n,this.activeModal=i,this.modalService=o,this.translateService=r,this.items=[],this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new s.J("name","asc",1,10,0,0),this.destroyed$=new a.xQ}return i(e,[{key:"ngOnInit",value:function(){this.getList(),this.afterInit()}},{key:"afterInit",value:function(){}},{key:"onSearchClear",value:function(){this.getList()}},{key:"onModalClose",value:function(e){}},{key:"onSearchWordUpdate",value:function(e){var t=this;if(void 0!==e)return this.queryOptions.search_word=e,this.queryOptions.page=1,void(this.queryOptions.search_word?this.getList():this.onSearchClear());clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){t.queryOptions.page=1,t.getList()},700)}},{key:"getModalElementId",value:function(e){return["modal",e||0].join("-")}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=void 0!==e&&!t;this.modalRef.componentInstance.modalTitle=this.getLangString(i?"EDITING":"ADD"),this.modalRef.componentInstance.modalId=n,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=t||!1,this.modalRef.componentInstance.isEditMode=i}},{key:"modalOpen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getModalElementId(e);if(window.document.body.classList.add("modal-open"),window.document.getElementById(i)){var o=window.document.getElementById(i),r=o.previousElementSibling;return o.classList.add("d-block"),o.classList.remove("modal-minimized"),void r.classList.remove("d-none")}this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1,backdropClass:"modal-backdrop-left45",windowClass:"modal-left45",container:"#modals-container"}),this.setModalInputs(e,n,i),this.modalRef.result.then(function(e){t.destroyed$.isStopped||(t.onModalClose(e),t.getList())},function(e){t.destroyed$.isStopped||(t.onModalClose(e),e&&["submit","updated"].indexOf(e)>-1&&t.getList())})}},{key:"deleteItemConfirm",value:function(e){var t=this;this.modalRef=this.modalService.open(c.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then(function(n){"accept"===n&&t.deleteItem(e)})}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"confirmAction",value:function(e){return this.modalRef=this.modalService.open(c.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=e,this.modalRef.result}},{key:"blockSelected",value:function(){var e=this;0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe(function(t){e.clearSelected(),e.getList()},function(t){return e.showAlert(t.error||e.getLangString("ERROR"))}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"deleteSelected",value:function(){var e=this;0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then(function(t){"accept"===t&&e.dataService.actionBatch(e.selectedIds,"delete").subscribe(function(t){e.clearSelected(),e.getList()},function(t){return e.showAlert(t.error||e.getLangString("ERROR"))})}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"showAlert",value:function(e){this.modalRef=this.modalService.open(c.$N),this.modalRef.componentInstance.modalContent=e,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"}},{key:"deleteItem",value:function(e){var t=this;this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then(function(n){"accept"===n&&t.dataService.deleteItem(e).subscribe(function(e){t.getList()},function(e){e.error&&t.showAlert(e.error)})})}},{key:"clearSelected",value:function(){this.table&&this.table.clearSelected()}},{key:"actionRequest",value:function(e){switch(e[0]){case"edit":this.modalOpen(e[1]);break;case"copy":this.modalOpen(e[1],!0);break;case"delete":this.deleteItem(e[1]);break;case"changeQuery":this.getList()}}},{key:"getList",value:function(){var e=this;this.loading=!0,this.dataService.getListPage(this.queryOptions).pipe((0,l.R)(this.destroyed$)).subscribe({next:function(t){e.items=t.items,e.collectionSize=t.total,e.loading=!1},error:function(t){e.items=[],e.collectionSize=0,t.error&&e.showAlert(t.error),e.loading=!1}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}()).title="",r.\u0275fac=function(e){return new(e||r)(u.Y36(d.D),u.Y36(p.Kz),u.Y36(p.FF),u.Y36(g.sK))},r.\u0275dir=u.lG2({type:r,viewQuery:function(e,t){var n;1&e&&u.Gf(f,7),2&e&&u.iGM(n=u.CRH())&&(t.table=n.first)}}),r)},49103:function(e,n,i){i.d(n,{e:function(){return o}});var o=function e(n,i,o,r,a){t(this,e),this.changed=n,this.loading=i,this.values=o,this.defaultOptions=r,this.defaultValues=a}},99639:function(e,n,o){o.d(n,{g:function(){return u}});var r,a=o(91841),l=o(25917),s=o(5304),d=(o(49103),o(73844)),c=o(37716),u=((r=function(){function e(n){t(this,e),this.http=n,this.headers=new a.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="",this.baseUrl="",this.requestUrl="/admin/settings",this.baseUrl=d.d.getBaseUrl()}return i(e,[{key:"setRequestUrl",value:function(e){this.requestUrl=e}},{key:"getRequestUrl",value:function(){return this.requestUrl}},{key:"getList",value:function(){return this.http.get(this.getRequestUrl()).pipe((0,s.K)(this.handleError()))}},{key:"clearSystemCache",value:function(){var e=this.getRequestUrl()+"/clear_system_cache";return this.http.post(e,{},{headers:this.headers}).pipe((0,s.K)(this.handleError()))}},{key:"runActionPost",value:function(e){var t=this.getRequestUrl()+"/".concat(e);return this.http.post(t,{},{headers:this.headers}).pipe((0,s.K)(this.handleError()))}},{key:"updateGroup",value:function(e,t){var n=this.getRequestUrl()+"/".concat(e);return this.http.put(n,t,{headers:this.headers}).pipe((0,s.K)(this.handleError()))}},{key:"getComposerPackagesList",value:function(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe((0,s.K)(this.handleError()))}},{key:"composerRequirePackage",value:function(e,t){var n=this.getRequestUrl()+"_composer_require_package";return this.http.post(n,{packageName:e,packageVersion:t},{headers:this.headers}).pipe((0,s.K)(this.handleError()))}},{key:"postFormData",value:function(e,t){var n=new a.WM({enctype:"multipart/form-data",Accept:"application/json","X-Requested-With":"XMLHttpRequest"});return this.http.post(this.baseUrl+t,e,{headers:n}).pipe((0,s.K)(this.handleError()))}},{key:"runAction",value:function(e){return this.http.post(this.baseUrl+e,{},{headers:this.headers}).pipe((0,s.K)(this.handleError()))}},{key:"handleError",value:function(){var e=this,t=arguments.length>1?arguments[1]:void 0;return function(n){if(!(n.status&&[401,403].indexOf(n.status)>-1)){if(n.error)throw n.error;return(0,l.of)(t)}window.location.href=e.baseUrl+"/login"}}}]),e}()).\u0275fac=function(e){return new(e||r)(c.LFG(a.eN))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)}}])}();