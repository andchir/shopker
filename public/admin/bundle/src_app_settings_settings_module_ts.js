"use strict";(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_settings_settings_module_ts"],{843:(v,Z,_)=>{_.d(Z,{e:()=>T});class T{constructor(c,h,d,p,S){this.changed=c,this.loading=h,this.values=d,this.defaultOptions=p,this.defaultValues=S}}},7452:(v,Z,_)=>{_.r(Z),_.d(Z,{SettingsModule:()=>Ot});var T=_(6019),C=_(7367),c=_(8922),h=_(3405),d=_(8805),p=_(3132),S=_(481),g=_(843),x=_(6721),r=_(1562),m=_(3961),t=_(3668),u=_(7283),f=_(8319);const q=["filesWidget"];function U(n,s){1&n&&t._UZ(0,"i",16)}function I(n,s){1&n&&t._UZ(0,"i",16)}function R(n,s){1&n&&t._UZ(0,"i",16)}function L(n,s){1&n&&t._UZ(0,"i",17)}function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"app-file-widget",19,20),t.TgZ(3,"div",21),t.TgZ(4,"button",22),t.NdJ("click",function(o){return t.CHM(e),t.oxw().skipStepHandler(o)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(1),t.Q6J("hasPreviewImage",!1)("allowMultiple",!1)("allowedExtensions",".zip"),t.xp6(4),t.hij(" ",t.lcZ(6,4,"SKIP")," "))}function G(n,s){if(1&n&&(t.TgZ(0,"pre",28),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.changelogContent)}}function P(n,s){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",23),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"br"),t._uU(7),t.ALo(8,"translate"),t.TgZ(9,"b",24),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"ngb-accordion",25),t.TgZ(12,"ngb-panel",26),t.ALo(13,"translate"),t.YNc(14,G,2,1,"ng-template",27),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"CURRENT_VERSION"),": "),t.xp6(3),t.Oqu(e.currentVersion),t.xp6(2),t.hij(" ",t.lcZ(8,7,"NEW_VERSION"),": "),t.xp6(3),t.Oqu(e.version),t.xp6(2),t.Q6J("title",t.lcZ(13,9,"CHANGELOG"))}}function k(n,s){if(1&n&&(t.TgZ(0,"div",29),t._UZ(1,"ngb-progressbar",30),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("striped",!0)("animated",!0)("value",e.updatePercent)("showValue",!0)}}function w(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",31),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().errorMessage=""}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.errorMessage)," ")}}const y=function(n){return{"no-events loading":n}},N=function(n){return{"text-muted":n}};let D=(()=>{class n{constructor(e,i,o){this.activeModal=e,this.dataService=i,this.appSettings=o,this.loading=!1,this.destroyed$=new h.xQ,this.stepNumber=1,this.updatePercent=0,this.isUpdateStarted=!1,this.isCollapsed=!0}ngOnInit(){this.currentVersion=this.appSettings.settings.version}nextStepHandler(e){switch(e&&e.preventDefault(),this.errorMessage="",this.stepNumber){case 1:if(0===this.filesWidget.filesRaw.length)return void(this.errorMessage="PLEASE_SELECT_FILE");this.isUpdateStarted=!1;const i=new FormData;i.append("file",this.filesWidget.filesRaw[0]),this.loading=!0,this.dataService.postFormData(i,"admin/system_update/upload").pipe((0,d.R)(this.destroyed$)).subscribe({next:o=>{this.loading=!1,this.stepNumber=2},error:o=>{o.error&&(this.errorMessage=o.error),this.loading=!1}});break;case 2:this.loading=!0,this.dataService.runAction("admin/system_update/pre_update").pipe((0,d.R)(this.destroyed$)).subscribe({next:o=>{this.stepNumber=3,this.version=o.version||"",this.changelogContent=o.changelogContent||"",this.loading=!1},error:o=>{o.error&&(this.errorMessage=o.error),this.loading=!1}});break;case 3:this.updateRunStep("vendors")}}skipStepHandler(e){e&&e.preventDefault(),this.errorMessage="",this.stepNumber++}updateRunStep(e){const i=["vendor","src","template","config"],o=i.indexOf(e);0===o&&(this.loading=!0,this.isUpdateStarted=!0,this.updatePercent=0),this.dataService.runAction(`admin/system_update/execute/${e}`).pipe((0,d.R)(this.destroyed$)).subscribe({next:l=>{this.updatePercent=(o+1)/i.length*100,100===this.updatePercent?(this.stepNumber=4,setTimeout(this.onUpdateComplete.bind(this),1e3)):this.updateRunStep(i[o+1])},error:l=>{l.error&&(this.errorMessage=l.error),this.loading=!1,this.isUpdateStarted=!1,this.updatePercent=0}})}closeModal(e){this.activeModal.close(e)}onUpdateComplete(){this.loading=!1,this.closeModal("completed")}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.Kz),t.Y36(r.g),t.Y36(x.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal-file-upload"]],viewQuery:function(e,i){if(1&e&&t.Gf(q,5),2&e){let o;t.iGM(o=t.CRH())&&(i.filesWidget=o.first)}},decls:34,vars:42,consts:[[3,"ngClass"],[1,"modal-header","d-block"],[1,"modal-title","text-success"],[1,"icon-arrow-up-circle"],[1,"modal-body"],[1,"mb-3",3,"ngClass"],["class","icon-check-circle me-2 text-success",4,"ngIf","ngIfElse"],["iconCircleTemplate",""],["class","show-on-hover-parent",4,"ngIf"],[4,"ngIf"],["class","py-4",4,"ngIf"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block","pt-0"],["type","button",1,"btn","btn-primary","btn-wide",3,"disabled","click"],[1,"icon-arrow-right","ms-2"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"icon-check-circle","me-2","text-success"],[1,"icon-circle","me-2"],[1,"show-on-hover-parent"],["fieldName","file",3,"hasPreviewImage","allowMultiple","allowedExtensions"],["filesWidget",""],[1,"pos-absolute-left-bottom10","show-on-hover"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"text-success","mb-2"],[1,"big"],[1,"ngb-accordion"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],[1,"max-height400","mb-0"],[1,"py-4"],["type","info","textType","white",3,"striped","animated","value","showValue"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button","data-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div"),t.TgZ(8,"div",5),t.YNc(9,U,1,0,"i",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",5),t.YNc(13,I,1,0,"i",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",5),t.YNc(17,R,1,0,"i",6),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,L,1,0,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(22,O,7,6,"div",8),t.YNc(23,P,15,11,"div",9),t.YNc(24,k,2,4,"div",10),t.YNc(25,w,4,3,"div",11),t.qZA(),t.TgZ(26,"div",12),t.TgZ(27,"button",13),t.NdJ("click",function(l){return i.nextStepHandler(l)}),t._uU(28),t.ALo(29,"translate"),t._UZ(30,"i",14),t.qZA(),t.TgZ(31,"button",15),t.NdJ("click",function(){return i.closeModal("close")}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(21);t.Q6J("ngClass",t.VKq(34,y,i.loading)),t.xp6(4),t.hij(" ",t.lcZ(5,22,"SYSTEM_UPDATE")," "),t.xp6(4),t.Q6J("ngClass",t.VKq(36,N,1!=i.stepNumber)),t.xp6(1),t.Q6J("ngIf",i.stepNumber>1)("ngIfElse",o),t.xp6(1),t.hij(" ",t.lcZ(11,24,"SYSTEM_UPDATE_STEP1_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(38,N,2!=i.stepNumber)),t.xp6(1),t.Q6J("ngIf",i.stepNumber>2)("ngIfElse",o),t.xp6(1),t.hij(" ",t.lcZ(15,26,"SYSTEM_UPDATE_STEP2_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(40,N,3!=i.stepNumber)),t.xp6(1),t.Q6J("ngIf",i.stepNumber>3)("ngIfElse",o),t.xp6(1),t.hij(" ",t.lcZ(19,28,"SYSTEM_UPDATE_STEP3_DESCRIPTION")," "),t.xp6(4),t.Q6J("ngIf",1==i.stepNumber),t.xp6(1),t.Q6J("ngIf",3==i.stepNumber&&!i.isUpdateStarted),t.xp6(1),t.Q6J("ngIf",i.isUpdateStarted),t.xp6(1),t.Q6J("ngIf",i.errorMessage),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(29,30,"CONTINUE")," "),t.xp6(3),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(33,32,"CLOSE")," ")}},directives:[T.mk,T.O5,m.E,u.gY,u.Gk,u.gW,u.Ly],pipes:[f.X$],encapsulation:2}),n})();var A=_(4462),J=_(397),Y=_(4750),H=_(9430),E=_(9133),V=_(7043),Q=_(5849);let F=(()=>{class n{transform(e,i){if(i&&Array.isArray(e)){const o=Object.keys(i);return e.filter(l=>o.reduce((a,M)=>a&&l[M].indexOf(i[M])>-1,!0))}return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"filter",type:n,pure:!1}),n})();function j(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"PARAMETER")),t.xp6(3),t.Oqu(t.lcZ(6,4,"VALUE")))}function $(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onRowEditInit(o)}),t.ALo(1,"translate"),t.qZA()}2&n&&t.Q6J("pTooltip",t.lcZ(1,1,"EDIT"))}function K(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onRowEditSave(o)}),t.ALo(1,"translate"),t.qZA()}2&n&&t.Q6J("pTooltip",t.lcZ(1,1,"SAVE"))}function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),l=o.$implicit,a=o.rowIndex;return t.oxw().onRowEditCancel(l,a)}),t.ALo(1,"translate"),t.qZA()}2&n&&t.Q6J("pTooltip",t.lcZ(1,1,"CANCEL"))}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"input",48),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().$implicit.value=o}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.value)}}const z=function(n){return{"text-password":n}};function X(n,s){if(1&n&&(t.TgZ(0,"div",49),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("title",e.value)("ngClass",t.VKq(3,z,"password"==i.getFieldTypeByName(e))),t.xp6(1),t.hij(" ",e.value," ")}}function tt(n,s){if(1&n&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t.TgZ(2,"div",32),t.TgZ(3,"div",33),t.TgZ(4,"div",34),t.TgZ(5,"span",35),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",36),t.ALo(8,"translate"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"td",31),t.TgZ(12,"div",37),t.TgZ(13,"div",38),t.YNc(14,$,2,3,"button",39),t.YNc(15,K,2,3,"button",40),t.YNc(16,B,2,3,"button",41),t.qZA(),t.TgZ(17,"p-cellEditor",42),t.YNc(18,W,1,1,"ng-template",43),t.YNc(19,X,2,5,"ng-template",44),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=s.$implicit,i=s.editing;t.Q6J("pEditableRow",e),t.xp6(6),t.Oqu(e.name),t.xp6(1),t.Q6J("title",t.lcZ(8,11,e.name)),t.xp6(2),t.hij(" ",t.lcZ(10,13,e.name)," "),t.xp6(4),t.ekj("pos-top",i)("pos-top-5",!i),t.xp6(1),t.Q6J("ngIf",!i),t.xp6(1),t.Q6J("ngIf",i),t.xp6(1),t.Q6J("ngIf",i)}}function et(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",58),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",58),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",59),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"NAME")),t.xp6(3),t.Oqu(t.lcZ(6,5,"MAIL_TEMPLATE")),t.xp6(3),t.Oqu(t.lcZ(9,7,"COLOR")))}function nt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.template.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"p-colorPicker",61),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.color.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_ORDER_STATUSES",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.template.value),t.xp6(2),t.Q6J("appendTo","body")("ngModel",e.options.color.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,5,"DELETE"))}}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_ORDER_STATUSES")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_ORDER_STATUSES")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"p-table",52),t.YNc(6,et,11,9,"ng-template",18),t.YNc(7,nt,10,7,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,it,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_ORDER_STATUSES")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_DELIVERY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_STATUSES_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_ORDER_STATUSES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_ORDER_STATUSES.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function st(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",58),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",68),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",68),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"NAME")),t.xp6(3),t.Oqu(t.lcZ(6,5,"PRICE")),t.xp6(3),t.Oqu(t.lcZ(9,7,"MAX_PRICE")))}function lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",69),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.price.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"input",69),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.priceLimit.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_DELIVERY",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.price.value),t.xp6(2),t.Q6J("ngModel",e.options.priceLimit.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,4,"DELETE"))}}function at(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_DELIVERY")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_DELIVERY")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function _t(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",67),t.TgZ(5,"p-table",52),t.YNc(6,st,11,9,"ng-template",18),t.YNc(7,lt,10,6,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,at,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_DELIVERY")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_DELIVERY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_DELIVERY_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_DELIVERY.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_DELIVERY.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function rt(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",70),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",70),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"NAME")),t.xp6(3),t.Oqu(t.lcZ(6,4,"VALUE")))}function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.value.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_PAYMENT",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_PAYMENT")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_PAYMENT")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function ct(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",67),t.TgZ(5,"p-table",52),t.YNc(6,rt,8,6,"ng-template",18),t.YNc(7,pt,8,5,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,gt,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_PAYMENT")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_PAYMENT.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_PAYMENT_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_PAYMENT.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_PAYMENT.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function dt(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",70),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",70),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"CURRENCY")),t.xp6(3),t.Oqu(t.lcZ(6,4,"VALUE")))}function ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",69),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.value.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_CURRENCY",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function Tt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_CURRENCY")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_CURRENCY")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",67),t.TgZ(5,"p-table",52),t.YNc(6,dt,8,6,"ng-template",18),t.YNc(7,ut,8,5,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,Tt,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_CURRENCY")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_CURRENCY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_CURRENCY_RATE_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_CURRENCY.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_CURRENCY.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function St(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",71),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",71),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",71),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"PROMO_CODE")),t.xp6(3),t.Oqu(t.lcZ(6,5,"VALUE")),t.xp6(3),t.Oqu(t.lcZ(9,7,"QUANTITY")))}function Zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.value.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"input",72),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.quantity.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_PROMOCODES",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("ngModel",e.options.quantity.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,4,"DELETE"))}}function At(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_PROMOCODES")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_PROMOCODES")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function ht(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",67),t.TgZ(5,"p-table",52),t.YNc(6,St,11,9,"ng-template",18),t.YNc(7,Zt,10,6,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,At,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_PROMOCODES")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_PROMOCODES.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_PROMOCODES_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_PROMOCODES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_PROMOCODES.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function Et(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",70),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",70),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"th",59),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"LANGUAGE")),t.xp6(3),t.Oqu(t.lcZ(6,4,"LOCALE")))}function Ct(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",60),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.options.value.value=o})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"button",62),t.NdJ("click",function(){const l=t.CHM(e).rowIndex;return t.oxw(2).deleteSetting("SETTINGS_LANGUAGES",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function xt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_LANGUAGES")}),t._UZ(2,"i",64),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_LANGUAGES")}),t.ALo(9,"translate"),t._UZ(10,"i",66),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("pTooltip",t.lcZ(9,4,"FORM_RESET")))}function ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",67),t.TgZ(5,"p-table",52),t.YNc(6,Et,8,6,"ng-template",18),t.YNc(7,Ct,8,5,"ng-template",19),t.qZA(),t.TgZ(8,"div",53),t.TgZ(9,"div",54),t.YNc(10,xt,11,6,"div",55),t.qZA(),t.TgZ(11,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_LANGUAGES")}),t._UZ(12,"i",57),t._uU(13," \xa0 "),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_LANGUAGES.loading),t.xp6(2),t.hij(" ",t.lcZ(3,6,"SETTINGS_LANGUAGES_DESCRIPTION")," "),t.xp6(3),t.Q6J("value",e.settings.SETTINGS_LANGUAGES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_LANGUAGES.changed),t.xp6(5),t.Oqu(t.lcZ(16,8,"ADD"))}}function Nt(n,s){1&n&&(t.TgZ(0,"div",92),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function Mt(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",94),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",58),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"NAME")),t.xp6(3),t.Oqu(t.lcZ(6,4,"VERSION")))}function vt(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.version," ")}}const b=function(n){return{name:n}};function bt(n,s){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",67),t.TgZ(2,"p-table",93),t.ALo(3,"filter"),t.YNc(4,Mt,7,6,"ng-template",18),t.YNc(5,vt,5,2,"ng-template",19),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("value",t.xi3(3,2,e.composerPackages,t.VKq(5,b,e.composerPackageNameFilter)))("scrollable",!0)}}const qt=function(n){return{loading:n}},Ut=function(n){return{"form-control-search-clear":n}};function It(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",73),t.TgZ(1,"div",74),t.TgZ(2,"div",75),t.TgZ(3,"button",76),t.NdJ("click",function(o){return t.CHM(e),t.oxw().modalSystemUpdate(o)}),t._UZ(4,"i",77),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",78),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",79),t.TgZ(11,"input",80),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().composerPackageNameFilter=o}),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"span",81),t.NdJ("click",function(){return t.CHM(e),t.oxw().composerPackageNameFilter=""}),t.qZA(),t.qZA(),t.YNc(14,Nt,3,3,"div",82),t.ALo(15,"filter"),t.qZA(),t.YNc(16,bt,6,7,"ng-template",null,83,t.W1O),t.TgZ(18,"div",84),t.TgZ(19,"div",85),t.TgZ(20,"div",86),t.TgZ(21,"input",87),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().composerPackageName=o}),t.qZA(),t.qZA(),t.TgZ(22,"div",88),t.TgZ(23,"input",89),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().composerPackageVersion=o}),t.qZA(),t.qZA(),t.TgZ(24,"div",90),t.TgZ(25,"button",91),t.NdJ("click",function(o){return t.CHM(e),t.oxw().requirePackage(o)}),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(17),i=t.oxw();t.Q6J("ngClass",t.VKq(22,qt,i.settings.SETTINGS_COMPOSER_PACKAGES.loading)),t.xp6(5),t.hij(" ",t.lcZ(6,11,"SYSTEM_UPDATE")," "),t.xp6(3),t.hij(" ",t.lcZ(9,13,"SETTINGS_COMPOSER_PACKAGES_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(24,Ut,!!i.composerPackageNameFilter)),t.xp6(1),t.MGl("placeholder","",t.lcZ(12,15,"SEARCH"),"..."),t.Q6J("ngModel",i.composerPackageNameFilter),t.xp6(3),t.Q6J("ngIf",0===t.xi3(15,17,i.composerPackages,t.VKq(26,b,i.composerPackageNameFilter)).length)("ngIfElse",e),t.xp6(7),t.Q6J("ngModel",i.composerPackageName),t.xp6(2),t.Q6J("ngModel",i.composerPackageVersion),t.xp6(3),t.hij(" ",t.lcZ(27,20,"INSTALL")," ")}}const Rt=[{path:"",component:(()=>{class n{constructor(e,i,o,l,a){this.messageService=e,this.settingsService=i,this.appSettings=o,this.modalService=l,this.translateService=a,this.loading=!1,this.forms={},this.composerPackages=[],this.composerPackageName="",this.composerPackageVersion="",this.composerPackageNameFilter="",this.scrollHeight=600,this.settingsCloned={},this.settings={SETTINGS_MAIN:new g.e(!1,!0,[],null),SETTINGS_ORDER_STATUSES:new g.e(!1,!0,[],{template:{value:"userEmailStatus",type:"text"},color:{value:"#00aeff",type:"text"}}),SETTINGS_DELIVERY:new g.e(!1,!0,[],{price:{value:0,type:"number"},priceLimit:{value:0,type:"number"}}),SETTINGS_PROMOCODES:new g.e(!1,!0,[],{value:{value:"",type:"text"},quantity:{value:0,type:"number"}}),SETTINGS_PAYMENT:new g.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_CURRENCY:new g.e(!1,!0,[],{value:{value:1,type:"number"}}),SETTINGS_LANGUAGES:new g.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_COMPOSER_PACKAGES:new g.e(!1,!0,[],null)},this.destroyed$=new h.xQ,this.baseUrl=this.appSettings.settings.webApiUrl+"/"}ngOnInit(){this.getSettings(),this.getComposerPackages()}ngAfterViewInit(){setTimeout(this.scrollHeightUpdate.bind(this),1)}scrollHeightUpdate(){const i=window.innerHeight;this.scrollHeight=i-160}getSettings(){this.settingsService.getList().pipe((0,d.R)(this.destroyed$)).subscribe(e=>{e.SETTINGS_MAIN&&(this.settings.SETTINGS_MAIN.values=e.SETTINGS_MAIN,this.settings.SETTINGS_MAIN.defaultValues=(0,p.cloneDeep)(e.SETTINGS_MAIN),this.settings.SETTINGS_MAIN.loading=!1),e.SETTINGS_ORDER_STATUSES&&(this.settings.SETTINGS_ORDER_STATUSES.values=e.SETTINGS_ORDER_STATUSES,this.settings.SETTINGS_ORDER_STATUSES.defaultValues=(0,p.cloneDeep)(e.SETTINGS_ORDER_STATUSES),this.settings.SETTINGS_ORDER_STATUSES.loading=!1),e.SETTINGS_DELIVERY&&(this.settings.SETTINGS_DELIVERY.values=e.SETTINGS_DELIVERY,this.settings.SETTINGS_DELIVERY.defaultValues=(0,p.cloneDeep)(e.SETTINGS_DELIVERY),this.settings.SETTINGS_DELIVERY.loading=!1),e.SETTINGS_PAYMENT&&(this.settings.SETTINGS_PAYMENT.values=e.SETTINGS_PAYMENT,this.settings.SETTINGS_PAYMENT.defaultValues=(0,p.cloneDeep)(e.SETTINGS_PAYMENT),this.settings.SETTINGS_PAYMENT.loading=!1),e.SETTINGS_CURRENCY&&(this.settings.SETTINGS_CURRENCY.values=e.SETTINGS_CURRENCY,this.settings.SETTINGS_CURRENCY.defaultValues=(0,p.cloneDeep)(e.SETTINGS_CURRENCY),this.settings.SETTINGS_CURRENCY.loading=!1),e.SETTINGS_PROMOCODES&&(this.settings.SETTINGS_PROMOCODES.values=e.SETTINGS_PROMOCODES,this.settings.SETTINGS_PROMOCODES.defaultValues=(0,p.cloneDeep)(e.SETTINGS_PROMOCODES),this.settings.SETTINGS_PROMOCODES.loading=!1),e.SETTINGS_LANGUAGES&&(this.settings.SETTINGS_LANGUAGES.values=e.SETTINGS_LANGUAGES,this.settings.SETTINGS_LANGUAGES.defaultValues=(0,p.cloneDeep)(e.SETTINGS_LANGUAGES),this.settings.SETTINGS_LANGUAGES.loading=!1)})}addSetting(e){const i={name:"",description:"",options:(0,p.cloneDeep)(this.settings[e].defaultOptions)};this.settings[e].values.push(i)}deleteSetting(e,i){this.settings[e].values.splice(i,1),this.settings[e].changed=!0}saveSettings(e,i){i&&i.preventDefault();const o=this.settings[e].values;this.settings[e].loading=!0,this.settingsService.updateGroup(e,o).pipe((0,d.R)(this.destroyed$)).subscribe({next:l=>{this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("DATA_SAVED_SUCCESSFULLY")}),this.settings[e].defaultValues=l,this.settings[e].loading=!1,this.settings[e].changed=!1,this.pageReload()},error:l=>{l.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:l.error}),this.settings[e].loading=!1}})}getFieldTypeByName(e){return e.name.toLowerCase().indexOf("password")>-1&&e.value?"password":"text"}getCurrentLocale(){const e=(0,p.findIndex)(this.settings.SETTINGS_MAIN.values,{name:"locale"});return e>-1?String(this.settings.SETTINGS_MAIN.values[e].value):""}getLangString(e){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][e]||e}resetSettingsForm(e){const i=this.settings[e].defaultValues.length;i<this.settings[e].values.length&&this.settings[e].values.splice(i-1,this.settings[e].values.length-i),(0,p.extend)(this.settings[e].values,(0,p.cloneDeepWith)(this.settings[e].defaultValues)),this.settings[e].loading=!1,this.settings[e].changed=!1}getActionSuccessMessage(e){let i="";switch(e){case"clear_cache":i=this.getLangString("CACHE_CLEAR_SUCCESSFULLY");break;case"clear_system_cache":i=this.getLangString("CACHE_SYSTEM_CLEAR_SUCCESSFULLY");break;case"update_filters":i=this.getLangString("UPDATE_FILTERS_SUCCESSFULLY")}return i}runActionPost(e){this.loading=!0,this.settingsService.runActionPost(e).pipe((0,d.R)(this.destroyed$)).subscribe({next:i=>{if(this.loading=!1,["update_internationalization"].indexOf(e)>-1)this.pageReload();else if(i&&i.success){const o=this.getActionSuccessMessage(e);o&&this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:o})}},error:i=>{i.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:i.error}),this.loading=!1}})}getComposerPackages(){this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.getComposerPackagesList().pipe((0,d.R)(this.destroyed$)).subscribe({next:e=>{this.composerPackages=e,this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:e=>{this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}})}requirePackage(e){e&&e.preventDefault(),this.composerPackageName&&(this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.composerRequirePackage(this.composerPackageName,this.composerPackageVersion).pipe((0,d.R)(this.destroyed$)).subscribe({next:i=>{this.composerPackageName="",this.composerPackageVersion="",this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:i=>{i.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:i.error}),this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}}))}modalSystemUpdate(e){e&&e.preventDefault(),this.modalRef&&(this.modalRef.dismiss(),this.modalRef=null),this.modalRef=this.modalService.open(D,{backdrop:"static",keyboard:!1}),this.modalRef.result.then(i=>{"completed"===i&&(this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("SYSTEM_UPDATE_COMPLETED")}),setTimeout(this.pageReload.bind(this),2e3))})}onValueChanged(e){this.settings[e].changed=!0}inputDisableToggle(e,i,o){o&&o.preventDefault(),e.readOnly=!e.readOnly,i&&(i.style.display="none"!==i.style.display?"none":"")}pageReload(){window.location.reload()}onRowEditInit(e){this.settingsCloned[e.name]=e.value}onRowEditSave(e){this.saveSettings("SETTINGS_MAIN")}onRowEditCancel(e,i){this.settingsCloned[e.name]&&(e.value=this.settingsCloned[e.name],delete this.settingsCloned[e.name])}}return n.title="SETTINGS",n.\u0275fac=function(e){return new(e||n)(t.Y36(S.ez),t.Y36(r.g),t.Y36(x.d),t.Y36(u.FF),t.Y36(f.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],features:[t._Bn([S.ez])],decls:63,vars:45,consts:[[1,"card","card-responsive"],[1,"card-body"],[1,"float-md-start"],[1,"icon-cog"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","btn-sm","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],[1,"icon-repeat"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"icon-reload","text-info"],[1,"icon-repeat","text-info"],[1,"icon-globe","text-info"],[1,"icon-tag","text-info"],[1,"clearfix"],[1,"row"],[1,"col-lg-6","mb-3"],["dataKey","name","editMode","row","responsiveLayout","fixed",3,"value","scrollable","scrollHeight"],["pTemplate","header"],["pTemplate","body"],["activeIds","accordion-settings-1",1,"ngb-accordion","accordion-responsive",3,"closeOthers"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],["id","accordion-settings-2",3,"title"],["id","accordion-settings-3",3,"title"],["id","accordion-settings-4",3,"title"],["id","accordion-settings-7",3,"title"],["id","accordion-settings-5",3,"title"],["id","accordion-settings-6",3,"title"],["key","message","position","bottom-right"],[3,"pEditableRow"],[2,"width","50%"],[1,"show-on-hover-parent","w-100"],[1,"show-on-hover-child","position-relative"],[1,"pos-absolute-right"],[1,"badge","bg-secondary"],[1,"text-overflow",3,"title"],[1,"show-on-hover-parent","min-height20","w-100"],[1,"show-on-hover-child","position-absolute","pos-right"],["pButton","","type","button","pInitEditableRow","","icon","pi pi-pencil","tooltipPosition","bottom","class","p-button-raised p-button-rounded",3,"pTooltip","click",4,"ngIf"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check","tooltipPosition","bottom","class","p-button-raised p-button-rounded p-button-success ms-2",3,"pTooltip","click",4,"ngIf"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times","tooltipPosition","bottom","class","p-button-raised p-button-rounded p-button-danger ms-2",3,"pTooltip","click",4,"ngIf"],[2,"display","block","width","100%"],["pTemplate","input"],["pTemplate","output"],["pButton","","type","button","pInitEditableRow","","icon","pi pi-pencil","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded",3,"pTooltip","click"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-success","ms-2",3,"pTooltip","click"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-danger","ms-2",3,"pTooltip","click"],["pInputText","","type","text",1,"p-inputtext-sm","w-100",3,"ngModel","ngModelChange"],[1,"text-overflow",3,"title","ngClass"],[1,"text-muted","p-3","p-md-0"],[1,"table-responsive","pt-0","pt-md-2"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value"],[1,"text-center","pt-2","pb-2","pb-md-0"],[1,"relative"],["class","pos-absolute-right",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],["width","40%"],["width","10%"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"appendTo","ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-secondary","ms-2",3,"pTooltip","click"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"icon-check"],["type","button","tooltipPosition","bottom",1,"btn","btn-secondary","btn-sm",3,"pTooltip","click"],[1,"icon-reload"],[1,"table-responsive"],["width","25%"],["type","number","step","1","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["width","45%"],["width","30%"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"ngClass"],[1,"p-3","p-md-0"],[1,"float-end"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"icon-arrow-up-circle"],[1,"pb-3","text-muted","mb-2"],[1,"form-control-search","mb-3",3,"ngClass"],["type","text",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["class","alert alert-info py-1 px-3",4,"ngIf","ngIfElse"],["composerPackagesTable",""],[1,"card","card-body","p-2","mt-3",2,"display","none"],[1,"row","no-gutters"],[1,"col-5","pe-1"],["type","text","placeholder","package / class name",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-4","ps-1","pe-1"],["type","text","placeholder","version / class path",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-3","ps-1"],["type","button",1,"btn","btn-success","btn-sm","d-block","w-100",3,"click"],[1,"alert","alert-info","py-1","px-3"],["styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","400px",3,"value","scrollable"],["width","60%"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3"),t._UZ(4,"i",3),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"button",6),t._UZ(10,"i",7),t._uU(11," \xa0 "),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"button",9),t.NdJ("click",function(){return i.runActionPost("clear_cache")}),t._UZ(17,"i",10),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){return i.runActionPost("clear_system_cache")}),t._UZ(21,"i",11),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"button",9),t.NdJ("click",function(){return i.runActionPost("update_internationalization")}),t._UZ(25,"i",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){return i.runActionPost("update_filters")}),t._UZ(29,"i",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",14),t._UZ(33,"hr"),t.TgZ(34,"div",15),t.TgZ(35,"div",16),t.TgZ(36,"p-table",17),t.YNc(37,j,7,6,"ng-template",18),t.YNc(38,tt,20,15,"ng-template",19),t.qZA(),t.qZA(),t.TgZ(39,"div",16),t.TgZ(40,"ngb-accordion",20),t.TgZ(41,"ngb-panel",21),t.ALo(42,"translate"),t.YNc(43,ot,17,10,"ng-template",22),t.qZA(),t.TgZ(44,"ngb-panel",23),t.ALo(45,"translate"),t.YNc(46,_t,17,10,"ng-template",22),t.qZA(),t.TgZ(47,"ngb-panel",24),t.ALo(48,"translate"),t.YNc(49,ct,17,10,"ng-template",22),t.qZA(),t.TgZ(50,"ngb-panel",25),t.ALo(51,"translate"),t.YNc(52,mt,17,10,"ng-template",22),t.qZA(),t.TgZ(53,"ngb-panel",26),t.ALo(54,"translate"),t.YNc(55,ht,17,10,"ng-template",22),t.qZA(),t.TgZ(56,"ngb-panel",27),t.ALo(57,"translate"),t.YNc(58,ft,17,10,"ng-template",22),t.qZA(),t.TgZ(59,"ngb-panel",28),t.ALo(60,"translate"),t.YNc(61,It,28,28,"ng-template",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(62,"p-toast",29)),2&e&&(t.xp6(1),t.ekj("loading",i.loading),t.xp6(4),t.hij(" ",t.lcZ(6,19,"SETTINGS")," "),t.xp6(8),t.Oqu(t.lcZ(14,21,"CLEAR_CACHE")),t.xp6(5),t.hij(" \xa0 ",t.lcZ(19,23,"CLEAR_FILE_CACHE")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(23,25,"CLEAR_SYSTEM_CACHE")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(27,27,"UPDATE_DICTIONARIES")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(31,29,"UPDATE_FILTERS")," "),t.xp6(6),t.Q6J("value",i.settings.SETTINGS_MAIN.values)("scrollable",!0)("scrollHeight",i.scrollHeight+"px"),t.xp6(4),t.Q6J("closeOthers",!0),t.xp6(1),t.Q6J("title",t.lcZ(42,31,"SETTINGS_ORDER_STATUSES")),t.xp6(3),t.Q6J("title",t.lcZ(45,33,"SETTINGS_DELIVERY")),t.xp6(3),t.Q6J("title",t.lcZ(48,35,"SETTINGS_PAYMENT")),t.xp6(3),t.Q6J("title",t.lcZ(51,37,"SETTINGS_CURRENCY")),t.xp6(3),t.Q6J("title",t.lcZ(54,39,"SETTINGS_PROMOCODES")),t.xp6(3),t.Q6J("title",t.lcZ(57,41,"SETTINGS_LANGUAGES")),t.xp6(3),t.Q6J("title",t.lcZ(60,43,"SETTINGS_COMPOSER_PACKAGES")))},directives:[u.jt,u.iD,u.Vi,A.iA,S.jx,u.gY,u.Gk,u.gW,J.FN,A.D$,T.O5,A.YL,Y.Hq,A.Pv,H.u,A.U1,A.wT,E.Fj,V.o,E.JJ,E.On,T.mk,Q.zH,E.qQ,E.wV],pipes:[f.X$,F],encapsulation:2}),n})()}];let Lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Rt)],c.Bz]}),n})(),Ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[T.ez,C.m,Lt]]}),n})()},1562:(v,Z,_)=>{_.d(Z,{g:()=>S});var T=_(4522),C=_(2411),c=_(2047),d=(_(843),_(6721)),p=_(3668);let S=(()=>{class g{constructor(r){this.http=r,this.headers=new T.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="",this.baseUrl="",this.requestUrl="/admin/settings",this.baseUrl=d.d.getBaseUrl()}setRequestUrl(r){this.requestUrl=r}getRequestUrl(){return this.requestUrl}getList(){return this.http.get(this.getRequestUrl()).pipe((0,c.K)(this.handleError()))}clearSystemCache(){const r=this.getRequestUrl()+"/clear_system_cache";return this.http.post(r,{},{headers:this.headers}).pipe((0,c.K)(this.handleError()))}runActionPost(r){const m=this.getRequestUrl()+`/${r}`;return this.http.post(m,{},{headers:this.headers}).pipe((0,c.K)(this.handleError()))}updateGroup(r,m){const t=this.getRequestUrl()+`/${r}`;return this.http.put(t,m,{headers:this.headers}).pipe((0,c.K)(this.handleError()))}getComposerPackagesList(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe((0,c.K)(this.handleError()))}composerRequirePackage(r,m){const t=this.getRequestUrl()+"_composer_require_package";return this.http.post(t,{packageName:r,packageVersion:m},{headers:this.headers}).pipe((0,c.K)(this.handleError()))}postFormData(r,m){const t=new T.WM({enctype:"multipart/form-data",Accept:"application/json","X-Requested-With":"XMLHttpRequest"});return this.http.post(this.baseUrl+m,r,{headers:t}).pipe((0,c.K)(this.handleError()))}runAction(r){return this.http.post(this.baseUrl+r,{},{headers:this.headers}).pipe((0,c.K)(this.handleError()))}handleError(r="operation",m){return t=>{if(!(t.status&&[401,403].indexOf(t.status)>-1)){if(t.error)throw t.error;return(0,C.of)(m)}window.location.href=this.baseUrl+"/login"}}}return g.\u0275fac=function(r){return new(r||g)(p.LFG(T.eN))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);