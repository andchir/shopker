"use strict";(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_settings_settings_module_ts"],{843:(b,Z,_)=>{_.d(Z,{e:()=>u});class u{constructor(p,h,T,c,S){this.changed=p,this.loading=h,this.values=T,this.defaultOptions=c,this.defaultValues=S}}},7452:(b,Z,_)=>{_.r(Z),_.d(Z,{SettingsModule:()=>bt});var u=_(6019),C=_(7367),p=_(8922),h=_(3405),T=_(8805),c=_(3132),S=_(481),g=_(843),x=_(6721),r=_(1562),m=_(3961),t=_(3668),d=_(7283),f=_(8319);const q=["filesWidget"];function U(o,s){1&o&&t._UZ(0,"i",16)}function I(o,s){1&o&&t._UZ(0,"i",16)}function R(o,s){1&o&&t._UZ(0,"i",16)}function L(o,s){1&o&&t._UZ(0,"i",17)}function G(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"app-file-widget",19,20),t.TgZ(3,"div",21),t.TgZ(4,"button",22),t.NdJ("click",function(i){return t.CHM(e),t.oxw().skipStepHandler(i)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}2&o&&(t.xp6(1),t.Q6J("hasPreviewImage",!1)("allowMultiple",!1)("allowedExtensions",".zip"),t.xp6(4),t.hij(" ",t.lcZ(6,4,"SKIP")," "))}function O(o,s){if(1&o&&(t.TgZ(0,"pre",28),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.changelogContent)}}function P(o,s){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",23),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"br"),t._uU(7),t.ALo(8,"translate"),t.TgZ(9,"b",24),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"ngb-accordion",25),t.TgZ(12,"ngb-panel",26),t.ALo(13,"translate"),t.YNc(14,O,2,1,"ng-template",27),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"CURRENT_VERSION"),": "),t.xp6(3),t.Oqu(e.currentVersion),t.xp6(2),t.hij(" ",t.lcZ(8,7,"NEW_VERSION"),": "),t.xp6(3),t.Oqu(e.version),t.xp6(2),t.Q6J("title",t.lcZ(13,9,"CHANGELOG"))}}function k(o,s){if(1&o&&(t.TgZ(0,"div",29),t._UZ(1,"ngb-progressbar",30),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("striped",!0)("animated",!0)("value",e.updatePercent)("showValue",!0)}}function y(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",31),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().errorMessage=""}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.errorMessage)," ")}}const w=function(o){return{"no-events loading":o}},N=function(o){return{"text-muted":o}};let D=(()=>{class o{constructor(e,n,i){this.activeModal=e,this.dataService=n,this.appSettings=i,this.loading=!1,this.destroyed$=new h.xQ,this.stepNumber=1,this.updatePercent=0,this.isUpdateStarted=!1,this.isCollapsed=!0}ngOnInit(){this.currentVersion=this.appSettings.settings.version}nextStepHandler(e){switch(e&&e.preventDefault(),this.errorMessage="",this.stepNumber){case 1:if(0===this.filesWidget.filesRaw.length)return void(this.errorMessage="PLEASE_SELECT_FILE");this.isUpdateStarted=!1;const n=new FormData;n.append("file",this.filesWidget.filesRaw[0]),this.loading=!0,this.dataService.postFormData(n,"admin/system_update/upload").pipe((0,T.R)(this.destroyed$)).subscribe({next:i=>{this.loading=!1,this.stepNumber=2},error:i=>{i.error&&(this.errorMessage=i.error),this.loading=!1}});break;case 2:this.loading=!0,this.dataService.runAction("admin/system_update/pre_update").pipe((0,T.R)(this.destroyed$)).subscribe({next:i=>{this.stepNumber=3,this.version=i.version||"",this.changelogContent=i.changelogContent||"",this.loading=!1},error:i=>{i.error&&(this.errorMessage=i.error),this.loading=!1}});break;case 3:this.updateRunStep("vendors")}}skipStepHandler(e){e&&e.preventDefault(),this.errorMessage="",this.stepNumber++}updateRunStep(e){const n=["vendor","src","template","config"],i=n.indexOf(e);0===i&&(this.loading=!0,this.isUpdateStarted=!0,this.updatePercent=0),this.dataService.runAction(`admin/system_update/execute/${e}`).pipe((0,T.R)(this.destroyed$)).subscribe({next:l=>{this.updatePercent=(i+1)/n.length*100,100===this.updatePercent?(this.stepNumber=4,setTimeout(this.onUpdateComplete.bind(this),1e3)):this.updateRunStep(n[i+1])},error:l=>{l.error&&(this.errorMessage=l.error),this.loading=!1,this.isUpdateStarted=!1,this.updatePercent=0}})}closeModal(e){this.activeModal.close(e)}onUpdateComplete(){this.loading=!1,this.closeModal("completed")}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.Kz),t.Y36(r.g),t.Y36(x.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-file-upload"]],viewQuery:function(e,n){if(1&e&&t.Gf(q,5),2&e){let i;t.iGM(i=t.CRH())&&(n.filesWidget=i.first)}},decls:34,vars:42,consts:[[3,"ngClass"],[1,"modal-header","d-block"],[1,"modal-title","text-success"],[1,"icon-arrow-up-circle"],[1,"modal-body"],[1,"mb-3",3,"ngClass"],["class","icon-check-circle me-2 text-success",4,"ngIf","ngIfElse"],["iconCircleTemplate",""],["class","show-on-hover-parent",4,"ngIf"],[4,"ngIf"],["class","py-4",4,"ngIf"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block","pt-0"],["type","button",1,"btn","btn-primary","btn-wide",3,"disabled","click"],[1,"icon-arrow-right","ms-2"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"icon-check-circle","me-2","text-success"],[1,"icon-circle","me-2"],[1,"show-on-hover-parent"],["fieldName","file",3,"hasPreviewImage","allowMultiple","allowedExtensions"],["filesWidget",""],[1,"pos-absolute-left-bottom10","show-on-hover"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"text-success","mb-2"],[1,"big"],[1,"ngb-accordion"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],[1,"max-height400","mb-0"],[1,"py-4"],["type","info","textType","white",3,"striped","animated","value","showValue"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button","data-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div"),t.TgZ(8,"div",5),t.YNc(9,U,1,0,"i",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",5),t.YNc(13,I,1,0,"i",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",5),t.YNc(17,R,1,0,"i",6),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,L,1,0,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(22,G,7,6,"div",8),t.YNc(23,P,15,11,"div",9),t.YNc(24,k,2,4,"div",10),t.YNc(25,y,4,3,"div",11),t.qZA(),t.TgZ(26,"div",12),t.TgZ(27,"button",13),t.NdJ("click",function(l){return n.nextStepHandler(l)}),t._uU(28),t.ALo(29,"translate"),t._UZ(30,"i",14),t.qZA(),t.TgZ(31,"button",15),t.NdJ("click",function(){return n.closeModal("close")}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(21);t.Q6J("ngClass",t.VKq(34,w,n.loading)),t.xp6(4),t.hij(" ",t.lcZ(5,22,"SYSTEM_UPDATE")," "),t.xp6(4),t.Q6J("ngClass",t.VKq(36,N,1!=n.stepNumber)),t.xp6(1),t.Q6J("ngIf",n.stepNumber>1)("ngIfElse",i),t.xp6(1),t.hij(" ",t.lcZ(11,24,"SYSTEM_UPDATE_STEP1_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(38,N,2!=n.stepNumber)),t.xp6(1),t.Q6J("ngIf",n.stepNumber>2)("ngIfElse",i),t.xp6(1),t.hij(" ",t.lcZ(15,26,"SYSTEM_UPDATE_STEP2_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(40,N,3!=n.stepNumber)),t.xp6(1),t.Q6J("ngIf",n.stepNumber>3)("ngIfElse",i),t.xp6(1),t.hij(" ",t.lcZ(19,28,"SYSTEM_UPDATE_STEP3_DESCRIPTION")," "),t.xp6(4),t.Q6J("ngIf",1==n.stepNumber),t.xp6(1),t.Q6J("ngIf",3==n.stepNumber&&!n.isUpdateStarted),t.xp6(1),t.Q6J("ngIf",n.isUpdateStarted),t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" ",t.lcZ(29,30,"CONTINUE")," "),t.xp6(3),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" ",t.lcZ(33,32,"CLOSE")," ")}},directives:[u.mk,u.O5,m.E,d.gY,d.Gk,d.gW,d.Ly],pipes:[f.X$],encapsulation:2}),o})();var A=_(4462),J=_(397),Y=_(4750),H=_(9430),E=_(9133),V=_(7043),F=_(5849);let Q=(()=>{class o{transform(e,n){if(n&&Array.isArray(e)){const i=Object.keys(n);return e.filter(l=>i.reduce((a,M)=>a&&l[M].indexOf(n[M])>-1,!0))}return e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"filter",type:o,pure:!1}),o})();function j(o,s){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"PARAMETER")),t.xp6(3),t.Oqu(t.lcZ(6,4,"VALUE")))}function $(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().onRowEditInit(i)}),t.ALo(1,"translate"),t.qZA()}2&o&&t.Q6J("pTooltip",t.lcZ(1,1,"EDIT"))}function K(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().onRowEditSave(i)}),t.ALo(1,"translate"),t.qZA()}2&o&&t.Q6J("pTooltip",t.lcZ(1,1,"SAVE"))}function B(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),l=i.$implicit,a=i.rowIndex;return t.oxw().onRowEditCancel(l,a)}),t.ALo(1,"translate"),t.qZA()}2&o&&t.Q6J("pTooltip",t.lcZ(1,1,"CANCEL"))}function W(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",48),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().$implicit.value=i}),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("ngModel",e.value)}}const z=function(o){return{"text-password":o}};function X(o,s){if(1&o&&(t.TgZ(0,"div",49),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("title",e.value)("ngClass",t.VKq(3,z,"password"==n.getFieldTypeByName(e))),t.xp6(1),t.hij(" ",e.value," ")}}function tt(o,s){if(1&o&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t.TgZ(2,"div",32),t.TgZ(3,"div",33),t.TgZ(4,"div",34),t.TgZ(5,"span",35),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",36),t.ALo(8,"translate"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"td",31),t.TgZ(12,"div",37),t.TgZ(13,"div",38),t.YNc(14,$,2,3,"button",39),t.YNc(15,K,2,3,"button",40),t.YNc(16,B,2,3,"button",41),t.qZA(),t.TgZ(17,"p-cellEditor",42),t.YNc(18,W,1,1,"ng-template",43),t.YNc(19,X,2,5,"ng-template",44),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=s.$implicit,n=s.editing;t.Q6J("pEditableRow",e),t.xp6(6),t.Oqu(e.name),t.xp6(1),t.Q6J("title",t.lcZ(8,11,e.name)),t.xp6(2),t.hij(" ",t.lcZ(10,13,e.name)," "),t.xp6(4),t.ekj("pos-top",n)("pos-top-5",!n),t.xp6(1),t.Q6J("ngIf",!n),t.xp6(1),t.Q6J("ngIf",n),t.xp6(1),t.Q6J("ngIf",n)}}function et(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.template.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"p-colorPicker",64),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.color.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),t.qZA(),t.qZA(),t.TgZ(7,"td",63),t.TgZ(8,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_ORDER_STATUSES",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.template.value),t.xp6(2),t.Q6J("appendTo","body")("ngModel",e.options.color.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,5,"DELETE"))}}function nt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_ORDER_STATUSES")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_ORDER_STATUSES")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"colgroup"),t._UZ(7,"col",53),t._UZ(8,"col",53),t._UZ(9,"col",54),t._UZ(10,"col",54),t.qZA(),t.TgZ(11,"thead"),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"th"),t.qZA(),t.qZA(),t.TgZ(23,"tbody"),t.YNc(24,et,10,7,"tr",55),t.qZA(),t.TgZ(25,"tfoot"),t.TgZ(26,"tr",56),t.TgZ(27,"td",57),t.TgZ(28,"div",58),t.YNc(29,nt,11,6,"div",59),t.qZA(),t.TgZ(30,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_ORDER_STATUSES")}),t._UZ(31,"i",61),t._uU(32," \xa0 "),t.TgZ(33,"span"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_DELIVERY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,9,"SETTINGS_STATUSES_DESCRIPTION")," "),t.xp6(12),t.hij(" ",t.lcZ(15,11,"NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(18,13,"MAIL_TEMPLATE")," "),t.xp6(3),t.hij(" ",t.lcZ(21,15,"COLOR")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_ORDER_STATUSES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_ORDER_STATUSES.changed),t.xp6(5),t.Oqu(t.lcZ(35,17,"ADD"))}}function it(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(3,"td",63),t.TgZ(4,"input",70),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.price.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"input",70),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.priceLimit.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),t.qZA(),t.qZA(),t.TgZ(7,"td",63),t.TgZ(8,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_DELIVERY",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.price.value),t.xp6(2),t.Q6J("ngModel",e.options.priceLimit.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,4,"DELETE"))}}function st(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_DELIVERY")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_DELIVERY")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function lt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"th"),t.qZA(),t.qZA(),t.TgZ(18,"tbody"),t.YNc(19,it,10,6,"tr",55),t.qZA(),t.TgZ(20,"tfoot"),t.TgZ(21,"tr",56),t.TgZ(22,"td",57),t.TgZ(23,"div",58),t.YNc(24,st,11,6,"div",59),t.qZA(),t.TgZ(25,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_DELIVERY")}),t._UZ(26,"i",61),t._uU(27," \xa0 "),t.TgZ(28,"span"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_DELIVERY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,9,"SETTINGS_DELIVERY_DESCRIPTION")," "),t.xp6(7),t.hij(" ",t.lcZ(10,11,"NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(13,13,"PRICE")," "),t.xp6(3),t.hij(" ",t.lcZ(16,15,"MAX_PRICE")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_DELIVERY.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_DELIVERY.changed),t.xp6(5),t.Oqu(t.lcZ(30,17,"ADD"))}}function at(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),t.qZA(),t.qZA(),t.TgZ(3,"td",63),t.TgZ(4,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.value.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_PAYMENT",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function _t(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_PAYMENT")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_PAYMENT")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function rt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"colgroup"),t._UZ(7,"col",71),t._UZ(8,"col",71),t._UZ(9,"col",54),t.qZA(),t.TgZ(10,"thead"),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.TgZ(19,"tbody"),t.YNc(20,at,8,5,"tr",55),t.qZA(),t.TgZ(21,"tfoot"),t.TgZ(22,"tr",56),t.TgZ(23,"td",57),t.TgZ(24,"div",58),t.YNc(25,_t,11,6,"div",59),t.qZA(),t.TgZ(26,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_PAYMENT")}),t._UZ(27,"i",61),t._uU(28," \xa0 "),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_PAYMENT.loading),t.xp6(2),t.hij(" ",t.lcZ(3,8,"SETTINGS_PAYMENT_DESCRIPTION")," "),t.xp6(11),t.hij(" ",t.lcZ(14,10,"NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(17,12,"VALUE")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_PAYMENT.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_PAYMENT.changed),t.xp6(5),t.Oqu(t.lcZ(31,14,"ADD"))}}function ct(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),t.qZA(),t.qZA(),t.TgZ(3,"td",63),t.TgZ(4,"input",72),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.value.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_CURRENCY",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function gt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_CURRENCY")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_CURRENCY")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function pt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"colgroup"),t._UZ(7,"col",71),t._UZ(8,"col",71),t._UZ(9,"col",54),t.qZA(),t.TgZ(10,"thead"),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.TgZ(19,"tbody"),t.YNc(20,ct,8,5,"tr",55),t.qZA(),t.TgZ(21,"tfoot"),t.TgZ(22,"tr",56),t.TgZ(23,"td",57),t.TgZ(24,"div",58),t.YNc(25,gt,11,6,"div",59),t.qZA(),t.TgZ(26,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_CURRENCY")}),t._UZ(27,"i",61),t._uU(28," \xa0 "),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_CURRENCY.loading),t.xp6(2),t.hij(" ",t.lcZ(3,8,"SETTINGS_CURRENCY_RATE_DESCRIPTION")," "),t.xp6(11),t.hij(" ",t.lcZ(14,10,"CURRENCY")," "),t.xp6(3),t.hij(" ",t.lcZ(17,12,"VALUE")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_CURRENCY.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_CURRENCY.changed),t.xp6(5),t.Oqu(t.lcZ(31,14,"ADD"))}}function dt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(3,"td",63),t.TgZ(4,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.value.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"input",75),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.quantity.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),t.qZA(),t.qZA(),t.TgZ(7,"td",63),t.TgZ(8,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_PROMOCODES",l)}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("ngModel",e.options.quantity.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(9,4,"DELETE"))}}function ut(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_PROMOCODES")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_PROMOCODES")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function Tt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"colgroup"),t._UZ(7,"col",73),t._UZ(8,"col",73),t._UZ(9,"col",73),t._UZ(10,"col",54),t.qZA(),t.TgZ(11,"thead"),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"th"),t.qZA(),t.qZA(),t.TgZ(23,"tbody"),t.YNc(24,dt,10,6,"tr",55),t.qZA(),t.TgZ(25,"tfoot"),t.TgZ(26,"tr",56),t.TgZ(27,"td",74),t.TgZ(28,"div",58),t.YNc(29,ut,11,6,"div",59),t.qZA(),t.TgZ(30,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_PROMOCODES")}),t._UZ(31,"i",61),t._uU(32," \xa0 "),t.TgZ(33,"span"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_PROMOCODES.loading),t.xp6(2),t.hij(" ",t.lcZ(3,9,"SETTINGS_PROMOCODES_DESCRIPTION")," "),t.xp6(12),t.hij(" ",t.lcZ(15,11,"PROMO_CODE")," "),t.xp6(3),t.hij(" ",t.lcZ(18,13,"VALUE")," "),t.xp6(3),t.hij(" ",t.lcZ(21,15,"QUANTITY")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_PROMOCODES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_PROMOCODES.changed),t.xp6(5),t.Oqu(t.lcZ(35,17,"ADD"))}}function mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.name=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),t.qZA(),t.qZA(),t.TgZ(3,"td",63),t.TgZ(4,"input",62),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.options.value.value=i})("ngModelChange",function(){return t.CHM(e),t.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),t.qZA(),t.qZA(),t.TgZ(5,"td",63),t.TgZ(6,"button",65),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteSetting("SETTINGS_LANGUAGES",l)}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.options.value.value),t.xp6(2),t.Q6J("pTooltip",t.lcZ(7,3,"DELETE"))}}function St(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveSettings("SETTINGS_LANGUAGES")}),t._UZ(2,"i",67),t._uU(3," \xa0 "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",68),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetSettingsForm("SETTINGS_LANGUAGES")}),t.ALo(9,"translate"),t._UZ(10,"i",69),t.qZA(),t.qZA()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"SAVE")),t.xp6(3),t.s9C("ngbTooltip",t.lcZ(9,4,"FORM_RESET")))}function Zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",50),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"table",52),t.TgZ(6,"colgroup"),t._UZ(7,"col",71),t._UZ(8,"col",71),t._UZ(9,"col",54),t.qZA(),t.TgZ(10,"thead"),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.TgZ(19,"tbody"),t.YNc(20,mt,8,5,"tr",55),t.qZA(),t.TgZ(21,"tfoot"),t.TgZ(22,"tr",56),t.TgZ(23,"td",57),t.TgZ(24,"div",58),t.YNc(25,St,11,6,"div",59),t.qZA(),t.TgZ(26,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSetting("SETTINGS_LANGUAGES")}),t._UZ(27,"i",61),t._uU(28," \xa0 "),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.ekj("loading",e.settings.SETTINGS_LANGUAGES.loading),t.xp6(2),t.hij(" ",t.lcZ(3,8,"SETTINGS_LANGUAGES_DESCRIPTION")," "),t.xp6(11),t.hij(" ",t.lcZ(14,10,"LANGUAGE")," "),t.xp6(3),t.hij(" ",t.lcZ(17,12,"LOCALE")," "),t.xp6(4),t.Q6J("ngForOf",e.settings.SETTINGS_LANGUAGES.values),t.xp6(5),t.Q6J("ngIf",e.settings.SETTINGS_LANGUAGES.changed),t.xp6(5),t.Oqu(t.lcZ(31,14,"ADD"))}}function At(o,s){1&o&&(t.TgZ(0,"div",94),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function ht(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",63),t._uU(4),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.version)}}const v=function(o){return{name:o}};function Et(o,s){if(1&o&&(t.TgZ(0,"div",95),t.TgZ(1,"div",51),t.TgZ(2,"table",52),t.TgZ(3,"colgroup"),t._UZ(4,"col",96),t._UZ(5,"col",53),t.qZA(),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,ht,5,2,"tr",55),t.ALo(16,"filter"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(9),t.hij(" ",t.lcZ(10,3,"NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(13,5,"VERSION")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(16,7,e.composerPackages,t.VKq(10,v,e.composerPackageNameFilter)))}}const Ct=function(o){return{loading:o}},xt=function(o){return{"form-control-search-clear":o}};function ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"button",78),t.NdJ("click",function(i){return t.CHM(e),t.oxw().modalSystemUpdate(i)}),t._UZ(3,"i",79),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",80),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",81),t.TgZ(10,"input",82),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().composerPackageNameFilter=i}),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"span",83),t.NdJ("click",function(){return t.CHM(e),t.oxw().composerPackageNameFilter=""}),t.qZA(),t.qZA(),t.YNc(13,At,3,3,"div",84),t.ALo(14,"filter"),t.YNc(15,Et,17,12,"ng-template",null,85,t.W1O),t.TgZ(17,"div",86),t.TgZ(18,"div",87),t.TgZ(19,"div",88),t.TgZ(20,"input",89),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().composerPackageName=i}),t.qZA(),t.qZA(),t.TgZ(21,"div",90),t.TgZ(22,"input",91),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().composerPackageVersion=i}),t.qZA(),t.qZA(),t.TgZ(23,"div",92),t.TgZ(24,"button",93),t.NdJ("click",function(i){return t.CHM(e),t.oxw().requirePackage(i)}),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(16),n=t.oxw();t.Q6J("ngClass",t.VKq(22,Ct,n.settings.SETTINGS_COMPOSER_PACKAGES.loading)),t.xp6(4),t.hij(" ",t.lcZ(5,11,"SYSTEM_UPDATE")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SETTINGS_COMPOSER_PACKAGES_DESCRIPTION")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(24,xt,!!n.composerPackageNameFilter)),t.xp6(1),t.MGl("placeholder","",t.lcZ(11,15,"SEARCH"),"..."),t.Q6J("ngModel",n.composerPackageNameFilter),t.xp6(3),t.Q6J("ngIf",0===t.xi3(14,17,n.composerPackages,t.VKq(26,v,n.composerPackageNameFilter)).length)("ngIfElse",e),t.xp6(7),t.Q6J("ngModel",n.composerPackageName),t.xp6(2),t.Q6J("ngModel",n.composerPackageVersion),t.xp6(3),t.hij(" ",t.lcZ(26,20,"INSTALL")," ")}}const Nt=[{path:"",component:(()=>{class o{constructor(e,n,i,l,a){this.messageService=e,this.settingsService=n,this.appSettings=i,this.modalService=l,this.translateService=a,this.loading=!1,this.forms={},this.composerPackages=[],this.composerPackageName="",this.composerPackageVersion="",this.composerPackageNameFilter="",this.scrollHeight=600,this.settingsCloned={},this.settings={SETTINGS_MAIN:new g.e(!1,!0,[],null),SETTINGS_ORDER_STATUSES:new g.e(!1,!0,[],{template:{value:"userEmailStatus",type:"text"},color:{value:"#00aeff",type:"text"}}),SETTINGS_DELIVERY:new g.e(!1,!0,[],{price:{value:0,type:"number"},priceLimit:{value:0,type:"number"}}),SETTINGS_PROMOCODES:new g.e(!1,!0,[],{value:{value:"",type:"text"},quantity:{value:0,type:"number"}}),SETTINGS_PAYMENT:new g.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_CURRENCY:new g.e(!1,!0,[],{value:{value:1,type:"number"}}),SETTINGS_LANGUAGES:new g.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_COMPOSER_PACKAGES:new g.e(!1,!0,[],null)},this.destroyed$=new h.xQ,this.baseUrl=this.appSettings.settings.webApiUrl+"/"}ngOnInit(){this.getSettings(),this.getComposerPackages()}ngAfterViewInit(){setTimeout(this.scrollHeightUpdate.bind(this),1)}scrollHeightUpdate(){const n=window.innerHeight;this.scrollHeight=n-160}getSettings(){this.settingsService.getList().pipe((0,T.R)(this.destroyed$)).subscribe(e=>{e.SETTINGS_MAIN&&(this.settings.SETTINGS_MAIN.values=e.SETTINGS_MAIN,this.settings.SETTINGS_MAIN.defaultValues=(0,c.cloneDeep)(e.SETTINGS_MAIN),this.settings.SETTINGS_MAIN.loading=!1),e.SETTINGS_ORDER_STATUSES&&(this.settings.SETTINGS_ORDER_STATUSES.values=e.SETTINGS_ORDER_STATUSES,this.settings.SETTINGS_ORDER_STATUSES.defaultValues=(0,c.cloneDeep)(e.SETTINGS_ORDER_STATUSES),this.settings.SETTINGS_ORDER_STATUSES.loading=!1),e.SETTINGS_DELIVERY&&(this.settings.SETTINGS_DELIVERY.values=e.SETTINGS_DELIVERY,this.settings.SETTINGS_DELIVERY.defaultValues=(0,c.cloneDeep)(e.SETTINGS_DELIVERY),this.settings.SETTINGS_DELIVERY.loading=!1),e.SETTINGS_PAYMENT&&(this.settings.SETTINGS_PAYMENT.values=e.SETTINGS_PAYMENT,this.settings.SETTINGS_PAYMENT.defaultValues=(0,c.cloneDeep)(e.SETTINGS_PAYMENT),this.settings.SETTINGS_PAYMENT.loading=!1),e.SETTINGS_CURRENCY&&(this.settings.SETTINGS_CURRENCY.values=e.SETTINGS_CURRENCY,this.settings.SETTINGS_CURRENCY.defaultValues=(0,c.cloneDeep)(e.SETTINGS_CURRENCY),this.settings.SETTINGS_CURRENCY.loading=!1),e.SETTINGS_PROMOCODES&&(this.settings.SETTINGS_PROMOCODES.values=e.SETTINGS_PROMOCODES,this.settings.SETTINGS_PROMOCODES.defaultValues=(0,c.cloneDeep)(e.SETTINGS_PROMOCODES),this.settings.SETTINGS_PROMOCODES.loading=!1),e.SETTINGS_LANGUAGES&&(this.settings.SETTINGS_LANGUAGES.values=e.SETTINGS_LANGUAGES,this.settings.SETTINGS_LANGUAGES.defaultValues=(0,c.cloneDeep)(e.SETTINGS_LANGUAGES),this.settings.SETTINGS_LANGUAGES.loading=!1)})}addSetting(e){const n={name:"",description:"",options:(0,c.cloneDeep)(this.settings[e].defaultOptions)};this.settings[e].values.push(n)}deleteSetting(e,n){this.settings[e].values.splice(n,1),this.settings[e].changed=!0}saveSettings(e,n){n&&n.preventDefault();const i=this.settings[e].values;this.settings[e].loading=!0,this.settingsService.updateGroup(e,i).pipe((0,T.R)(this.destroyed$)).subscribe({next:l=>{this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("DATA_SAVED_SUCCESSFULLY")}),this.settings[e].defaultValues=l,this.settings[e].loading=!1,this.settings[e].changed=!1,this.pageReload()},error:l=>{l.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:l.error}),this.settings[e].loading=!1}})}getFieldTypeByName(e){return e.name.toLowerCase().indexOf("password")>-1&&e.value?"password":"text"}getCurrentLocale(){const e=(0,c.findIndex)(this.settings.SETTINGS_MAIN.values,{name:"locale"});return e>-1?String(this.settings.SETTINGS_MAIN.values[e].value):""}getLangString(e){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][e]||e}resetSettingsForm(e){const n=this.settings[e].defaultValues.length;n<this.settings[e].values.length&&this.settings[e].values.splice(n-1,this.settings[e].values.length-n),(0,c.extend)(this.settings[e].values,(0,c.cloneDeepWith)(this.settings[e].defaultValues)),this.settings[e].loading=!1,this.settings[e].changed=!1}getActionSuccessMessage(e){let n="";switch(e){case"clear_cache":n=this.getLangString("CACHE_CLEAR_SUCCESSFULLY");break;case"clear_system_cache":n=this.getLangString("CACHE_SYSTEM_CLEAR_SUCCESSFULLY");break;case"update_filters":n=this.getLangString("UPDATE_FILTERS_SUCCESSFULLY")}return n}runActionPost(e){this.loading=!0,this.settingsService.runActionPost(e).pipe((0,T.R)(this.destroyed$)).subscribe({next:n=>{if(this.loading=!1,["update_internationalization"].indexOf(e)>-1)this.pageReload();else if(n&&n.success){const i=this.getActionSuccessMessage(e);i&&this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:i})}},error:n=>{n.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:n.error}),this.loading=!1}})}getComposerPackages(){this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.getComposerPackagesList().pipe((0,T.R)(this.destroyed$)).subscribe({next:e=>{this.composerPackages=e,this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:e=>{this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}})}requirePackage(e){e&&e.preventDefault(),this.composerPackageName&&(this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.composerRequirePackage(this.composerPackageName,this.composerPackageVersion).pipe((0,T.R)(this.destroyed$)).subscribe({next:n=>{this.composerPackageName="",this.composerPackageVersion="",this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:n=>{n.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:n.error}),this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}}))}modalSystemUpdate(e){e&&e.preventDefault(),this.modalRef&&(this.modalRef.dismiss(),this.modalRef=null),this.modalRef=this.modalService.open(D,{backdrop:"static",keyboard:!1}),this.modalRef.result.then(n=>{"completed"===n&&(this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("SYSTEM_UPDATE_COMPLETED")}),setTimeout(this.pageReload.bind(this),2e3))})}onValueChanged(e){this.settings[e].changed=!0}inputDisableToggle(e,n,i){i&&i.preventDefault(),e.readOnly=!e.readOnly,n&&(n.style.display="none"!==n.style.display?"none":"")}pageReload(){window.location.reload()}onRowEditInit(e){this.settingsCloned[e.name]=e.value}onRowEditSave(e){this.saveSettings("SETTINGS_MAIN")}onRowEditCancel(e,n){this.settingsCloned[e.name]&&(e.value=this.settingsCloned[e.name],delete this.settingsCloned[e.name])}}return o.title="SETTINGS",o.\u0275fac=function(e){return new(e||o)(t.Y36(S.ez),t.Y36(r.g),t.Y36(x.d),t.Y36(d.FF),t.Y36(f.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],features:[t._Bn([S.ez])],decls:63,vars:45,consts:[[1,"card"],[1,"card-body"],[1,"float-md-start"],[1,"icon-cog"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","btn-sm","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],[1,"icon-repeat"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"icon-reload","text-info"],[1,"icon-repeat","text-info"],[1,"icon-globe","text-info"],[1,"icon-tag","text-info"],[1,"clearfix"],[1,"row"],[1,"col-lg-6","mb-3"],["dataKey","name","editMode","row","responsiveLayout","fixed",3,"value","scrollable","scrollHeight"],["pTemplate","header"],["pTemplate","body"],["activeIds","accordion-settings-1",1,"ngb-accordion",3,"closeOthers"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],["id","accordion-settings-2",3,"title"],["id","accordion-settings-3",3,"title"],["id","accordion-settings-4",3,"title"],["id","accordion-settings-7",3,"title"],["id","accordion-settings-5",3,"title"],["id","accordion-settings-6",3,"title"],["key","message","position","bottom-right"],[3,"pEditableRow"],[2,"width","50%"],[1,"show-on-hover-parent","w-100"],[1,"show-on-hover-child","position-relative"],[1,"pos-absolute-right"],[1,"badge","bg-secondary"],[1,"text-overflow",3,"title"],[1,"show-on-hover-parent","min-height20","w-100"],[1,"show-on-hover-child","position-absolute","pos-right"],["pButton","","type","button","pInitEditableRow","","icon","pi pi-pencil","tooltipPosition","bottom","class","p-button-raised p-button-rounded",3,"pTooltip","click",4,"ngIf"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check","tooltipPosition","bottom","class","p-button-raised p-button-rounded p-button-success ms-2",3,"pTooltip","click",4,"ngIf"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times","tooltipPosition","bottom","class","p-button-raised p-button-rounded p-button-danger ms-2",3,"pTooltip","click",4,"ngIf"],[2,"display","block","width","100%"],["pTemplate","input"],["pTemplate","output"],["pButton","","type","button","pInitEditableRow","","icon","pi pi-pencil","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded",3,"pTooltip","click"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-success","ms-2",3,"pTooltip","click"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-danger","ms-2",3,"pTooltip","click"],["pInputText","","type","text",1,"p-inputtext-sm","w-100",3,"ngModel","ngModelChange"],[1,"text-overflow",3,"title","ngClass"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-divided","mb-0"],["width","40%"],["width","10%"],[4,"ngFor","ngForOf"],[1,"bg-faded"],["colspan","4",1,"text-center","border-bottom-0"],[1,"relative"],["class","pos-absolute-right",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-center"],[3,"appendTo","ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","tooltipPosition","bottom",1,"p-button-raised","p-button-rounded","p-button-secondary","ms-2",3,"pTooltip","click"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"icon-check"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"icon-reload"],["type","number","step","1","min","0",1,"form-control","form-control-sm","mwidth-80","m-auto",3,"ngModel","ngModelChange"],["width","45%"],["type","number","step","1","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["width","30%"],["colspan","5",1,"text-center","border-bottom-0"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"ngClass"],[1,"float-end"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"icon-arrow-up-circle"],[1,"pb-3","text-muted","mb-2"],[1,"form-control-search","mb-3",3,"ngClass"],["type","text",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["class","alert alert-info py-1 px-3",4,"ngIf","ngIfElse"],["composerPackagesTable",""],[1,"card","card-body","p-2","mt-3",2,"display","none"],[1,"row","no-gutters"],[1,"col-5","pe-1"],["type","text","placeholder","package / class name",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-4","ps-1","pe-1"],["type","text","placeholder","version / class path",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-3","ps-1"],["type","button",1,"btn","btn-success","btn-sm","d-block","w-100",3,"click"],[1,"alert","alert-info","py-1","px-3"],[1,"max-height400"],["width","60%"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3"),t._UZ(4,"i",3),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"button",6),t._UZ(10,"i",7),t._uU(11," \xa0 "),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"button",9),t.NdJ("click",function(){return n.runActionPost("clear_cache")}),t._UZ(17,"i",10),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){return n.runActionPost("clear_system_cache")}),t._UZ(21,"i",11),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"button",9),t.NdJ("click",function(){return n.runActionPost("update_internationalization")}),t._UZ(25,"i",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){return n.runActionPost("update_filters")}),t._UZ(29,"i",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",14),t._UZ(33,"hr"),t.TgZ(34,"div",15),t.TgZ(35,"div",16),t.TgZ(36,"p-table",17),t.YNc(37,j,7,6,"ng-template",18),t.YNc(38,tt,20,15,"ng-template",19),t.qZA(),t.qZA(),t.TgZ(39,"div",16),t.TgZ(40,"ngb-accordion",20),t.TgZ(41,"ngb-panel",21),t.ALo(42,"translate"),t.YNc(43,ot,36,19,"ng-template",22),t.qZA(),t.TgZ(44,"ngb-panel",23),t.ALo(45,"translate"),t.YNc(46,lt,31,19,"ng-template",22),t.qZA(),t.TgZ(47,"ngb-panel",24),t.ALo(48,"translate"),t.YNc(49,rt,32,16,"ng-template",22),t.qZA(),t.TgZ(50,"ngb-panel",25),t.ALo(51,"translate"),t.YNc(52,pt,32,16,"ng-template",22),t.qZA(),t.TgZ(53,"ngb-panel",26),t.ALo(54,"translate"),t.YNc(55,Tt,36,19,"ng-template",22),t.qZA(),t.TgZ(56,"ngb-panel",27),t.ALo(57,"translate"),t.YNc(58,Zt,32,16,"ng-template",22),t.qZA(),t.TgZ(59,"ngb-panel",28),t.ALo(60,"translate"),t.YNc(61,ft,27,28,"ng-template",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(62,"p-toast",29)),2&e&&(t.xp6(1),t.ekj("loading",n.loading),t.xp6(4),t.hij(" ",t.lcZ(6,19,"SETTINGS")," "),t.xp6(8),t.Oqu(t.lcZ(14,21,"CLEAR_CACHE")),t.xp6(5),t.hij(" \xa0 ",t.lcZ(19,23,"CLEAR_FILE_CACHE")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(23,25,"CLEAR_SYSTEM_CACHE")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(27,27,"UPDATE_DICTIONARIES")," "),t.xp6(4),t.hij(" \xa0 ",t.lcZ(31,29,"UPDATE_FILTERS")," "),t.xp6(6),t.Q6J("value",n.settings.SETTINGS_MAIN.values)("scrollable",!0)("scrollHeight",n.scrollHeight+"px"),t.xp6(4),t.Q6J("closeOthers",!0),t.xp6(1),t.Q6J("title",t.lcZ(42,31,"SETTINGS_ORDER_STATUSES")),t.xp6(3),t.Q6J("title",t.lcZ(45,33,"SETTINGS_DELIVERY")),t.xp6(3),t.Q6J("title",t.lcZ(48,35,"SETTINGS_PAYMENT")),t.xp6(3),t.Q6J("title",t.lcZ(51,37,"SETTINGS_CURRENCY")),t.xp6(3),t.Q6J("title",t.lcZ(54,39,"SETTINGS_PROMOCODES")),t.xp6(3),t.Q6J("title",t.lcZ(57,41,"SETTINGS_LANGUAGES")),t.xp6(3),t.Q6J("title",t.lcZ(60,43,"SETTINGS_COMPOSER_PACKAGES")))},directives:[d.jt,d.iD,d.Vi,A.iA,S.jx,d.gY,d.Gk,d.gW,J.FN,A.D$,u.O5,A.YL,Y.Hq,A.Pv,H.u,A.U1,A.wT,E.Fj,V.o,E.JJ,E.On,u.mk,u.sg,F.zH,d._L,E.qQ,E.wV],pipes:[f.X$,Q],encapsulation:2}),o})()}];let Mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Nt)],p.Bz]}),o})(),bt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[],imports:[[u.ez,C.m,Mt]]}),o})()},1562:(b,Z,_)=>{_.d(Z,{g:()=>S});var u=_(4522),C=_(2411),p=_(2047),T=(_(843),_(6721)),c=_(3668);let S=(()=>{class g{constructor(r){this.http=r,this.headers=new u.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="",this.baseUrl="",this.requestUrl="/admin/settings",this.baseUrl=T.d.getBaseUrl()}setRequestUrl(r){this.requestUrl=r}getRequestUrl(){return this.requestUrl}getList(){return this.http.get(this.getRequestUrl()).pipe((0,p.K)(this.handleError()))}clearSystemCache(){const r=this.getRequestUrl()+"/clear_system_cache";return this.http.post(r,{},{headers:this.headers}).pipe((0,p.K)(this.handleError()))}runActionPost(r){const m=this.getRequestUrl()+`/${r}`;return this.http.post(m,{},{headers:this.headers}).pipe((0,p.K)(this.handleError()))}updateGroup(r,m){const t=this.getRequestUrl()+`/${r}`;return this.http.put(t,m,{headers:this.headers}).pipe((0,p.K)(this.handleError()))}getComposerPackagesList(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe((0,p.K)(this.handleError()))}composerRequirePackage(r,m){const t=this.getRequestUrl()+"_composer_require_package";return this.http.post(t,{packageName:r,packageVersion:m},{headers:this.headers}).pipe((0,p.K)(this.handleError()))}postFormData(r,m){const t=new u.WM({enctype:"multipart/form-data",Accept:"application/json","X-Requested-With":"XMLHttpRequest"});return this.http.post(this.baseUrl+m,r,{headers:t}).pipe((0,p.K)(this.handleError()))}runAction(r){return this.http.post(this.baseUrl+r,{},{headers:this.headers}).pipe((0,p.K)(this.handleError()))}handleError(r="operation",m){return t=>{if(!(t.status&&[401,403].indexOf(t.status)>-1)){if(t.error)throw t.error;return(0,C.of)(m)}window.location.href=this.baseUrl+"/login"}}}return g.\u0275fac=function(r){return new(r||g)(c.LFG(u.eN))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);