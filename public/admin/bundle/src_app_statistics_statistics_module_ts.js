"use strict";(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_statistics_statistics_module_ts"],{5969:(A,c,n)=>{n.r(c),n.d(c,{StatisticsModule:()=>M});var p=n(6019),u=n(7367),g=n(8922),o=n(4522),m=n(2411),f=n(2047),t=n(3668);let h=(()=>{class a{constructor(e){this.http=e,this.headers=new o.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="/admin/statistics",this.chartLineOptions={responsive:!0,maintainAspectRatio:!1}}setRequestUrl(e){this.requestUrl=e}getRequestUrl(){return this.requestUrl}getParams(e){let s=new o.LE;for(const i in e)!e.hasOwnProperty(i)||void 0===e[i]||(s=s.append(i,e[i]));return s}getStatisticsOrders(e,s){const i=this.getParams(s),l=this.getRequestUrl()+"/orders";return this.http.get(l,{params:i,headers:this.headers}).pipe((0,f.K)(this.handleError()))}handleError(e="operation",s){return i=>{if(i.error)throw i.error;return(0,m.of)(s)}}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(o.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})();var S=n(6721),v=n(5179),d=n(9133),y=n(7283),D=n(6810),Z=n(8319);const T=[{path:"",component:(()=>{class a{constructor(e,s){this.dataService=e,this.appSettings=s,this.type="year",this.loading=!1,this.dateFormat="dd.mm.yy",this.firstDayOfWeek=0,this.rangeDates=[new Date,new Date],this.rangeDates[0].setMonth(this.rangeDates[1].getMonth()-1),this.locale=this.appSettings.settings.locale,this.yearRangeString=[this.rangeDates[1].getFullYear()-5,this.rangeDates[1].getFullYear()].join(":"),"en"!==this.locale&&(this.firstDayOfWeek=1)}ngOnInit(){this.getData()}getData(){!this.rangeDates[0]||!this.rangeDates[1]||(this.loading=!0,this.dataService.getStatisticsOrders(this.type,{dateFrom:this.getDateString(this.rangeDates[0]),dateTo:this.getDateString(this.rangeDates[1])}).subscribe(e=>{this.data=e,this.loading=!1},e=>{this.loading=!1}))}getDateString(e){let s=String(e.getFullYear());return s+="-"+("0"+(e.getMonth()+1)).slice(-2),s+="-"+("0"+e.getDate()).slice(-2),s}}return a.title="STATISTICS",a.\u0275fac=function(e){return new(e||a)(t.Y36(h),t.Y36(S.d))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-statistics"]],features:[t._Bn([h])],decls:17,vars:19,consts:[[1,"card"],[1,"card-body"],[1,"icon-bar-graph-2"],[1,"min-height400"],[1,"d-inline-block","me-2"],[3,"ngModel","selectionMode","showIcon","monthNavigator","yearNavigator","yearRange","dateFormat","firstDayOfWeek","ngModelChange","onSelect"],["type","button",1,"btn","btn-secondary","ms-md-2",3,"ngbTooltip","click"],[1,"icon-reload"],["type","line",3,"data","height","responsive"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._UZ(3,"i",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"div",3),t.TgZ(8,"div"),t.TgZ(9,"div",4),t.TgZ(10,"p-calendar",5),t.NdJ("ngModelChange",function(l){return s.rangeDates=l})("onSelect",function(){return s.getData()}),t.qZA(),t.qZA(),t.TgZ(11,"button",6),t.NdJ("click",function(){return s.getData()}),t.ALo(12,"translate"),t._UZ(13,"i",7),t.qZA(),t.qZA(),t._UZ(14,"hr"),t.TgZ(15,"div"),t._UZ(16,"p-chart",8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"STATISTICS")," "),t.xp6(3),t.ekj("loading",s.loading),t.xp6(3),t.Q6J("ngModel",s.rangeDates)("selectionMode","range")("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",s.yearRangeString)("dateFormat",s.dateFormat)("firstDayOfWeek",s.firstDayOfWeek),t.xp6(1),t.s9C("ngbTooltip",t.lcZ(12,17,"REFRESH")),t.xp6(5),t.Q6J("data",s.data)("height","400px")("responsive",!0))},directives:[v.f,d.JJ,d.On,y._L,D.C],pipes:[Z.X$],styles:[""]}),a})()}];let C=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),a})(),M=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,u.m,C]]}),a})()}}]);