(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_users_users_module_ts"],{49093:function(t,e,o){"use strict";o.d(e,{B:function(){return h}});var s=o(3679),i=o(79765),n=o(46782),r=o(6887),l=o(63124),a=o(37716),d=o(95047),c=o(29790);const u=["formEl"];let h=(()=>{class t{constructor(t,e,o,s,n,r){this.fb=t,this.activeModal=e,this.translateService=o,this.systemNameService=s,this.dataService=n,this.elRef=r,this.modalId="",this._formFieldsErrors={},this.submitted=!1,this.loading=!1,this.dataLoaded=!1,this.closeReason="canceled",this.files={},this.formFields=[],this.arrayFields={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},this.uniqueId="",this.destroyed$=new i.xQ}set formErrors(t){for(const e in t)if(t.hasOwnProperty(e)){const t=this.getControl(this.form,null,e);t&&t.setErrors({incorrect:!0})}this._formFieldsErrors=t}get formErrors(){return this._formFieldsErrors}ngOnInit(){this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then(()=>{this.onAfterGetData()}):this.onAfterGetData(),this.onAfterInit()}onBeforeInit(){}onAfterInit(){}onAfterGetData(){this.dataLoaded=!0,this.buildControls(this.form,this.formFields)}getSystemFieldName(){return""}getLangString(t){return this.translateService.store.translations[this.translateService.currentLang][t]||t}getModelData(){return this.loading=!0,new Promise((t,e)=>{this.dataService.getItem(this.itemId).pipe((0,n.R)(this.destroyed$)).subscribe({next:e=>{if(this.isItemCopy){e.id=null;const t=this.getSystemFieldName();t&&(e[t]="")}Object.assign(this.model,e),this.loading=!1,t(e)},error:t=>{this.errorMessage=t.error||this.getLangString("ERROR"),this.loading=!1,e(t)}})})}buildForm(t="form",e=null,o=null,s="model"){e||(e=this.formFields),this[t]=this.fb.group(this.buildControls(null,e,s)),this[t].valueChanges.pipe((0,n.R)(this.destroyed$)).subscribe(()=>this.onValueChanged(t,o))}buildControls(t=null,e=[],o="model"){const s={};return e.forEach(e=>{const i=t?this.getControl(t,e):null;let n=null;if(o&&this[o]?(this[o].options||(this[o].options={}),n=0===e.name.indexOf("options_")?this[o].options[e.name.substr(8)]||null:this[o][e.name]||null):n=null,i)if(e.disabled&&i.disable(),e.children){const t=n,o=i;o.clear(),t.forEach((t,s)=>{const i=this.getFormFieldByName(e.name),n=this.buildControls(null,i.children,null);o.push(this.fb.group(n))}),o.patchValue(t)}else i.setValue(n);else e.children?(s[e.name]=this.fb.array([]),this.createArrayFieldsProperty(e.name)):s[e.name]=this.fb.control({value:n,disabled:e.disabled||!1},e.validators)}),s}onValueChanged(t="form",e=null){this[t]&&(e||(e=this.formErrors),this[t].valid&&(this.errorMessage=""),Object.keys(this[t].value).forEach(o=>{e[o]="";const s=this.getControl(this[t],null,o);if(s&&!s.valid&&s.errors){let t="";Object.keys(s.errors).forEach(e=>{t+=(t?" ":"")+this.getLangString("INVALID_"+e.toUpperCase())}),e[o]=t}}))}getFormFieldByName(t){const e=this.formFields.filter(e=>e.name===t);return e.length>0?e[0]:null}createArrayFieldsProperty(t){Object.defineProperty(this.arrayFields,t,{get:()=>this.form?this.form.get(t):null})}getControl(t,e,o){return t?t.get(o||e.name):null}focusFormError(){setTimeout(()=>{this.formEl.nativeElement.querySelector(".form-control.is-invalid")&&this.formEl.nativeElement.querySelector(".form-control.is-invalid").focus()},1)}formGroupMarkTouched(t){Object.keys(t.controls).forEach(e=>{t.controls[e].markAsTouched(),t.controls[e]instanceof s.Oe&&Array.from(this.form.controls[e].controls).forEach(t=>{this.formGroupMarkTouched(t)})})}getSaveRequest(t){return t.id||"root"===t.name?this.dataService.update(t):this.dataService.create(t)}getFormData(){const t=this.form.value;return t.id=this.model.id||0,void 0!==this.model.translations&&(t.translations=this.model.translations||null),t}arrayFieldDelete(t,e,o){o&&o.preventDefault(),this.arrayFields[t].removeAt(e)}arrayFieldAdd(t,e){e&&e.preventDefault();const o=this.getFormFieldByName(t);if(!o)return;const s=this.buildControls(null,o.children,null);this.arrayFields[t].push(this.fb.group(s))}generateName(t,e,o=null){e&&e.preventDefault(),o||(o=this.form);const s=this.getControl(o,null,"title").value||"";t.name=this.systemNameService.generateName(s),this.getControl(o,null,"name").setValue(t.name)}closeModal(t){t&&t.preventDefault(),this.close(this.closeReason)}close(t,e){e&&e.preventDefault(),"submit"===t?this.activeModal.close(t):this.activeModal.dismiss(t)}minimize(t){t&&t.preventDefault(),window.document.body.classList.remove("modal-open");const e=this.getRootElement(),o=e.previousElementSibling;e.classList.remove("d-block"),e.classList.add("modal-minimized"),o.classList.add("d-none")}maximize(t){t&&t.preventDefault(),window.document.body.classList.add("modal-open");const e=this.getRootElement(),o=e.previousElementSibling;e.classList.add("d-block"),e.classList.remove("modal-minimized"),o.classList.remove("d-none")}save(t=!1,e){e&&e.preventDefault(),this.onSubmit(t)}saveFiles(t){if(0===Object.keys(this.files).length)return void this.close("submit");const e=new FormData;for(const o in this.files)this.files.hasOwnProperty(o)&&this.files[o]instanceof File&&e.append(o,this.files[o],this.files[o].name);e.append("itemId",String(t)),this.dataService.postFormData(e).pipe((0,n.R)(this.destroyed$)).subscribe({next:()=>{this.close("submit")},error:t=>{this.errorMessage=t.error||this.getLangString("ERROR"),this.submitted=!1,this.loading=!1}})}onSubmit(t=!1){if(this.formGroupMarkTouched(this.form),!this.form.valid)return this.errorMessage=this.getLangString("PLEASE_FIX_FORM_ERRORS"),void this.focusFormError();this.errorMessage="",this.loading=!0,this.submitted=!0;const e=this.getFormData();this.getSaveRequest(e).pipe((0,n.R)(this.destroyed$)).subscribe({next:e=>{Object.keys(this.files).length>0?this.saveFiles(e._id||e.id):t&&this.close("submit"),e&&e.id&&(this.model.id=e.id),this.closeReason="updated",this.loading=!1,this.submitted=!1},error:t=>{t.error&&(this.errorMessage=t.error),t.errors&&(this.formErrors=t.errors,this.errorMessage=this.getLangString("PLEASE_FIX_FORM_ERRORS")),this.loading=!1,this.submitted=!1}})}onLocaleSwitch(){if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach(t=>{this.model[t]=this.localePreviousValues[t],this.getControl(this.form,null,t).setValue(this.localePreviousValues[t])}),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach(t=>{this.localePreviousValues[t]=this.getControl(this.form,null,t).value,this.model.translations[t]?(this.model[t]=this.model.translations[t][this.localeCurrent]||"",this.getControl(this.form,null,t).setValue(this.model[t])):(this.model[t]="",this.getControl(this.form,null,t).setValue(""))})}saveTranslations(t){t&&t.preventDefault(),this.localeFieldsAllowed.forEach(t=>{this.getControl(this.form,null,t)&&this.getControl(this.form,null,t).value?(this.model.translations[t]||(this.model.translations[t]={}),this.model.translations[t][this.localeCurrent]=this.getControl(this.form,null,t).value):this.model.translations[t]&&(this.model.translations[t][this.localeCurrent]&&delete this.model.translations[t][this.localeCurrent],0===Object.keys(this.model.translations[t]).length&&delete this.model.translations[t])}),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()}emailValidator(t){return t.value?/\S+@\S+\.\S+/.test(t.value)?void 0:{email:!0}:{required:!0}}getRootElement(){return this.elRef.nativeElement.parentNode.parentNode.parentNode}createUniqueId(){return Math.random().toString(36).substr(2,9)}displayToggle(t,e,o){o&&o.preventDefault(),t.style.display=(e=e||"none"===t.style.display)?"block":"none"}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.qu),a.Y36(d.Kz),a.Y36(c.sK),a.Y36(l.U),a.Y36(r.D),a.Y36(a.SBq))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(u,5),2&t){let t;a.iGM(t=a.CRH())&&(e.formEl=t.first)}},inputs:{modalTitle:"modalTitle",itemId:"itemId",modalId:"modalId",isItemCopy:"isItemCopy",isEditMode:"isEditMode"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()},3677:function(t,e,o){"use strict";o.d(e,{U:function(){return h}});var s=o(79765),i=o(46782),n=o(35930),r=o(6887),l=o(90660),a=o(37716),d=o(95047),c=o(29790);const u=["table"];let h=(()=>{class t{constructor(t,e,o,i){this.dataService=t,this.activeModal=e,this.modalService=o,this.translateService=i,this.items=[],this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new n.J("name","asc",1,10,0,0),this.destroyed$=new s.xQ}ngOnInit(){this.getList(),this.afterInit()}afterInit(){}onSearchClear(){this.getList()}onModalClose(t){}onSearchWordUpdate(t){if(void 0!==t)return this.queryOptions.search_word=t,this.queryOptions.page=1,void(this.queryOptions.search_word?this.getList():this.onSearchClear());clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.queryOptions.page=1,this.getList()},700)}getModalElementId(t){return["modal",t||0].join("-")}setModalInputs(t,e=!1,o=""){const s=void 0!==t&&!e;this.modalRef.componentInstance.modalTitle=this.getLangString(s?"EDITING":"ADD"),this.modalRef.componentInstance.modalId=o,this.modalRef.componentInstance.itemId=t||0,this.modalRef.componentInstance.isItemCopy=e||!1,this.modalRef.componentInstance.isEditMode=s}modalOpen(t,e=!1){const o=this.getModalElementId(t);if(window.document.body.classList.add("modal-open"),window.document.getElementById(o)){const t=window.document.getElementById(o),e=t.previousElementSibling;return t.classList.add("d-block"),t.classList.remove("modal-minimized"),void e.classList.remove("d-none")}this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1,backdropClass:"modal-backdrop-left45",windowClass:"modal-left45",container:"#modals-container"}),this.setModalInputs(t,e,o),this.modalRef.result.then(t=>{this.destroyed$.isStopped||(this.onModalClose(t),this.getList())},t=>{this.destroyed$.isStopped||(this.onModalClose(t),t&&["submit","updated"].indexOf(t)>-1&&this.getList())})}deleteItemConfirm(t){this.modalRef=this.modalService.open(l.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then(e=>{"accept"===e&&this.deleteItem(t)})}getLangString(t){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][t]||t}confirmAction(t){return this.modalRef=this.modalService.open(l.q0),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=t,this.modalRef.result}blockSelected(){0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe(t=>{this.clearSelected(),this.getList()},t=>this.showAlert(t.error||this.getLangString("ERROR"))):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}deleteSelected(){0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then(t=>{"accept"===t&&this.dataService.actionBatch(this.selectedIds,"delete").subscribe(t=>{this.clearSelected(),this.getList()},t=>this.showAlert(t.error||this.getLangString("ERROR")))}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}showAlert(t){this.modalRef=this.modalService.open(l.$N),this.modalRef.componentInstance.modalContent=t,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"}deleteItem(t){this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then(e=>{"accept"===e&&this.dataService.deleteItem(t).subscribe(t=>{this.getList()},t=>{t.error&&this.showAlert(t.error)})})}clearSelected(){this.table&&this.table.clearSelected()}actionRequest(t){switch(t[0]){case"edit":this.modalOpen(t[1]);break;case"copy":this.modalOpen(t[1],!0);break;case"delete":this.deleteItem(t[1]);break;case"changeQuery":this.getList()}}getList(){this.loading=!0,this.dataService.getListPage(this.queryOptions).pipe((0,i.R)(this.destroyed$)).subscribe({next:t=>{this.items=t.items,this.collectionSize=t.total,this.loading=!1},error:t=>{this.items=[],this.collectionSize=0,t.error&&this.showAlert(t.error),this.loading=!1}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return t.title="",t.\u0275fac=function(e){return new(e||t)(a.Y36(r.D),a.Y36(d.Kz),a.Y36(d.FF),a.Y36(c.sK))},t.\u0275dir=a.lG2({type:t,viewQuery:function(t,e){if(1&t&&a.Gf(u,7),2&t){let t;a.iGM(t=a.CRH())&&(e.table=t.first)}}}),t})()},18354:function(t,e,o){"use strict";o.r(e),o.d(e,{UsersModule:function(){return Q}});var s=o(38583),i=o(16964),n=o(5727),r=o(3679),l=o(46782),a=o(88002),d=o(23815);class c{constructor(t,e,o,s,i,n,r,l,a,d,c){this.id=t,this.email=e,this.fullName=o,this.roles=s,this.isActive=i,this.options=n,this.role=r,this.phone=l,this.password=a,this.confirmPassword=d,this.apiToken=c}}var u=o(3677),h=o(63124),m=o(5304),p=o(6887),g=o(37716),f=o(91841);let Z=(()=>{class t extends p.D{constructor(t){super(t),this.setRequestUrl("/admin/users")}getRolesList(){const t=this.getRequestUrl()+"/roles";return this.http.get(t,{headers:this.headers}).pipe((0,m.K)(this.handleError()))}createApiToken(){const t=this.getRequestUrl()+"/create_api_token";return this.http.post(t,{},{headers:this.headers}).pipe((0,m.K)(this.handleError()))}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(f.eN))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})();var b=o(73844),v=o(35930),A=o(49093),q=o(95047),T=o(29790),S=o(53332);function E(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.email," ")}}function y(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.fullName," ")}}function I(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.phone," ")}}function x(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"option",52),g._uU(2),g.qZA(),g.BQk()),2&t){const t=e.$implicit;g.xp6(1),g.Q6J("value",t.name),g.xp6(1),g.Oqu(t.title)}}function _(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.password," ")}}function C(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.password," ")}}function L(t,e){if(1&t&&(g.TgZ(0,"div",51),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.formErrors.confirmPassword," ")}}const w=function(t){return{"is-invalid":t}};function R(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"tr",64),g.TgZ(1,"td"),g._UZ(2,"input",65),g.qZA(),g.TgZ(3,"td"),g._UZ(4,"input",66),g.qZA(),g.TgZ(5,"td",67),g._UZ(6,"input",68),g.qZA(),g.TgZ(7,"td",67),g.TgZ(8,"button",69),g.NdJ("click",function(e){const o=g.CHM(t).index;return g.oxw(3).arrayFieldDelete("options",o,e)}),g.ALo(9,"translate"),g._UZ(10,"i",11),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.Q6J("formGroupName",e.index+""),g.xp6(2),g.Q6J("ngClass",g.VKq(7,w,t.controls.name.touched&&!t.controls.name.valid)),g.xp6(2),g.Q6J("ngClass",g.VKq(9,w,t.controls.title.touched&&!t.controls.title.valid)),g.xp6(2),g.Q6J("ngClass",g.VKq(11,w,t.controls.value.touched&&!t.controls.value.valid)),g.xp6(2),g.s9C("ngbTooltip",g.lcZ(9,5,"DELETE"))}}function N(t,e){if(1&t&&(g.TgZ(0,"tbody"),g.YNc(1,R,11,13,"tr",63),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",t.arrayFields.options.controls)}}function k(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",53),g.TgZ(1,"table",54),g.TgZ(2,"colgroup"),g._UZ(3,"col",55),g._UZ(4,"col",55),g._UZ(5,"col",56),g._UZ(6,"col",57),g.qZA(),g.TgZ(7,"thead"),g.TgZ(8,"tr"),g.TgZ(9,"th"),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.TgZ(12,"th"),g._uU(13),g.ALo(14,"translate"),g.qZA(),g.TgZ(15,"th"),g._uU(16),g.ALo(17,"translate"),g.qZA(),g._UZ(18,"th"),g.qZA(),g.qZA(),g.YNc(19,N,2,1,"tbody",58),g.TgZ(20,"tfoot"),g.TgZ(21,"tr",59),g.TgZ(22,"td",60),g.TgZ(23,"button",61),g.NdJ("click",function(e){return g.CHM(t),g.oxw().arrayFieldAdd("options",e)}),g._UZ(24,"i",62),g._uU(25," \xa0 "),g.TgZ(26,"span"),g._uU(27),g.ALo(28,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=g.oxw();g.xp6(10),g.Oqu(g.lcZ(11,5,"SYSTEM_NAME")),g.xp6(3),g.Oqu(g.lcZ(14,7,"NAME")),g.xp6(3),g.Oqu(g.lcZ(17,9,"VALUE")),g.xp6(3),g.Q6J("ngIf",t.arrayFields.options),g.xp6(8),g.Oqu(g.lcZ(28,11,"ADD"))}}function U(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",70),g._uU(1),g.TgZ(2,"button",71),g.NdJ("click",function(){return g.CHM(t),g.oxw().errorMessage=""}),g.qZA(),g.qZA()}if(2&t){const t=g.oxw();g.xp6(1),g.hij(" ",t.errorMessage," ")}}function O(t,e){if(1&t&&(g.TgZ(0,"div",72),g.TgZ(1,"a",73),g.TgZ(2,"span"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.hYB("href","",t.baseUrl,"?_switch_user=",t.model.email,"",g.LSH),g.xp6(2),g.Oqu(g.lcZ(4,3,"IMPERSONATION"))}}const M=function(t){return{"no-events":t}},F=function(t){return{"form-control-search-clear":t}};let D=(()=>{class t extends A.B{constructor(t,e,o,s,i,n,l){super(t,e,o,s,i,n),this.fb=t,this.activeModal=e,this.translateService=o,this.systemNameService=s,this.dataService=i,this.elRef=n,this.appSettings=l,this.allowImpersonation=!1,this.model=new c(0,"","",[],!0,[]),this.formFields=[{name:"email",validators:[r.kI.required,this.emailValidator]},{name:"fullName",validators:[r.kI.required]},{name:"phone",validators:[]},{name:"role",validators:[r.kI.required]},{name:"isActive",validators:[]},{name:"password",validators:[]},{name:"confirmPassword",validators:[]},{name:"apiToken",validators:[]},{name:"options",validators:[],children:[{name:"name",validators:[r.kI.required]},{name:"title",validators:[r.kI.required]},{name:"value",validators:[r.kI.required]}]}]}onBeforeInit(){if(!this.isEditMode){const t=(0,d.findIndex)(this.formFields,{name:"password"});t>-1&&(this.formFields[t].validators.push(r.kI.required),this.formFields[t+1].validators.push(r.kI.required))}this.baseUrl=b.d.getBaseUrl(),this.getUserRoles()}onAfterGetData(){this.buildControls(this.form,this.formFields),this.isEditMode&&this.appSettings.isSuperAdmin&&this.appSettings.settings.userEmail!==this.model.email&&(this.allowImpersonation=!0)}getUserRoles(){this.userRoles$=this.dataService.getRolesList().pipe((0,l.R)(this.destroyed$),(0,a.U)(t=>t.roles))}clearApiToken(t){t&&t.preventDefault(),this.getControl(this.form,null,"apiToken").setValue("")}generateApiToken(t){t&&t.preventDefault(),this.loading=!0,this.dataService.createApiToken().pipe((0,l.R)(this.destroyed$)).subscribe({next:t=>{this.getControl(this.form,null,"apiToken").setValue(t.token),this.loading=!1},error:t=>{this.errorMessage=t.error||this.getLangString("ERROR"),this.loading=!1}})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(r.qu),g.Y36(q.Kz),g.Y36(T.sK),g.Y36(h.U),g.Y36(Z),g.Y36(g.SBq),g.Y36(b.d))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-modal-user"]],features:[g._Bn([]),g.qOj],decls:118,vars:96,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","me-1"],[1,"icon-minimize","me-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ms-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","me-5"],["method","post",3,"formGroup","ngClass","ngSubmit"],["formEl",""],[1,"modal-body","py-0"],[1,"row"],[1,"col-lg-6"],[1,"mb-2","form-group-message"],[1,"label-filled"],["type","text","autocomplete","off","formControlName","email",1,"form-control",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],["type","text","autocomplete","off","formControlName","fullName",1,"form-control",3,"ngClass"],["type","text","formControlName","phone","autocomplete","off",1,"form-control"],["formControlName","role",1,"form-select",3,"ngClass"],[4,"ngFor","ngForOf"],["type","password","autocomplete","off","formControlName","password",1,"form-control",3,"ngClass"],["type","password","autocomplete","off","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"mb-2"],[1,"input-group"],["type","text","name","apiToken","autocomplete","off","formControlName","apiToken",1,"form-control"],["type","button","container","body",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"icon-reload"],[1,"mb-2","mt-0","mt-lg-4"],[1,"card","card-body","p-2","ps-3"],[1,"form-check","m-0"],["type","checkbox","value","1","formControlName","isActive",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],["activeIds","accordion-user-options",1,"ngb-accordion",3,"closeOthers"],["id","accordion-user-options",3,"title"],["ngbPanelContent",""],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","display-block"],["class","float-end",4,"ngIf"],[1,"btn-group","me-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["type","button","ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],[1,"alert","alert-danger"],[3,"value"],["formArrayName","options"],[1,"table","table-bordered","mb-0"],["width","27%"],["width","39%"],["width","7%"],[4,"ngIf"],[1,"bg-faded"],["colspan","4",1,"text-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","title",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-center"],["type","text","formControlName","value",1,"form-control","form-control-sm",3,"ngClass"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button",1,"btn-close",3,"click"],[1,"float-end"],[1,"btn","btn-primary",3,"href"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"button",2),g.NdJ("click",function(t){return e.closeModal(t)}),g._UZ(3,"i",3),g.TgZ(4,"span"),g._uU(5),g.ALo(6,"translate"),g.qZA(),g.qZA(),g.TgZ(7,"button",2),g.NdJ("click",function(t){return e.minimize(t)}),g._UZ(8,"i",4),g.TgZ(9,"span"),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"div",5),g.TgZ(13,"div",6),g.TgZ(14,"div",7),g.TgZ(15,"button",8),g.NdJ("click",function(t){return e.maximize(t)}),g.ALo(16,"translate"),g._UZ(17,"i",9),g.qZA(),g.TgZ(18,"button",10),g.NdJ("click",function(t){return e.closeModal(t)}),g.ALo(19,"translate"),g._UZ(20,"i",11),g.qZA(),g.qZA(),g.qZA(),g.TgZ(21,"h4",12),g._uU(22),g.qZA(),g.qZA(),g.TgZ(23,"form",13,14),g.NdJ("ngSubmit",function(){return e.onSubmit()}),g.TgZ(25,"div",15),g.TgZ(26,"div",16),g.TgZ(27,"div",17),g.TgZ(28,"div",18),g.TgZ(29,"label",19),g._uU(30),g.ALo(31,"translate"),g.qZA(),g._UZ(32,"input",20),g.YNc(33,E,2,1,"div",21),g.qZA(),g.qZA(),g.TgZ(34,"div",17),g.TgZ(35,"div",18),g.TgZ(36,"label",19),g._uU(37),g.ALo(38,"translate"),g.qZA(),g._UZ(39,"input",22),g.YNc(40,y,2,1,"div",21),g.qZA(),g.qZA(),g.qZA(),g.TgZ(41,"div",16),g.TgZ(42,"div",17),g.TgZ(43,"div",18),g.TgZ(44,"label",19),g._uU(45),g.ALo(46,"translate"),g.qZA(),g._UZ(47,"input",23),g.YNc(48,I,2,1,"div",21),g.qZA(),g.qZA(),g.TgZ(49,"div",17),g.TgZ(50,"div",18),g.TgZ(51,"label",19),g._uU(52),g.ALo(53,"translate"),g.qZA(),g.TgZ(54,"select",24),g.YNc(55,x,3,2,"ng-container",25),g.ALo(56,"async"),g.qZA(),g.YNc(57,_,2,1,"div",21),g.qZA(),g.qZA(),g.qZA(),g.TgZ(58,"div",16),g.TgZ(59,"div",17),g.TgZ(60,"div",18),g.TgZ(61,"label",19),g._uU(62),g.ALo(63,"translate"),g.qZA(),g._UZ(64,"input",26),g.YNc(65,C,2,1,"div",21),g.qZA(),g.qZA(),g.TgZ(66,"div",17),g.TgZ(67,"div",18),g.TgZ(68,"label",19),g._uU(69),g.ALo(70,"translate"),g.qZA(),g._UZ(71,"input",27),g.YNc(72,L,2,1,"div",21),g.qZA(),g.qZA(),g.qZA(),g.TgZ(73,"div",16),g.TgZ(74,"div",17),g.TgZ(75,"div",28),g.TgZ(76,"label",19),g._uU(77),g.ALo(78,"translate"),g.qZA(),g.TgZ(79,"div",29),g._UZ(80,"input",30),g.TgZ(81,"button",31),g.NdJ("click",function(t){return e.clearApiToken(t)}),g.ALo(82,"translate"),g._UZ(83,"i",11),g.qZA(),g.TgZ(84,"button",31),g.NdJ("click",function(t){return e.generateApiToken(t)}),g.ALo(85,"translate"),g._UZ(86,"i",32),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(87,"div",17),g.TgZ(88,"div",28),g.TgZ(89,"div",33),g.TgZ(90,"div",34),g.TgZ(91,"div",35),g._UZ(92,"input",36),g.TgZ(93,"label",37),g._uU(94),g.ALo(95,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(96,"ngb-accordion",38),g.TgZ(97,"ngb-panel",39),g.ALo(98,"translate"),g.YNc(99,k,29,13,"ng-template",40),g.qZA(),g.qZA(),g.YNc(100,U,3,1,"div",41),g.qZA(),g.TgZ(101,"div",42),g.YNc(102,O,5,5,"div",43),g.TgZ(103,"div",44),g.TgZ(104,"button",45),g.NdJ("click",function(t){return e.save(!0,t)}),g.TgZ(105,"span"),g._uU(106),g.ALo(107,"translate"),g.qZA(),g.qZA(),g.TgZ(108,"div",46),g._UZ(109,"button",47),g.TgZ(110,"div",48),g.TgZ(111,"button",49),g.NdJ("click",function(t){return e.save(!1,t)}),g._uU(112),g.ALo(113,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(114,"button",50),g.NdJ("click",function(t){return e.closeModal(t)}),g.TgZ(115,"span"),g._uU(116),g.ALo(117,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(2),g.Q6J("disabled",e.submitted),g.xp6(3),g.Oqu(g.lcZ(6,46,"CLOSE")),g.xp6(2),g.Q6J("disabled",e.submitted),g.xp6(3),g.Oqu(g.lcZ(11,48,"MINIMIZE")),g.xp6(5),g.Q6J("title",g.lcZ(16,50,"EXPAND")),g.xp6(3),g.Q6J("title",g.lcZ(19,52,"CLOSE")),g.xp6(4),g.Oqu(e.modalTitle),g.xp6(1),g.Q6J("formGroup",e.form)("ngClass",g.VKq(84,M,e.submitted)),g.xp6(2),g.ekj("loading",e.loading),g.xp6(5),g.hij(" ",g.lcZ(31,54,"EMAIL")," "),g.xp6(2),g.Q6J("ngClass",g.VKq(86,w,e.form.controls.email.touched&&!e.form.controls.email.valid)),g.xp6(1),g.Q6J("ngIf",e.formErrors.email),g.xp6(4),g.hij(" ",g.lcZ(38,56,"FULL_NAME")," "),g.xp6(2),g.Q6J("ngClass",g.VKq(88,w,e.form.controls.fullName.touched&&!e.form.controls.fullName.valid)),g.xp6(1),g.Q6J("ngIf",e.formErrors.fullName),g.xp6(5),g.hij(" ",g.lcZ(46,58,"PHONE")," "),g.xp6(3),g.Q6J("ngIf",e.formErrors.phone),g.xp6(4),g.hij(" ",g.lcZ(53,60,"ROLE")," "),g.xp6(2),g.Q6J("ngClass",g.VKq(90,w,e.form.controls.role.touched&&!e.form.controls.role.valid)),g.xp6(1),g.Q6J("ngForOf",g.lcZ(56,62,e.userRoles$)),g.xp6(2),g.Q6J("ngIf",e.formErrors.password),g.xp6(5),g.hij(" ",g.lcZ(63,64,"PASSWORD")," "),g.xp6(2),g.Q6J("ngClass",g.VKq(92,w,e.form.controls.password.touched&&!e.form.controls.password.valid)),g.xp6(1),g.Q6J("ngIf",e.formErrors.password),g.xp6(4),g.hij(" ",g.lcZ(70,66,"CONFIRM_PASSWORD")," "),g.xp6(2),g.Q6J("ngClass",g.VKq(94,w,e.form.controls.confirmPassword.touched&&!e.form.controls.confirmPassword.valid)),g.xp6(1),g.Q6J("ngIf",e.formErrors.confirmPassword),g.xp6(5),g.hij(" ",g.lcZ(78,68,"API_TOKEN")," "),g.xp6(2),g.ekj("is-invalid",e.formErrors.name),g.xp6(2),g.s9C("ngbTooltip",g.lcZ(82,70,"CLEAR")),g.xp6(3),g.s9C("ngbTooltip",g.lcZ(85,72,"GENERATE")),g.xp6(8),g.MGl("id","fieldIsActive",e.model.id,""),g.xp6(1),g.MGl("for","fieldIsActive",e.model.id,""),g.xp6(1),g.hij(" ",g.lcZ(95,74,"ACTIVE")," "),g.xp6(2),g.Q6J("closeOthers",!0),g.xp6(1),g.Q6J("title",g.lcZ(98,76,"OPTIONS")),g.xp6(3),g.Q6J("ngIf",e.errorMessage),g.xp6(2),g.Q6J("ngIf",e.allowImpersonation),g.xp6(2),g.Q6J("disabled",e.submitted),g.xp6(2),g.Oqu(g.lcZ(107,78,"SAVE_AND_CLOSE")),g.xp6(3),g.Q6J("disabled",e.submitted),g.xp6(3),g.Oqu(g.lcZ(113,80,"SAVE")),g.xp6(4),g.Oqu(g.lcZ(117,82,"CLOSE")))},directives:[r._Y,r.JL,r.sg,s.mk,r.Fj,r.JJ,r.u,s.O5,r.EJ,s.sg,q._L,r.Wl,q.gY,q.Gk,q.gW,q.jt,q.iD,q.Vi,q.TH,r.YN,r.Kr,r.CE,r.x0],pipes:[T.X$,s.Ov],encapsulation:2}),t})();const J=[{path:"",redirectTo:"/users/",pathMatch:"full"},{path:":userEmail",component:(()=>{class t extends u.U{constructor(t,e,o,s,i,n){super(t,e,o,s),this.dataService=t,this.activeModal=e,this.modalService=o,this.translateService=s,this.route=i,this.router=n,this.queryOptions=new v.J("id","desc",1,10,0,0),this.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"email",sortName:"email",title:"EMAIL",outputType:"text",outputProperties:{}},{name:"fullName",sortName:"fullName",title:"FULL_NAME",outputType:"text",outputProperties:{}},{name:"role",sortName:"roles",title:"ROLE",outputType:"userRole",outputProperties:{}},{name:"createdDate",sortName:"createdDate",title:"DATE_TIME",outputType:"date",outputProperties:{format:"dd/MM/y H:mm:s"}},{name:"isActive",sortName:"isActive",title:"STATUS",outputType:"boolean",outputProperties:{}}]}ngOnInit(){this.afterInit()}afterInit(){this.route.paramMap.subscribe(t=>{this.queryOptions.search_word=t.get("userEmail"),this.getList()})}onSearchClear(){this.route.snapshot.url&&this.route.snapshot.url[0].path?this.router.navigate(["/users",""]):this.getList()}setModalInputs(t,e=!1,o=""){const s=void 0!==t&&!e;this.modalRef.componentInstance.modalTitle=s?`${this.getLangString("USER")} #${t}`:this.getLangString("ADD_USER"),this.modalRef.componentInstance.modalId=o,this.modalRef.componentInstance.itemId=t||0,this.modalRef.componentInstance.isItemCopy=e||!1,this.modalRef.componentInstance.isEditMode=s}getModalElementId(t){return["modal","user",t||0].join("-")}getModalContent(){return D}changeRequest(t){}}return t.title="USERS",t.\u0275fac=function(e){return new(e||t)(g.Y36(Z),g.Y36(q.Kz),g.Y36(q.FF),g.Y36(T.sK),g.Y36(n.gz),g.Y36(n.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-shk-users"]],features:[g._Bn([Z]),g.qOj],decls:37,vars:29,consts:[[1,"card"],[1,"card-body"],[1,"icon-head"],[1,"mb-3"],[1,"float-md-start"],[1,"form-control-search","mb-2","mb-md-0",3,"ngClass"],["type","text",1,"form-control","min-width250",3,"placeholder","ngModel","ngModelChange"],[3,"click"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block","mb-2","mb-md-0"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ms-md-2","mb-2","mb-md-0",3,"click"],[1,"icon-plus"],[1,"float-start"],[1,"clearfix"],[1,"min-height400"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","loading","isCloneAllowed","selectedIdsChange","loadingChange","actionRequest","changeRequest"],["table",""]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h3"),g._UZ(3,"i",2),g._uU(4),g.ALo(5,"translate"),g.qZA(),g._UZ(6,"hr"),g.TgZ(7,"div",3),g.TgZ(8,"div",4),g.TgZ(9,"div",5),g.TgZ(10,"input",6),g.NdJ("ngModelChange",function(t){return e.queryOptions.search_word=t})("ngModelChange",function(){return e.onSearchWordUpdate()}),g.ALo(11,"translate"),g.qZA(),g.TgZ(12,"span",7),g.NdJ("click",function(){return e.onSearchWordUpdate("")}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",8),g.TgZ(14,"div",9),g.TgZ(15,"button",10),g.TgZ(16,"span"),g._uU(17),g.ALo(18,"translate"),g.qZA(),g.qZA(),g.TgZ(19,"div",11),g.TgZ(20,"button",12),g.NdJ("click",function(){return e.blockSelected()}),g._uU(21),g.ALo(22,"translate"),g.qZA(),g.TgZ(23,"button",12),g.NdJ("click",function(){return e.deleteSelected()}),g._uU(24),g.ALo(25,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(26,"button",13),g.NdJ("click",function(){return e.modalOpen()}),g._UZ(27,"i",14),g._uU(28," \xa0 "),g.TgZ(29,"span"),g._uU(30),g.ALo(31,"translate"),g.qZA(),g.qZA(),g.qZA(),g._UZ(32,"div",15),g._UZ(33,"div",16),g.qZA(),g.TgZ(34,"div",17),g.TgZ(35,"app-table",18,19),g.NdJ("selectedIdsChange",function(t){return e.selectedIds=t})("loadingChange",function(t){return e.loading=t})("actionRequest",function(t){return e.actionRequest(t)})("changeRequest",function(t){return e.changeRequest(t)}),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(4),g.hij(" ",g.lcZ(5,15,"USERS")," "),g.xp6(5),g.Q6J("ngClass",g.VKq(27,F,!!e.queryOptions.search_word)),g.xp6(1),g.MGl("placeholder","",g.lcZ(11,17,"SEARCH"),"..."),g.Q6J("ngModel",e.queryOptions.search_word),g.xp6(7),g.Oqu(g.lcZ(18,19,"BATCH_ACTIONS")),g.xp6(4),g.Oqu(g.lcZ(22,21,"DISABLE_ENABLE")),g.xp6(3),g.Oqu(g.lcZ(25,23,"DELETE")),g.xp6(6),g.Oqu(g.lcZ(31,25,"ADD")),g.xp6(5),g.Q6J("items",e.items)("selectedIds",e.selectedIds)("collectionSize",e.collectionSize)("queryOptions",e.queryOptions)("tableFields",e.tableFields)("loading",e.loading)("isCloneAllowed",!1))},directives:[s.mk,r.Fj,r.JJ,r.On,q.jt,q.iD,q.Vi,S.a],pipes:[T.X$],encapsulation:2}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[n.Bz.forChild(J)],n.Bz]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[Z],imports:[[s.ez,i.m,Y]]}),t})()}}]);