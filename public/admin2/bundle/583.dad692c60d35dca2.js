"use strict";(self.webpackChunkadmin2=self.webpackChunkadmin2||[]).push([[583],{9583:(gt,v,a)=>{a.r(v),a.d(v,{TemplatesEditModule:()=>dt});var u=a(9808),O=a(1113),f=a(7854),c=a(9783),g=a(5330),x=a(511);class Z{constructor(s,e,n,i,l,p,m,ct,mt,ut){this.id=s,this.name=e,this.extension=n,this.type=i,this.content=l,this.path=p,this.clearCache=m,this.themeName=ct,this.fileSize=mt,this.fileSizeString=ut,this.type||(this.type="template")}static getPath(s){return`${s.path}/${s.name}`}}var C=a(520),T=a(262),J=a(608),t=a(7587);let h=(()=>{class o extends J.D{constructor(e){super(e),this.setRequestUrl("/admin/templates")}getItemContent(e,n){const i=this.getRequestUrl()+"/content";let l=new C.LE;return l=l.append("path",e),l=l.append("type",n),this.http.get(i,{params:l,headers:this.headers}).pipe((0,T.K)(this.handleError()))}saveContent(e){return this.http.post(this.getRequestUrl(),e,{headers:this.headers}).pipe((0,T.K)(this.handleError()))}deleteFileItem(e){const n=this.getRequestUrl();let i=new C.LE;return i=i.append("path",e),this.http.delete(n,{params:i,headers:this.headers}).pipe((0,T.K)(this.handleError()))}deleteFilesBatch(e){const n=`${this.getRequestUrl()}/delete/batch`;return this.http.post(n,{pathArr:e},{headers:this.headers}).pipe((0,T.K)(this.handleError()))}getThemesList(){const e=`${this.getRequestUrl()}/themes`;return this.http.get(e,{headers:this.headers}).pipe((0,T.K)(this.handleError()))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var N=a(6421),r=a(3075),F=a(7579),A=a(2722),U=a(846),Y=a(4332),I=a(1480),E=a(1424),Q=a(242),y=a(845),b=a(5787),R=a(3724),_=a(2466);function k(o,s){if(1&o&&t._UZ(0,"p-message",20),2&o){const e=t.oxw();t.Q6J("text",e.errorMessage)}}let P=(()=>{class o extends U.P{constructor(e,n,i,l,p,m){super(e,n,i),this.ref=e,this.config=n,this.dataService=i,this.messageService=l,this.settingsService=p,this.appSettings=m,this.form=new r.cw({id:new r.NI("",[])}),this.isEditMode=!1,this.errorMessage="",this.submitted=!1,this.loading=!1,this.isPathReadOnly=!1,this.closeReason="canceled",this.uniqueId="",this.destroyed$=new F.x}ngOnInit(){this.model=new Z(this.config.data.id,"",""),this.model.type=this.config.data.type||"template",this.config.data.name&&(this.isEditMode=!0,this.model.name=this.config.data.name,this.model.path=this.config.data.path,this.model.extension=this.config.data.extension,this.model.themeName=this.config.data.themeName),this.isEditMode&&this.getContent()}ngAfterViewInit(){this.editorInit()}getContent(){this.loading=!0;const e=Z.getPath(this.model);this.dataService.getItemContent(e,this.model.type).pipe((0,A.R)(this.destroyed$)).subscribe({next:n=>{n.content&&setTimeout(()=>{this.model.content=n.content,this.editor.setValue(this.model.content,-1)},0),this.loading=!1},error:n=>{n.error&&(this.errorMessage=n.error),this.loading=!1}})}editorInit(){const e=ace.require("ace/ext/modelist"),n=this.isEditMode?e.getModeForPath(`${this.model.path}/${this.model.name}`).mode:"ace/mode/twig";ace.config.setModuleUrl("ace/mode/javascript_worker","../js/ace/worker-javascript.js"),ace.config.setModuleUrl("ace/mode/css_worker","../js/ace/worker-css.js"),this.editor=ace.edit(`editor-${this.model.type}-${this.model.id}`,{mode:n,theme:"ace/theme/kuroir",maxLines:30,minLines:15,fontSize:18})}saveRequest(){return this.dataService.saveContent(this.getFormData())}getFormData(){const e=Object.assign({},this.model);return e.content=this.editor.getValue(),e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.E7),t.Y36(g.S),t.Y36(h),t.Y36(c.ez),t.Y36(Y.g),t.Y36(I.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-file-edit"]],features:[t._Bn([h]),t.qOj],decls:33,vars:28,consts:[[1,"grid"],[1,"col-12","md:col-6"],["for","fieldName",1,"block","mb-2"],["type","text","id","fieldName","pInputText","",1,"w-full","mb-2",3,"ngModel","ngModelChange"],["for","fieldPath",1,"block","mb-2"],["type","text","id","fieldPath","pInputText","",1,"w-full","mb-2",3,"ngModel","readonly","ngModelChange"],[1,"grid","mb-3"],[1,"pt-2"],["inputId","fieldClearCache","styleClass","mr-2 vertical-align-middle",3,"ngModel","ngModelChange"],["for","fieldClearCache",1,"vertical-align-middle"],[1,"mb-0"],[1,"block","mb-2"],[1,"border",3,"id"],["role","separator",1,"p-divider","p-component","p-divider-horizontal","p-divider-solid","p-divider-left"],[1,"p-divider-content"],["styleClass","block w-full text-left mb-3","severity","error",3,"text",4,"ngIf"],[1,"text-right","pt-2"],["pButton","","pRipple","","type","button","icon","pi pi-check",1,"p-button-success","p-button-raised","w-full","md:w-auto","mb-2","md:mb-0","md:ml-2",3,"label","click"],["pButton","","pRipple","","type","button","icon","pi pi-check",1,"p-button-warning","p-button-raised","w-full","md:w-auto","mb-2","md:mb-0","md:ml-2",3,"label","click"],["pButton","","pRipple","","type","button",1,"p-button-secondary","p-button-raised","w-full","md:w-auto","mb-2","md:mb-0","md:ml-2",3,"label","click"],["styleClass","block w-full text-left mb-3","severity","error",3,"text"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"label",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",3),t.NdJ("ngModelChange",function(l){return n.model.name=l}),t.qZA(),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"label",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",5),t.NdJ("ngModelChange",function(l){return n.model.path=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"div",1),t.TgZ(13,"div",7),t.TgZ(14,"p-inputSwitch",8),t.NdJ("ngModelChange",function(l){return n.model.clearCache=l}),t.qZA(),t.TgZ(15,"label",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",10),t.TgZ(19,"label",11),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"div",12),t.qZA(),t.TgZ(23,"div",13),t._UZ(24,"div",14),t.qZA(),t.YNc(25,k,1,1,"p-message",15),t.TgZ(26,"div",16),t.TgZ(27,"button",17),t.NdJ("click",function(l){return n.saveData(!0,l)}),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"button",18),t.NdJ("click",function(l){return n.saveData(!1,l)}),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"button",19),t.NdJ("click",function(l){return n.dismissModal(l)}),t.ALo(32,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,14,"NAME")," "),t.xp6(2),t.Q6J("ngModel",n.model.name),t.xp6(3),t.hij(" ",t.lcZ(9,16,"PATH")," "),t.xp6(2),t.Q6J("ngModel",n.model.path)("readonly",n.isPathReadOnly),t.xp6(4),t.Q6J("ngModel",n.model.clearCache),t.xp6(2),t.hij(" ",t.lcZ(17,18,"CLEAR_SYSTEM_CACHE")," "),t.xp6(4),t.hij("",t.lcZ(21,20,"CODE"),":"),t.xp6(2),t.hYB("id","editor-",n.model.type,"-",n.model.id,""),t.xp6(3),t.Q6J("ngIf",n.errorMessage),t.xp6(2),t.Q6J("label",t.lcZ(28,22,"SAVE_AND_CLOSE")),t.xp6(2),t.Q6J("label",t.lcZ(30,24,"SAVE")),t.xp6(2),t.Q6J("label",t.lcZ(32,26,"CLOSE")))},directives:[r.Fj,E.o,r.JJ,r.On,Q.Ql,u.O5,y.Hq,b.H,R.q],pipes:[_.X$],encapsulation:2}),o})();var M=a(889),d=a(4851),w=a(9114),q=a(1874),S=a(6572);function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.TgZ(2,"div",10),t._UZ(3,"i",11),t.TgZ(4,"input",12),t.NdJ("input",function(){return t.CHM(e),t.oxw().onInputSearch()})("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.search_word=i}),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",13),t.TgZ(7,"button",14),t.NdJ("click",function(i){return t.CHM(e),t.oxw(),t.MAs(8).toggle(i)}),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.MGl("placeholder","",t.lcZ(5,3,"SEARCH"),"..."),t.Q6J("ngModel",e.queryOptions.search_word),t.xp6(3),t.Q6J("label",t.lcZ(8,5,"ACTIONS"))}}function j(o,s){if(1&o&&(t.TgZ(0,"th",16),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",17),t.qZA()),2&o){const e=s.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.header)," "),t.xp6(2),t.Q6J("field",e.field)}}function H(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,j,4,5,"th",15),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function $(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",23),t.TgZ(2,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().openModal(i)}),t.qZA(),t.qZA(),t.BQk()}}function B(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"app-render-output",21),t.NdJ("changeRequest",function(i){return t.CHM(e),t.oxw(2).onOptionUpdate(i)}),t.qZA(),t.YNc(2,$,3,0,"ng-container",22),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(),l=i.$implicit,p=i.columns;t.xp6(1),t.Q6J("value",l[e.field])("key",e.field)("outputType",e.outputType)("options",e.outputProperties)("object",l),t.xp6(1),t.Q6J("ngIf",p.length==n+1)}}function z(o,s){if(1&o&&(t.TgZ(0,"tr",18),t.TgZ(1,"td"),t._UZ(2,"p-tableCheckbox",19),t.qZA(),t.YNc(3,B,3,6,"td",20),t.qZA()),2&o){const e=s.$implicit,n=s.columns;t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",n)}}function K(o,s){1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function X(o,s){1&o&&(t._uU(0),t.ALo(1,"translate")),2&o&&t.hij(" ",t.lcZ(1,1,"EMPTY"),". ")}function G(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",25),t.YNc(2,K,3,3,"ng-container",26),t.YNc(3,X,2,3,"ng-template",null,27,t.W1O),t.qZA(),t.qZA()),2&o){const e=s.$implicit,n=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("colSpan",e.length+1),t.xp6(1),t.Q6J("ngIf",i.queryOptions.search_word)("ngIfElse",n)}}let L=(()=>{class o extends N.p{constructor(e,n,i,l,p,m){super(e,n,i,l,p,m),this.dialogService=e,this.contentTypesService=n,this.dataService=i,this.translateService=l,this.messageService=p,this.confirmationService=m,this.queryOptions=new x.J(1,20,"type","asc"),this.themes=[],this.cols=[{field:"name",header:"NAME",outputType:"text",outputProperties:{}},{field:"type",header:"TYPE",outputType:"text",outputProperties:{}},{field:"path",header:"PATH",outputType:"text",outputProperties:{}},{field:"fileSize",header:"FILE_SIZE",outputType:"number",outputProperties:{}}]}ngOnInit(){this.dataService.setRequestUrl("/admin/templates/editable_files"),this.menuItems=[{label:this.getLangString("REFRESH"),icon:"pi pi-refresh",command:e=>{this.queryOptions.page=1,this.queryOptions.search_word="",this.getData()}}]}getModalComponent(){return P}getItemData(e){return e?{id:e.id||0,name:e.name,path:e.path,type:e.type,extension:e.extension,themeName:e.themeName||""}:{id:0}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.xA),t.Y36(M.s),t.Y36(h),t.Y36(_.sK),t.Y36(c.ez),t.Y36(c.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-assets-edit"]],features:[t._Bn([g.xA,c.YP,h]),t.qOj],decls:9,vars:16,consts:[["styleClass","p-datatable-striped","dataKey","id",3,"selection","sortField","sortOrder","lazy","paginator","showJumpToPageDropdown","value","columns","rows","totalRecords","loading","selectionChange","onLazyLoad"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["icon","pi pi-exclamation-triangle",3,"header"],["styleClass","p-menu-nowrap",3,"popup","model"],["menu",""],[1,"flex","lg:justify-content-between","flex-wrap"],[1,"w-full","lg:w-auto","mb-2","lg:mb-0"],[1,"p-input-icon-left","w-full","lg:w-auto","lg-2","lg:mb-0","mr-0","lg:mr-2","mb-2","lg:mb-0"],[1,"pi","pi-search"],["pInputText","","type","text",1,"lg:w-auto","w-full",3,"ngModel","placeholder","input","ngModelChange"],[1,"w-full","lg:w-auto"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down","iconPos","left",1,"ml-0","lg:ml-2","w-full","lg:w-auto","mb-2","lg:mb-0",3,"label","click"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"show-on-hover-parent"],[3,"value"],[4,"ngFor","ngForOf"],[3,"value","key","outputType","options","object","changeRequest"],[4,"ngIf"],[1,"absolute","show-on-hover","pos-top10","pos-right10"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button","p-button-sm","p-button-rounded","p-button-info",3,"click"],[3,"colSpan"],[4,"ngIf","ngIfElse"],["emptyMessage",""]],template:function(e,n){1&e&&(t.TgZ(0,"p-table",0),t.NdJ("selectionChange",function(l){return n.itemsSelected=l})("onLazyLoad",function(l){return n.getData(l)}),t.YNc(1,D,9,7,"ng-template",1),t.YNc(2,H,4,1,"ng-template",2),t.YNc(3,z,4,2,"ng-template",3),t.YNc(4,G,5,3,"ng-template",4),t.qZA(),t._UZ(5,"p-confirmDialog",5),t.ALo(6,"translate"),t._UZ(7,"p-menu",6,7)),2&e&&(t.Q6J("selection",n.itemsSelected)("sortField",n.queryOptions.sort_by)("sortOrder","asc"==n.queryOptions.sort_dir?1:-1)("lazy",!0)("paginator",!0)("showJumpToPageDropdown",!0)("value",n.items)("columns",n.cols)("rows",n.queryOptions.limit)("totalRecords",n.itemsTotal)("loading",n.loading),t.xp6(5),t.Q6J("header",t.lcZ(6,14,"CONFIRM")),t.xp6(2),t.Q6J("popup",!0)("model",n.menuItems))},directives:[d.iA,c.jx,w.Q,q.v2,r.Fj,E.o,r.JJ,r.On,y.Hq,b.H,d.Mo,u.sg,d.lQ,d.fz,d.UA,S.g,u.O5],pipes:[_.X$],encapsulation:2}),o})();var V=a(4036);function W(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.TgZ(2,"div",10),t._UZ(3,"i",11),t.TgZ(4,"input",12),t.NdJ("input",function(){return t.CHM(e),t.oxw().onInputSearch()})("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.search_word=i}),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",13),t.TgZ(7,"p-dropdown",14),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().queryOptions.category=i})("ngModelChange",function(){return t.CHM(e),t.oxw().onThemeChange()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",15),t.TgZ(9,"button",16),t.NdJ("click",function(i){return t.CHM(e),t.oxw(),t.MAs(8).toggle(i)}),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",17),t.NdJ("click",function(i){return t.CHM(e),t.oxw().openModal(null,i)}),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.MGl("placeholder","",t.lcZ(5,6,"SEARCH"),"..."),t.Q6J("ngModel",e.queryOptions.search_word),t.xp6(3),t.Q6J("options",e.themes)("ngModel",e.queryOptions.category),t.xp6(2),t.Q6J("label",t.lcZ(10,8,"ACTIONS")),t.xp6(2),t.Q6J("label",t.lcZ(12,10,"ADD"))}}function tt(o,s){if(1&o&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",20),t.qZA()),2&o){const e=s.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.header)," "),t.xp6(2),t.Q6J("field",e.field)}}function et(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,tt,4,5,"th",18),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function nt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",26),t.TgZ(2,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().openModal(i)}),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().deleteItem(i)}),t.qZA(),t.qZA(),t.BQk()}}function ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"app-render-output",24),t.NdJ("changeRequest",function(i){return t.CHM(e),t.oxw(2).onOptionUpdate(i)}),t.qZA(),t.YNc(2,nt,4,0,"ng-container",25),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(),l=i.$implicit,p=i.columns;t.xp6(1),t.Q6J("value",l[e.field])("key",e.field)("outputType",e.outputType)("options",e.outputProperties)("object",l),t.xp6(1),t.Q6J("ngIf",p.length==n+1)}}function it(o,s){if(1&o&&(t.TgZ(0,"tr",21),t.TgZ(1,"td"),t._UZ(2,"p-tableCheckbox",22),t.qZA(),t.YNc(3,ot,3,6,"td",23),t.qZA()),2&o){const e=s.$implicit,n=s.columns;t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",n)}}function lt(o,s){1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NOTHING_FOUND"),". "))}function st(o,s){1&o&&(t._uU(0),t.ALo(1,"translate")),2&o&&t.hij(" ",t.lcZ(1,1,"EMPTY"),". ")}function at(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t.YNc(2,lt,3,3,"ng-container",30),t.YNc(3,st,2,3,"ng-template",null,31,t.W1O),t.qZA(),t.qZA()),2&o){const e=s.$implicit,n=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("colSpan",e.length+1),t.xp6(1),t.Q6J("ngIf",i.queryOptions.search_word)("ngIfElse",n)}}const pt=[{path:"",component:(()=>{class o{navBarToggle(){window.document.querySelector(".layout-sidebar").classList.toggle("active"),window.document.querySelector(".layout-mask").classList.toggle("layout-mask-active")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-template-edit-main"]],features:[t._Bn([])],decls:20,vars:9,consts:[[1,"layout-topbar","justify-content-between"],["type","button",1,"menu-button",3,"click"],[1,"pi","pi-bars"],[1,"layout-topbar-header","text-3xl","text-600"],[1,"fi","fi-br-layout-fluid","vertical-align-middle","mr-3"],[1,"vertical-align-middle"],[1,"topbar-menu"],["routerLinkActive","active"],["routerLink","templates"],["routerLink","assets"],[1,"layout-content"],[1,"content-section","min-height400","bg-white"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return n.navBarToggle()}),t._UZ(2,"i",2),t.qZA(),t.TgZ(3,"span",3),t._UZ(4,"i",4),t.TgZ(5,"span",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"ul",6),t.TgZ(9,"li",7),t.TgZ(10,"a",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.TgZ(13,"li",7),t.TgZ(14,"a",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t._UZ(19,"router-outlet"),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,3,"CODE")),t.xp6(5),t.Oqu(t.lcZ(12,5,"TEMPLATES")),t.xp6(4),t.Oqu(t.lcZ(16,7,"ASSETS")))},directives:[f.Od,f.yS,f.lC],pipes:[_.X$],encapsulation:2}),o})(),children:[{path:"",redirectTo:"templates"},{path:"templates",component:(()=>{class o extends L{constructor(e,n,i,l,p,m){super(e,n,i,l,p,m),this.dialogService=e,this.contentTypesService=n,this.dataService=i,this.translateService=l,this.messageService=p,this.confirmationService=m,this.queryOptions=new x.J(1,20,"path","asc"),this.themes=[],this.cols=[{field:"name",header:"NAME",outputType:"text",outputProperties:{}},{field:"themeName",header:"TEMPLATE_THEME_NAME",outputType:"text",outputProperties:{}},{field:"path",header:"PATH",outputType:"text",outputProperties:{}}]}ngOnInit(){this.menuItems=[{label:this.getLangString("REFRESH"),icon:"pi pi-refresh",command:e=>{this.queryOptions.page=1,this.queryOptions.search_word="",this.getData()}},{label:this.getLangString("DELETE_SELECTED"),icon:"pi pi-times",command:e=>{this.deleteSelected()}}],this.getThemesList()}getThemesList(){this.dataService.getThemesList().subscribe({next:e=>{this.themes=e.map(n=>(n.title||(n.title=n.name),n)),this.themes.unshift({name:"",title:this.getLangString("ALL")})}})}onThemeChange(){this.queryOptions.page=1,this.getData()}deleteSelected(){this.itemsSelected&&0!==this.itemsSelected.length?this.confirmationService.confirm({message:this.getLangString("YOU_SURE_YOU_WANT_DELETE"),accept:()=>{const e=[];this.itemsSelected.forEach(n=>{e.push(Z.getPath(n))}),this.dataService.deleteFilesBatch(e).pipe((0,A.R)(this.destroyed$)).subscribe({next:n=>{this.messageService.add({key:"message",severity:"success",detail:this.getLangString("DELETED_SUCCESSFULLY")}),1===this.items.length&&(this.queryOptions.page=1),this.getData()},error:n=>{n.error&&this.messageService.add({key:"message",severity:"error",detail:n.error}),this.loading=!1}})}}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}deleteItem(e,n){n&&n.preventDefault(),this.confirmationService.confirm({message:this.getLangString("YOU_SURE_YOU_WANT_DELETE"),accept:()=>{const i=Z.getPath(e);this.dataService.deleteFileItem(i).pipe((0,A.R)(this.destroyed$)).subscribe({next:l=>{this.messageService.add({key:"message",severity:"success",detail:this.getLangString("DELETED_SUCCESSFULLY")}),1===this.items.length&&(this.queryOptions.page=1),this.getData()},error:l=>{l.error&&this.messageService.add({key:"message",severity:"error",detail:l.error}),this.loading=!1}})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.xA),t.Y36(M.s),t.Y36(h),t.Y36(_.sK),t.Y36(c.ez),t.Y36(c.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-template-edit"]],features:[t._Bn([g.xA,c.YP,h]),t.qOj],decls:9,vars:16,consts:[["styleClass","p-datatable-striped","dataKey","id",3,"selection","sortField","sortOrder","lazy","paginator","showJumpToPageDropdown","value","columns","rows","totalRecords","loading","selectionChange","onLazyLoad"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["icon","pi pi-exclamation-triangle",3,"header"],["styleClass","p-menu-nowrap",3,"popup","model"],["menu",""],[1,"flex","lg:justify-content-between","flex-wrap"],[1,"w-full","lg:w-auto","mb-2","lg:mb-0"],[1,"p-input-icon-left","w-full","lg:w-auto","lg-2","lg:mb-0","mr-0","lg:mr-2","mb-2","lg:mb-0"],[1,"pi","pi-search"],["pInputText","","type","text",1,"lg:w-auto","w-full",3,"ngModel","placeholder","input","ngModelChange"],[1,"lg:inline-block"],["styleClass","w-full lg:w-auto","optionLabel","title","optionValue","name",3,"options","ngModel","ngModelChange"],[1,"w-full","lg:w-auto"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down","iconPos","left",1,"ml-0","lg:ml-2","w-full","lg:w-auto","mb-2","lg:mb-0",3,"label","click"],["type","button","pButton","","pRipple","","icon","pi pi-plus","iconPos","left",1,"p-button-success","ml-0","lg:ml-2","w-full","lg:w-auto",3,"label","click"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"show-on-hover-parent"],[3,"value"],[4,"ngFor","ngForOf"],[3,"value","key","outputType","options","object","changeRequest"],[4,"ngIf"],[1,"absolute","show-on-hover","pos-top10","pos-right10"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button","p-button-sm","p-button-rounded","p-button-info",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button","p-button-sm","p-button-rounded","p-button-danger","ml-2",3,"click"],[3,"colSpan"],[4,"ngIf","ngIfElse"],["emptyMessage",""]],template:function(e,n){1&e&&(t.TgZ(0,"p-table",0),t.NdJ("selectionChange",function(l){return n.itemsSelected=l})("onLazyLoad",function(l){return n.getData(l)}),t.YNc(1,W,13,12,"ng-template",1),t.YNc(2,et,4,1,"ng-template",2),t.YNc(3,it,4,2,"ng-template",3),t.YNc(4,at,5,3,"ng-template",4),t.qZA(),t._UZ(5,"p-confirmDialog",5),t.ALo(6,"translate"),t._UZ(7,"p-menu",6,7)),2&e&&(t.Q6J("selection",n.itemsSelected)("sortField",n.queryOptions.sort_by)("sortOrder","asc"==n.queryOptions.sort_dir?1:-1)("lazy",!0)("paginator",!0)("showJumpToPageDropdown",!0)("value",n.items)("columns",n.cols)("rows",n.queryOptions.limit)("totalRecords",n.itemsTotal)("loading",n.loading),t.xp6(5),t.Q6J("header",t.lcZ(6,14,"CONFIRM")),t.xp6(2),t.Q6J("popup",!0)("model",n.menuItems))},directives:[d.iA,c.jx,w.Q,q.v2,r.Fj,E.o,r.JJ,r.On,V.Lt,y.Hq,b.H,d.Mo,u.sg,d.lQ,d.fz,d.UA,S.g,u.O5],pipes:[_.X$],encapsulation:2}),o})()},{path:"assets",component:L}]}];let rt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(pt)],f.Bz]}),o})(),dt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,O.m,rt]]}),o})()}}]);